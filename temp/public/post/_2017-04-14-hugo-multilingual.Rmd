---
title: 开始写科研博客
author: 赵鹏
date: '2017-04-14'
slug: science-blog
categories: []
tags: []
---

今天，复活节假期前夕，同事们都休假了。我虽然在办公室，却无心上班，发了一会儿呆，想想与其痛苦地工作，不如快乐地解决一下[新网站](http://pzhao.org)的一个小问题：disqus 评论框的问题。

打建好站，disqus评论框就一直没成功加载过。后来听说是`config.toml`里 `disqus shortname`指的不是我的disqus ID，而是专门要设置一下，https://help.disqus.com/customer/portal/articles/466208-what-s-a-shortname-, 我说"啊,还有这事儿？"于是就设置了一下，但是仍然不能成功加载。这个问题放了几天，今天心血来潮一搜，http://applyr.blogspot.co.at/2017/01/blogging-about-r-from-r-studio.html，嗯，兴许是路径的问题，于是就把`config.toml`开头的路径改为

```
baseurl = "http://www.pzhao.org"
# relativeurls = true
```

然后运行R语言的建站函数：

```{r, eval=FALSE}
blogdown::build_site(local=FALSE)
```

Disqus评论框就乖乖出现了。欢迎来测试。

啥，你看不见？嗯，听说好像是被墙了。

<
第二个是双语或多语界面。几年前我弄过双语博客 http://dapengde.com/archives/15265， 后来放弃了，因为WordPress的双语方案有些遗留问题让我不爽，另外我没有精力写英文博客。现在，新网站是个科研网站，博客可以只出现在中文版里，而英文版只放自己的学术情况就行了，不用像博客更新那么频繁。

我对Hugo的架构并不熟悉，原以为会很麻烦，结果弄一会儿就搞定了，原来这么简单。有些步骤在主题的说明文档里
http://dapengde.com/blogdown_demo_academic/post/getting-started/
提到了，但不够全。完整的步骤是这样的：

1、开启双语。这需要在`config.toml`里末尾找到：

```
[languages.en]
  languageCode = "en-us"
```

这说明网站现在是英文的。在后面添加中文，也就是：

```
[languages.en]
  languageCode = "en-us"

[languages.zh]
  languageCode = "zh-cn"
```

2、设置默认语言。这需要在`config.toml`里开头不远处找到：

```{r}
# Default language to use (if you setup multilingual support)
defaultContentLanguage = "zh"
defaultContentLanguageInSubdir = true
```

原先是en，改成zh就可以让网站默认打开是中文。


3、菜单栏增加中文界面。菜单栏就是是网页顶部那一排按钮。这需要在`config.toml`里找到菜单栏的设定：

```
[[menu.main]]
  name = "Home"
  url = "#about"
  weight = 1
```

上面是默认语言英语的设置。在下面添加中文设置，格式是

```
[[languages.zh.menu.main]]
  name = "主页"
  url = "#about"
  weight = 1
```

这样，就把`Home`按钮替换成了`主页`按钮。

4、其他地方的翻译。这需要把`\themes\hugo-academic\i18n\` 文件夹拷贝到根目录，然后删掉里边不需要的语言文件。我们只保留`en.yaml`和`zh.yaml`。用文本编辑器打开`zh.yaml`，把里边翻译不当的地方修改一下，比如 interests 翻译成了“兴趣爱好”，我改成了“研究领域”。


5、新增内容的双语。这个最好办，每次在`content\`文件夹里新增文件时，如果要增加英文，就在文件扩展名前面加个`.en`就行了。例如，我在`content\talk\`下面新建了个`egu-2017.md`，里面是中文，会出现在中文界面上。那么我想让这个项目也在英文版出现，只需把`egu-2017.md`复制一份，命名为`egu-2017.en.md`，那么这个项目就会在英文界面出现了。打开`egu-2017.en.md`把里面的中文改成英文即可。

6、在菜单栏增加中英文界面切换的按钮。只需在`config.toml`里的菜单设置出增加：
```
[[menu.main]]
  name = "中文"
  url = "../zh"
  weight = 7
  
[[languages.zh.menu.main]]
  name = "EN"
  url = "../en"
  weight = 7
```

至此，双语界面全部搞定。