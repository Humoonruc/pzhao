<!DOCTYPE html>
<html lang="zh-cn">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.41" />
  <meta name="author" content="Peng Zhao">
  <meta name="description" content="Post-doc in Geoecology">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  <link rel="alternate" href="http://www.pzhao.org/index.xml" type="application/rss+xml" title="Peng Zhao">
  <link rel="feed" href="http://www.pzhao.org/index.xml" type="application/rss+xml" title="Peng Zhao">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="http://www.pzhao.org/archives/14164/">

  

  <title>xbmc的开机自动启动 | Peng Zhao</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">切换导航</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/zh/">Peng Zhao</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/zh/#about">
            
            <span>关于</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/zh/tags/news">
            
            <span>新闻</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/zh/tags/post">
            
            <span>日志</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/zh/publication">
            
            <span>论文</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/zh/talk">
            
            <span>报告</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/zh/#projects">
            
            <span>项目</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/zh/#teaching">
            
            <span>教学</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/zh/#unclassified">
            
            <span>其他</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="https://cse.google.com/cse/publicurl?cx=006346710622437628329:nxozn9fijm0">
            
            <span>搜索</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/en">
            
            <span>EN</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  

  <div class="article-container">
    <h1 itemprop="name">xbmc的开机自动启动</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2012-04-01 08:06:01 &#43;0000 &#43;0000" itemprop="datePublished">
      Sun, Apr 1, 2012
    </time>
  </span>

  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/zh/categories/%e6%9c%aa%e5%88%86%e7%b1%bb">未分类</a
    >
    
  </span>
  
  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/zh/tags/ubuntu">ubuntu</a
    >, 
    
    <a href="/zh/tags/xbmc">xbmc</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=http%3a%2f%2fwww.pzhao.org%2farchives%2f14164%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=xbmc%e7%9a%84%e5%bc%80%e6%9c%ba%e8%87%aa%e5%8a%a8%e5%90%af%e5%8a%a8&amp;url=http%3a%2f%2fwww.pzhao.org%2farchives%2f14164%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2fwww.pzhao.org%2farchives%2f14164%2f&amp;title=xbmc%e7%9a%84%e5%bc%80%e6%9c%ba%e8%87%aa%e5%8a%a8%e5%90%af%e5%8a%a8"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=http%3a%2f%2fwww.pzhao.org%2farchives%2f14164%2f&amp;title=xbmc%e7%9a%84%e5%bc%80%e6%9c%ba%e8%87%aa%e5%8a%a8%e5%90%af%e5%8a%a8"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=xbmc%e7%9a%84%e5%bc%80%e6%9c%ba%e8%87%aa%e5%8a%a8%e5%90%af%e5%8a%a8&amp;body=http%3a%2f%2fwww.pzhao.org%2farchives%2f14164%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <p>东西多了，徒增烦恼。最近换了新电脑，以前用的一台旧笔记本闲置下来。它是三年前买的一款惠普HP540，当时买的时候就属于低端配置，如今该如何处理它？这成为近日挥之不去的困扰。</p>

<p><img class="alignnone" alt="" src="http://cdn.asia.cnet.com/i/r/2009/nb/44539783/sc001.jpg" width="500" height="375" /></p>

<p>这台HP 540 配置是这样的：</p>

<ul>
<li><p>处理器：Intel 酷睿2双核 T5670</p>

<p>处理器主频(GHz)：1.8</p>

<p>二级缓存(KB) ：2048</p>

<p>前端总线频率(MHz) ：800</p>

<p>主板芯片组： Intel GM965+ICH8-M</p>

<p>内存容量(MB) ：2048</p>

<p>内存描述：DDR2 667</p>

<p>硬盘容量(GB) ：160</p>

<p>硬盘转速(转/分) ：5400</p>

<p>硬盘缓存(M) ：8</p>

<p>显示屏尺寸(英寸)：14.1</p>

<p>显示屏类型：TFT WXGA</p>

<p>最大分辨率(dpi) ：1280×800</p>

<p>显卡：集成，Intel GMA X3100</p>

<p>视频输出：1个VGA端口</p>

<p>操作系统：Windows XP SP3 和 Ubuntu 11.10 双系统</p></li>
</ul>

<p>起初我想转让，因为拿它写写论文、听听歌、看看片、上上网，绝对是绰绰有余的。可是，触摸板上的鼠标左键不灵了，显示屏下方时不时会闪一下，恐怕即使卖掉也不值钱了。后来我想给正在上幼儿园的儿子入门用，我甚至安装了一个叫作QIMO的专为学龄前儿童设计的操作系统，可是又打消了这个念头，觉得不应该让孩子过早混淆真实和虚拟世界。最后的决定是，把它改造成一台多媒体播放器，打造一个家庭影院，取代我家古旧的DVD机，用来弥补家里没有电视机、在国外不方便看国内节目的缺憾。</p>

<p>实现这个目标，非XBMC莫属。</p>

<p><img class="alignnone" alt="" src="http://xbmc.org/wp-content/gallery/confluence/screenshot000.jpg" width="480" height="270" /></p>

<p>XBMC是什么？很多复杂的解释经常让初学者一头雾水。就设想它是个播放器软件吧，就像千千静听或smplayer一样。在此基础上增加外围的辅助功能，例如获取相关的艺人介绍、海报等信息，用比较炫的方式展示出来。可以加上天气预报、RSS、查看邮件等附加功能。</p>

<p>XBMC安装起来容易，网上有太多介绍，这里推荐一个：<a href="http://blog.punkid.org/2011/04/03/build-home-media-center-on-an-ubuntu-system-with-xbmc/" target="_blank">点我。</a></p>

<p>我顺利地完成了XBMC 11.0-RC2 的安装和运行，并在ubuntu 11.10 和windows xp sp3上比较了一下。其实这事儿完全可以到此为止了，可是我的强迫症发作了。我的xbmc，打开的过程繁琐。我希望把笔记本电脑放在电视柜原来放DVD机的位置，接上家里的外接显示器和音响，平时就当DVD机用，合着盖子不再打开了。可是现在必须这样操作：</p>

<p>按笔记本电脑的电源开关&#8212;&gt;等待&#8212;&gt;登录操作系统&#8212;&gt;等待&#8212;&gt;打开xbmc程序&#8212;&gt;选择节目</p>

<p>即使再买个无线键盘进行此番操作，我也嫌繁琐。我希望像机顶盒一样，只需按一下开机按钮。</p>

<p>那就折腾一下试试。</p>

<p>这个开机自动运行的问题，涉及几个前后相继的步骤：</p>

<p>1 主板设置为电源接通就自动开机。</p>

<p>只要一开插线板上的开关，不必按笔记本的电源键就可以开机了。这需要在bios里找到电源选项来设置。除此之外别无他法。遗憾的是，我死活找不到这个选项。咨询了惠普的工程师才确认，原来HP540的主板天生不支持这个功能&#8230;&#8230;</p>

<p>如果只是需要开机的时候按一下电源键，我还能忍。本步跳过。</p>

<p>2 无须输入密码就自动登录。</p>

<p>在Ubuntu上设置一个无密码的标准帐户，并将自动登录开关打开。Ubuntu 11.10 会无须任何操作而默认登录这个帐户。</p>

<p>在windows xp上，除非只有一个没有密码的帐户，否则总需要点一下才能进去，因此windows xp完败。不过，后续遇到的问题让我一度考虑返回windows xp。此乃后话，暂且不表。后面几步均是在Ubuntu下。</p>

<p>3 登录后自动运行xbmc。</p>

<p>这一步有两种方法。</p>

<p>3.1 一种是登录环境选择Unity（默认，不必更改），在开机启动项里添加xbmc。添加方法：启动应用程序&#8212;&gt;添加，名称随意，命令写为xbmc。</p>

<p>ubuntu添加开机自动运行程序方法可参见：<a href="http://azrael8.blogbus.com/logs/97001720.html" target="_blank">点我</a>，<a href="http://hi.baidu.com/pine515/blog/item/6e6a1346c947319cb3b7dc28.html" target="_blank">还有我</a>。</p>

<p>3.2 另一种是在登录环境中选择直接进入 xbmc。方法是在终端运行指令：</p>

<p>sudo /usr/lib/lightdm/lightdm-set-defaults -s XBMC</p>

<p>或者打开 lightdm.conf文件，</p>

<p>sudo gedit /etc/lightdm/lightdm.conf</p>

<p>将user-session一项设置为 user-session=XBMC即可。</p>

<p>这里如果XBMC换为unity或unity-2d，就在登录时自动进入unity。</p>

<p>我为 3.2 能直接进入xbmc环境兴奋不已，那感觉真像个DVD机。而且，由于没有启动不必要的程序，我这个 低配置的笔记本竟然播放得十分流畅，倒是3.1有时播放起来显得捉襟见肘。</p>

<p>4 登录后自动挂载windows分区</p>

<p>我的ubuntu是用wubi安装的，储存在本地的音频视频文件都放在windows的e盘分区，这个分区默认下是不挂载的，xbmc找不到这个分区。自动挂载的方法是修改fstab：</p>

<p>sudo gedit /etc/fstab</p>

<p>在这里增加挂载的分区：</p>

<p>/dev/sda6 /media/WOR ntfs none 0 0</p>

<p>如果不知道这个分区的信息，可以用下面的指令查看：</p>

<p>sudo blkid</p>

<p>至此，从开机到看见xbmc界面，一气呵成。我在3.2的启动方式下，和老婆看了一晚上天翼高清的在线肥皂剧。</p>

<p>这时候，意想不到的新问题出现了：虽然笔记本电脑的盖子是合上的，但笔记本显示器竟然一直是亮着的！照理说默认应该合上盖子就黑屏，只在外接显示器上显示，既省电，又保护笔记本显示器不因过热而烧毁。但是为什么xbmc环境下不会在合上的时候自动关闭笔记本显示器呢？</p>

<p>也许是xbmc环境的问题？于是我换用3.1的方案在unity里测试，结果发现也一样！</p>

<p>那么是xbmc软件本身的问题？只好在windows xp下试了试，这次好了，只要盖上笔记本的显示屏，就乖乖地黑了。</p>

<p>这说明是ubuntu的问题了。</p>

<p>折腾到这里，我这个linux菜鸟真累了。心想，windows xp不就是需要在登录时点一下么，要不，就回windows吧。</p>

<p>这差点就成了最终的结论。windows下一切都很傻瓜式操作，一切顺利，直到我发现，前一晚看过的肥皂剧，windows下连不上。选择天翼高清下面的剧集之后，显示&#8221;工作中&#8221;几秒钟后，不播放任何内容。</p>

<p>关闭防火墙，也不行。但是播放Youtube和TED都很顺利，只是比ubuntu下显得网速慢一点。立刻回到ubuntu下的xbmc，连天翼高清一切都正常播放。再回到windows，还是不行。</p>

<p>怪哉怪哉。无论ubuntu还是windows，怎么就差那么一点点，就是不够完美呢？难道我要看网上视频的话就进ubuntu，看本地的就进windows？</p>

<p>此时已经到了折腾第二天的深夜。是夜，德国要改用夏令时，1:59的下一分钟是3:00，活活又被偷走了一个小时。我觉得还是回到定制灵活的ubuntu想办法比较有希望，于是打算向我的一位故友求助了，他是个linux高手。这个家伙很擅长用命令行来解决问题。</p>

<p>命令行？我突然灵光一闪。</p>

<p>事情，就这样成了。</p>

<p>只要写一条关闭笔记本显示器的命令，保存成一个文件，例如命名为CloseMonitor，登录ubuntu后像自动运行xbmc一样自动运行这个文件，就可以了。命令行是这样的：</p>

<p>xrandr &#8211;output VGA1 &#8211;auto &#8211;output LVDS1 &#8211;off</p>

<p>理论可行，现实仍然有问题。笔记本的确自动关闭自己的显示器了，但是当xbmc自动打开时，笔记本显示器又随之打开了！依然是双屏闪亮！</p>

<p>是不是启动顺序的问题？如果在xbmc打开后，再关闭笔记本显示器呢？我在上面这条命令之前又加了个延时命令，新的CloseMonitor文件是这样的：</p>

<p>sleep 2s</p>

<p>xrandr &#8211;output VGA1 &#8211;auto &#8211;output LVDS1 &#8211;off</p>

<p>这次运行的结果好多了，xbmc打开了，笔记本显示器也关上了，但是，外接显示器上的分辨率出了问题。我的外接显示器最大分辨率是1920 x 1080，而笔记本显示器是1280 x 800。现在，外接显示器上用前者的分辨率显示Unity的桌面，用后者的分辨率显示xbmc，还自以为是全屏。</p>

<p>筋疲力尽的我，还是找到了解决办法。把上面的指令再改一下，最终的CloseMonitor文件是这样的：</p>

<p>sleep 2s</p>

<p>xrandr &#8211;output VGA1 &#8211;same-as LVDS1 &#8211;mode 1024 x 768 &#8211;output LVDS1 &#8211;off</p>

<p>这里&#8211;same-as LVDS1表示是笔记本显示器的镜像。如果设为&#8211;right-of LVDS1 &#8211;auto，就是把桌面扩展到外接显示器。xrandr不加参数的话可以查看显示器支持的分辨率。</p>

<p>可以钻进被窝了美美地睡一觉，梦里享受完美的xbmc家庭影院了。</p>

<p><a href="http://dapengde.com/archives/14164" target="_blank">原文链接</a></p>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="http://www.pzhao.org/archives/14152/"><span
      aria-hidden="true">&larr;</span> 兜兜讲故事</a></li>
    

    
    <li class="next"><a href="http://www.pzhao.org/archives/14166/">xbmc的ipad遥控器 <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "pzhao" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Peng Zhao &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="/js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-99744900-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    <script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    

  </body>
</html>

