<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Latex on Peng Zhao</title>
    <link>http://www.pzhao.org/zh/tags/latex/</link>
    <description>Recent content in Latex on Peng Zhao</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017 Peng Zhao</copyright>
    <lastBuildDate>Wed, 17 Jan 2018 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="http://www.pzhao.org/zh/tags/latex/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>我把青春献给你：排版 (4)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-4/</link>
      <pubDate>Wed, 17 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-4/</guid>
      <description>9
bookdown 或者说 Pandoc 的伟大之处，就是把原先必须在 LaTeX 里做的事情，99.9% 都可以用 markdown 语法完成。剩下的 0.1%，例如公式、索引、控制换行、临时改变字体字号、强制分页等操作，所涉及的 LaTeX 命令都很简单（$$, \index{}、\mbox{}、\small、\newpage），偶尔用一下无伤大雅。只需找个漂亮的编辑器，在 bookdown 下写作就有不错的体验，而生成的 pdf 文档处处透露着 LaTeX 的优雅。平时自用一下，美得不行，仿佛梅开二度，枯木逢春。我为 bookdown 量身制作了 bookdownplus，pinyin 和 mindr 几个扩展包，沉浸在美妙之中不可自拔。
但是，直到这次真正给《学 R》排版，真正要送到印刷厂印个几千本的时候，光有 bookdown 的现成模板就不够用了。《学 R》是本中文书，LaTeX 对中文的支持先天不足，很多细小的问题，得自己一个一个抠。
比如中文里夹杂的英文词的中断换行（hyphenation），总是在不该断的地方瞎断。找不到完美的解决方案，最后我手动添加了 \mbox{} 凑合。
比如段首空两格。我明明记得原先是自动空两格的，不知哪一次升级以后，这个设置就不见了。好在这个不难解决。
比如脚注和上标。bookdown 里^[]表示脚注，两个^之间表示上标。问题是两个脚注连在一起怎么办？要是写成杨过^[]和小龙女^[]，那两个^之间的文字就变成了上标。我试来试去，最简单的就是在中间偷偷摸摸塞进去个空格，把上标结构破坏掉。想来英文不存在这个问题，到处都是空格。
10
所幸，我算是挺过来了。最后排出的文档，虽然不是尽善尽美，但已经达到了我能力的天花板。想要更多也没有了。
只是年轻的时候我从没想过，将来自己会跟排版这件事纠缠。那些投进去的时间和精力，花在别处，会不会更好？无论本职工作，还是业余爱好，我都不是干排版的啊。
可是，怪就怪在，排版里这些一个一个的坑，你不去亲自填，就没人给你填。就像自己的娃，打扮成啥样，全在爹妈。自己的书，正式的出版物，难看的排版，你能忍吗？诸葛亮是怎么死的？事无巨细事必躬亲累死的。可是难道诸葛亮自己想被累死吗？
回头看看来时的路，我把青春的尾巴献给了 R，LaTeX，Linux。Linux 已然渐行渐远，LaTeX 曾经聚聚散散，只有 R 自始至终在我身边，成为了长久的陪伴。而这次，LaTeX 想甩也甩不掉了，她借着 bookdown 这匹木马，藏在了 R 的深处，彻底把我攻陷。
用 LaTex 排出的《学 R》这本书，就当是青春的纪念。</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (3)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-3/</link>
      <pubDate>Sat, 23 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-3/</guid>
      <description>7
LaTeX 做出来的文档，确实漂亮。这种漂亮不是那种一眼就能看出哪儿漂亮的漂亮，而是一种说不出来的气质。这种气质来自字体、间距、断字等等诸多细节的堆积和交互作用。只要是用过 LaTeX 的人，拿来个文档用鼻子一闻，就知道是 Word 做的还是 LaTeX 做的。就好像你遇到了你的另一半，让你神魂颠倒，可就是说不出她究竟好在哪里; 她走在人群里，你一眼就能找到她。因为你眼里没别人。
然而，这种气质不是能轻易把握的。LaTeX 最为奇特的是，你为她投入了无数的时间，却竟然说不清楚到底是因为她太好还是她太糟。如果她太好，为何这么难用？如果她太糟，为何你甘心为她付出？
之所以能用 LaTeX 写完博士论文，我想来想去，这个奇迹是以下四点一起促成的：
组里的同事提供了现成的论文模板，
身边有同事可以随时问，
老板只看结果，对我实现的手段并不介意，
论文是英文写的，不需要跟中文排版死磕。
想学 LaTeX 的注意了！以上四点，只要缺了一样，那么学 LaTeX 的阻力就会提高一个数量级。此坑慎入！
如果有了这四个条件，那么基本上就不用额外操心，只管埋头写论文就是了。
然而，LaTeX 下埋头写作的体验并不美好。那感觉根本就不是写论文，而是写代码。不编译出来，你根本不知道自己写了几页，每页是啥模样。一天下来，脑袋胀胀的，心里乱乱的。相比之下，用 Word 写论文，每敲一个字符都有一点成就感，敲完一页后，就像已经出版了一样心满意足。
LaTeX 就像个绝世美人，不时让你为她的美貌倾倒。更大的诱惑是，你心里清楚，只要你努力，就能距离她的美貌更接近一点。于是，你就身不由己地投入大把大把的精力，把你的文档弄得越来越漂亮，虽然每次只是漂亮了那么一点点。
不像 Word，你知道，无论再怎么使劲，做出来的论文顶多也就那样了，不可能更美，所以心态反而平静下来，老老实实过日子。
一个像恋爱，一个像婚姻。
8
当完成博士论文的时候，我决定结束天天心惊胆战的 LaTeX 爱情长跑，回到 Word 的温柔乡。我把城墙修高加厚，厚得就像特洛伊城，把 LaTeX 拦住墙外，从此一刀两断。曾经在同一个战壕里的战友，变成了洪水猛兽。
到了新工作单位，观察了一下，老板和同事全部是正常人，不是 X-men。我松了一口气。
有一次，有个名叫 LyX 的使者来敲我的城门。从三个字母参差不齐的模样，我一眼就识破了他的伪装，知道是 LaTeX 派来的奸细，于是我轻轻吐出一个字：滚。
我以为，从此就跟 LaTeX 形同陌路了。
有一天，我在使用 R 语言的时候，神使鬼差地装上了一个名叫 bookdown 的扩展包。
很久以后，再次回忆那一刻，仍然不由得感慨万千。命中注定的事，逃不掉的劫数。
bookdown，就是攻陷特洛伊的木马; 里面藏着的，除了我的旧爱 LaTeX，还有 Pandoc 这个魔鬼。后者从名字上一看，就知道是潘多拉放出来的。
安装 bookdown 的那一瞬间，我把木马轰隆隆地拉进了我的城，而我却浑然不知。</description>
    </item>
    
    <item>
      <title>R bookdownplus 升级手记，以及北大论文模板</title>
      <link>http://www.pzhao.org/zh/post/-bookdownplus-update/</link>
      <pubDate>Sun, 26 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/-bookdownplus-update/</guid>
      <description>bookdownplus 这个 R 语言程序包，自用起来感觉不错，当初发布的时候还小得意了一把。时过境迁，现在回头看起来是越来越不满意。CRAN 上，bookdownplus 的总下载量接近三千（与此相比，bookdown 的总下载量是七万），大约每小时就有一次下载。Google ‘bookdownplus’ 可以搜到 已经有中文用户在写使用体验了。越是这样，我越惶恐，因为我知道，这个包写得粗糙，可改进的地方数都数不过来。
向我反馈问题的用户超出了预期，主要是兼容性的问题：在 macOS上如何，在 Linux 上如何，这些问题我都没有办法回答，因为我只在 Windows 7 上测试了，其他操作系统既无精力也无条件测试。开发个软件，自用是一回事，让别人能用完全是另外一回事，这两回事之间真是相差了一个筋斗云。
所以我决定先把自己看不过去的问题解决一下，那就是代码的构架问题。
bookdownplus v.1.3 以后的版本包含了 20 个模板。写这个包的时候，因为懒，我就把所有模板的 .tex 文件混到一个文件夹里，style 和 cls 文件混在另一文件夹里，到最后自己都搞不清楚哪个模板用哪个文件了。用户每次想运行 bookdownplus() 生成一个新文档时，都把所有有用没用的文件一股脑考进来（反正也不大），连我自己都看不下去了。此外，我还指望着别人贡献一些新模板，可是目前乱糟糟的，谁愿意把好东西往垃圾堆里扔呢？
于是这两天我花了一个上午，把这些文件重新整理归类，让他们各回各家各找各妈，每个 bookdown 模板都对应一个 zip 压缩文件，扔在 bookdownplus 的安装目录里。而且，如果再开发新 bookdown 模板，只需按照现有模板 zip 文件里的结构，将所需文件压缩并甩进 bookdownplus 安装目录，就可以用 bookdownplus() 直接调用了，连升级都不用。
虽然功能上没有多大增强，但架构上舒服多了，所以我把版本号从1.3.x 升到了 1.4.0。
我还有一块心病，是北京大学学位论文的 LaTeX 模板，我迟迟没能转成 bookdown 模板。原因是这个 LaTeX 模板本身在我电脑上就编译不成功。这次不知怎么开了窍，突然被我搞定了，作为第 21 个模板，收进了 bookdownplus v.1.4.0 里。
此外，新增了一下几个模板：
益辉制作了 Chapman &amp;amp; Hall 出版社的模板，现成的，我稍微改了一下。看上去是这样的：这提醒我，直接去 bookdown.</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (2)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-2/</link>
      <pubDate>Wed, 22 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-2/</guid>
      <description>5
如果上一篇帖子让你以为我在为 \(\LaTeX\) 做广告，呵呵，那你就上当了。为啥？
因为我早就抛弃 LaTeX 了。
几年前，把用 LaTeX 排版排得漂漂亮亮的博士论文提交的那一刻，我咬牙切齿地想：老子终于可以跟 LaTeX 这个怪物永别了。
想不起来第一次是从哪里知道 LaTeX 的。好像是从 Linux 的学习里，得知 LaTeX 是科研圈常用的写作工具。作为一个混科研圈的工具控，我居然没听说过？而且身边全是搞科研的，居然没人用过？怪哉怪哉。
于是，我就去问见多识广的朋友：“你用过 LaTeX 吗？”
朋友正穿着白大褂，在中科院化学所的有机实验室忙活，一听我的问题，痛痛快快地回答：
latex 啊？用过用过，我们经常从美国买。你要做什么？要多少克？1
我愣了，赶紧说：
不急不急。你先忙，我需要的时候找你买。
这就是我初学 LaTeX 时的生态。圈里没人懂，身边没人带，全凭好奇和兴趣。作为一个寻常百姓，学起来的难度可想而知。
当时虽然已经奔三的年岁，但血气犹存;还没当爹，手头还有一点闲置光阴。于是，磕磕碰碰，我终于用 LaTeX 把工作总结做了个 beamer 幻灯片，准备在单位作报告时用。花了这么多时间，如果不好用，那还学个啥劲呢？所以，要不要继续学，在此一举。
就在这关键时刻，单位领导一句话，把我仅有的热情抛进了万丈深渊。领导说：
工作总结的 ppt 你不是说你做完了？发给我来修改。
6
LaTeX 在我这里真正派上用武之地，是来德国读博士的时候。
刚到这个研究组，我就大吃一惊：组里清一色的 Linux 操作系统，大家拿 LaTeX 写各种文档，用 R 语言处理数据。
Linux，LaTeX，R，这是耗尽我青春尾巴的三大怪物。此外还有个 vim，但是跟这仨货比起来，属于小巫见大巫。
Linux 和 R 的血泪史按下不表，今天只说 LaTeX。
当时我无奈地想，嫁鸡随鸡嫁狗随狗，就跟着这帮 X-men 一起混吧。
很快，我又大吃一惊：在这个变种人小组里，牵头的老板，居然是个正常人，用的是 Windows 系统，Word 写文档，Excel 处理数据。话说一个正常老板跟一群变种人下属之间是怎么交流的？</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (1)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-1/</link>
      <pubDate>Tue, 21 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-1/</guid>
      <description>1
2017 年快要过去了。如果剩下这四十天不出什么幺蛾子的话，我今年的最蠢事情排行榜，基本是板上钉钉。名列榜首的，就是过早给《学 R》一书大肆宣传。跟罗永浩当年头一回卖锤子手机一样一样的，还没量产，就先吹牛，结果吹破了，打了自己的脸。
其实，这本书早在今年 6 月就写完了，7 月做了最后一次修改。当时书号已经批了，封面也有了模样，我以为马上就能印出来了，于是告诉了我能告诉的每一个朋友。朋友们都很讲义气，把白花花的银子拍在桌上，就等着付钱买了。当了教授的老同学说：放心，到时候我送给我的学生人手一本！
谁知道，一晃四个多月过去了，书还没出来。我的前期宣传算是白费了。让人欣慰的是，直到现在，仍然有铁杆粉丝惦记着我，时不时发来鼓励的短信：“喂，你那书烂尾了吧？啊哈哈哈哈~~~~”
谢谢。
那么，四个月里，这书干嘛去了？
在排版。
《学 R》这本书，一直排不出理想的模样。
四个月是在反反复复修改排版里度过的。一直拖到上周，我们仍然看不到任何排版成功的迹象。2017 年所剩无几的耐心消耗殆尽，一咬牙一跺脚，我们决定壮士断腕。合作作者 Y 从出版社讨来排版文件，并且自己花钱购买了专业软件，自己排；我同时用 \(\LaTeX\) 排，齐头并进。谁先排好就用谁的。我们谁都不想再拖，再拖就真的要吐血了。
当做出这个决定的第二天，Y 看到我用 \(\LaTeX\) 做出的 pdf 书稿小样得到了印刷厂的认可，就放下了手里的专业软件，决定不干了：“\(\LaTeX\) 真厉害，有空我学一下……”
我立马拦住：“最好别去学。这个坑太大。一入 \(\LaTeX\)，坑深似海。”
2
出版社负责录入和排版的工作，简称“录排”。
这四个月来，录排可谓兢兢业业，全心全力为《学 R》排版。可惜，辛苦不一定有回报，排出的书稿，一直有层出不穷的问题。
比如说，丢失公式和特殊字符。原稿里的诸如 R2， \(\pi\) 等都莫名其妙消失了。
比如说，字体。原稿里的代码都是用等宽字体表示的，录排之后都成了跟正文一样的字体。
比如说，标点符号。原稿里的所有标点符号，包括代码里的逗号、引号、括号、冒号，都变成了中文标点符号。加上非等宽字体，书里的代码惨不忍睹。
最要命的是，原稿里的很多空格也都不翼而飞。比如录排稿：
是不是一头雾水？实际上原稿是：
每次从录排稿里挑问题，都恨不得把一双近视眼珠子抠出来，再拿着放大镜逐字逐句看。后来，索性放弃了很多想法。比如说，原先代码是彩色的，得知需要录排逐个字符手动修改，算了不要了；原先打算增加个小贴士目录，得知需要排完页码手动添加，算了不要了；原先打算给常用函数做个索引，方便读者从书里找示例，看样子也得手动做，算了不要了……
即便如此，每次的排版仍然会出现奇奇怪怪的问题。如此往返三次，《学 R》这本书我已经读得想呕吐了。
我百思不得其解：这到底是怎么回事？
3
来回折磨了四个月。终于， Y 试用了一下录排用的排版软件—— Adobe InDesign，俗称 ID，是国内出版业主流的专业排版软件。
Y 立刻对我说：“我明白问题出在哪里了！”
原来，录排是把我们提交的原稿，转成了 txt 文本文件；书里的插图，全部转成了 tif 图片。然后，把这些素材导入 ID，然后手动按照原稿 pdf 的样子做调整。
这正是录排一贯的工作流程。
这个流程，对文学类书籍没有问题。一篇小说，重要的是内容，不是格式；只要把文字分好段，就不会有大错。
然而，这个流程用在《学 R》 这本书上，就是个灾难。因为这本书，内容和格式，都很重要。</description>
    </item>
    
    <item>
      <title>LaTeX 公式转换成 Word 公式</title>
      <link>http://www.pzhao.org/zh/post/latex-equations-to-word/</link>
      <pubDate>Tue, 20 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-equations-to-word/</guid>
      <description>最近写了篇论文，投往一家学术期刊。投稿时，Word 格式和 \(\LaTeX\) 格式可以任选，我选了 Word，是因为合作作者用 Word。可是，文稿里的公式是我输入的，而那些公式在我的博士论文里是用 \(\LaTeX\) 写的。为了图省事，我就用了 Word 的插件Aurora，这样，只需把公式的 \(\LaTeX\) 代码往 Word 文档的 Aurora 域里拷贝粘贴，bingo！公式就渲染好了，比 Word 的自带公式漂亮一些。
这篇论文很顺利，很快被接收了。到了最后一步的时候，编辑部要我把文档里的公式修改成可编辑的格式。——本来就是可编辑的呀。嗯，大概是编辑部不使用Aurora，那么他们的 Word 打开我的文档里看到的公式自然就是没法编辑的了。我懒得解释，最后决定把公式全部转换成 Word 公式。
\(\LaTeX\) 公式转成 Word 公式并不难，只需三步：\(\LaTeX\) –&amp;gt; MathML –&amp;gt; 修改 –&amp;gt; Word.
\(\LaTeX\) 公式转成 MathML公式。这可以在 blogdown 里操作，只需把 \(\LaTeX\) 公式代码扔进一个帖子里，运行建站函数，在生成的网页里获取公式的 MathML 代码即可（在公式上点右键 - Show Math As - MathML Code）。
修改 MathML 代码。将上一步得到的 MathML 代码拷贝粘贴到文本编辑器，然后在开头添上一行：
&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;将修改的 MathML 代码全部选中，拷贝粘贴到 Word 里，就自动变成公式了。当然，上面第一步也可以用别的软件来完成，下图是个示例。
以后在合作里再也不用Aurora这种把 Word 和 \(\LaTeX\) 混在一起的工具了。不是不好，而是太小众。</description>
    </item>
    
    <item>
      <title>用 R bookdown 写学术论文</title>
      <link>http://www.pzhao.org/archives/19190/</link>
      <pubDate>Fri, 24 Mar 2017 09:53:23 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/19190/</guid>
      <description>1
最近，我使用 R 语言的 bookdown 扩展包接连做了三件事：先是整理出一本跟 R 语言有关的书，然后把博客的帖子整理出一本纯文本的中文书，这两天我又在用它来写一篇打算投稿的学术期刊论文。
用 bookdown 写英文的科研期刊论文，配置起来是很简单的，只需在bookdown提供的官方演示文档里做简单修改如下：
首先，index.Rmd 的文件头 yaml 部分，将 documentclass 设为 article，并关闭图表目录和文章目录即可：
documentclass: article lof: no lot: no toc: no  然后，_output.yml 文件内容全部清空，然后添加指令生成 word&amp;#95;document2 文档、 pdf&amp;#95;document2 文档和 html&amp;#95;document2 文档，参数为default即可。也就是说，&amp;#95;output.yml 文件内容只需3行：
bookdown::word_document2: default bookdown::pdf_document2: default bookdown::html_document2: default  就能生成足够美观的三种格式的文档了。
2
写论文期间发生了一件事，让我饱受刺激。
我的科研论文有个计算公式，昨天发现其中一个数值不小心敲错了。后续计算都是建立在这个计算的基础上，所以后续计算全错。虽然不影响结论，但严格来讲，论文里所有的数据都得改。
放在以前，这是让人崩溃的灾难。幸亏，这次我写论文用了 bookdown。
这篇研究论文是用 Rmd 格式写的，里面绝大部分数据不是手动敲进去的，而是调用了 R 代码，图表也是用 R 代码插入的，走的是“可重复性研究”的思路。现在，我只要把 R 代码里那个敲错的数据改过来，运行代码，后续计算就全部自动更新，而论文 Rmd 文件里调用代码的输出结果，会在导出的 pdf 或 word 文档也相应自动更新，节省了大量时间，还减少了敲数字或拷贝粘贴出错的可能，怎一个爽字了得！
在 bookdown 发布之前，其实 rmarkdown 也有这个功能，但因为公式、交叉引用、参考文献方面的欠缺， rmarkdown 对我来讲比较鸡肋，一直未能用在论文写作上。现在有了 bookdown ，可以甩开膀子使劲儿用。可以说， bookdown 把 rmarkdown 原有的价值做了更充分的挖掘。</description>
    </item>
    
    <item>
      <title>如果用bookdown来写诗集</title>
      <link>http://www.pzhao.org/archives/19150/</link>
      <pubDate>Wed, 15 Mar 2017 14:21:56 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/19150/</guid>
      <description>update-2017-07-03：bookdownplus包里附带了诗集模板，可以用bookdown制作下图这样的诗集：
今天，我用R的bookdown做出了第一本电子书：&amp;lt;爸爸三定律&amp;gt;。内容是从我博客上选的育儿相关帖。
益辉在bookdown的官方文档里讲到：
 This book is primarily about the R package bookdown, so you need to at least install R and the bookdown package. However, your book does not have to be related to the R language at all. It can use other computing languages (C++, SQL, Python, and so on; see Appendix B), and it can even be totally irrelevant to computing (e.g., you can write a novel, or a collection of poems)</description>
    </item>
    
    <item>
      <title>R bookdown 快速入门和语法速查</title>
      <link>http://www.pzhao.org/archives/19141/</link>
      <pubDate>Wed, 15 Mar 2017 07:29:47 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/19141/</guid>
      <description>快速开始
  R bookdown 是什么
   一个用来写书写文章的软件。   比Word更美观，比LaTeX更易用，比Markdown格式更丰富。   可以方便地插入目录、图表、交叉引用、脚注、索引。   可以方便地插入公式、参考文献、R代码。   可以生成漂亮的pdf、word和网页文件。   撰写可重复性报告的不二之选。     安装

&amp;lt;ol style=&amp;quot;list-style-type: decimal&amp;quot;&amp;gt; &amp;lt;li&amp;gt; &amp;lt;a href=&amp;quot;https://cran.r-project.org/bin/windows/base/&amp;quot;&amp;gt;下载R&amp;lt;/a&amp;gt;并安装。 &amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; &amp;lt;a href=&amp;quot;https://www.rstudio.com/products/rstudio/download/&amp;quot;&amp;gt;下载RStudio&amp;lt;/a&amp;gt;并安装。 &amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; &amp;lt;a href=&amp;quot;http://www.ctex.org/CTeXDownload&amp;quot;&amp;gt;下载CTEX&amp;lt;/a&amp;gt;并安装。建议安装完整版。 &amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; &amp;lt;a href=&amp;quot;http://pandoc.org/installing.html&amp;quot;&amp;gt;下载Pandoc&amp;lt;/a&amp;gt;并安装。 &amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; 运行RStudio。在左上面板的代码窗口输入并运行以下代码（安装bookdown扩展包）： &amp;lt;/li&amp;gt; &amp;lt;/ol&amp;gt; &amp;lt;pre class=&amp;quot;r&amp;quot;&amp;gt;&amp;lt;code&amp;gt;install.packages(&amp;quot;bookdown&amp;quot;)  
&amp;lt;p&amp;gt; 好了，安装完毕。 &amp;lt;/p&amp;gt;&amp;lt;/p&amp;gt;  
 从模板开始

&amp;lt;ol style=&amp;quot;list-style-type: decimal&amp;quot;&amp;gt; &amp;lt;li&amp;gt; 下载模板文档（到下载页面点击&amp;lt;code&amp;gt;Clone or download&amp;lt;/code&amp;gt; &amp;amp;#8211; &amp;lt;code&amp;gt;Download ZIP&amp;lt;/code&amp;gt;）： &amp;lt;/li&amp;gt; &amp;lt;/ol&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt; 如果你要写英文文档，那么下载&amp;lt;a href=&amp;quot;https://github.</description>
    </item>
    
    <item>
      <title>不可挡的bookdown</title>
      <link>http://www.pzhao.org/archives/19122/</link>
      <pubDate>Tue, 14 Mar 2017 14:36:57 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/19122/</guid>
      <description>最近，我打算把博客上关于R语言的帖子整理成一本书，希望弄得帅气一点，整齐一点，将来容易维护一点。涌进脑子的第一个念头是 (\LaTeX) ，第二个念头是想吐。
是的，虽然我推崇 (\LaTeX) ，觉得这个工具排出来的文档很漂亮，但自从弄完博士论文1{#fnref1.footnoteRef} 之后，除了帮别人备份一下博客2{#fnref2.footnoteRef} 、往论文里插几个公式和玩玩吉他谱3{#fnref3.footnoteRef}，我再也没碰过她。惰性开始代替折腾，我宁可点点鼠标写出一份不太美观的Word文档，也不想面对 (\LaTeX) 那让人头疼的代码。大概我是真上了岁数罢。
对于 (\LaTeX)，我想自己的内心深处是怀有恐惧的。她的美丽让我着迷，她的复杂令人生畏。
所以，这次整理博客，我决定在Word里做。用了这么多年，对Word的秉性我算是略知一二，从一开始就用主控文档和子文档的方式管理，以防单个文档太大而死机；从标题到R代码，我预先都设置好了样式以及样式的快捷键，方便调整格式；每写几句话，就左手抽筋一样ctrl+s一下，以防万一。其间，发现帖子里有些R代码要修改调试，我就咬牙忍着在RStudio和Word之间频繁拷贝粘贴的煎熬。反正换回 (\LaTeX) 也是一样想吐，既来之则安之，嫁鸡随鸡嫁狗随狗吧。
我天真地以为，这样就万无一失了。
有一天，我正在Word里改某篇帖子，改之前我留意了一下总页数是160多页。改了几个段落之后，我惊奇地发现，总页数成了220多页。再仔细找，发现有些代码区的文字无缘无故变成了乱码，一乱就新增几十页。进而测试发现，我正在好端端敲字，Word左下角的页数突然就刷刷地增加了，翻回去看，乱码已经被填进去了。试了好几次，都是这样。我甚至给文档权限设置为凭密码修订，仍然挡不住Word疯狂的脚步。
对着那自动呼呼上涨的页码，我想：认识十来年，想不到对你依然不了解。
(\LaTeX) 的倩影再度闪现在我脑海。她虽然复杂，但至少源文件是纯文本，不会胡来，不像Word这么没有底线。
为什么就没有个像Word那么界面简单，像 (\LaTeX) 那么源码单纯的两全其美方案呢？
“叮”的一声，脑子里冒出刚刚发布不久的bookdown(Xie 2016b)(Xie 2016a)。这是R语言的一个扩展包，专门用来写书，可以看作是R markdown的升级版。我的博客原文都是以markdown写成的，弄到bookdown里应当是顺理成章的事。只是大约因为上了岁数，我近几年对新工具越来越排斥，所以一直懒得尝试。这次被逼无奈，要不就试试吧。反正都是折腾，与其把精力花在让人心碎的Word里或让人心焦的 (\LaTeX) 里，还不如花在崭新的bookdown里。就算是有缺点，还能比Word和 (\LaTeX) 更不能忍么？
然后，刷！一晃十来天。春宵苦短日高起，从此君王不早朝。
这大半个月，我陶醉在bookdown的魅力里不可自拔。bookdown秉承拿来主义，把一大串工具链里的精华整合起来，让以前繁琐的步骤无比简化，怎一个爽快了得！她近乎完美地解决了我遇到的所有问题：纯文本操作，满足了我的控制欲；在导出完美的网页格式同时，还能导出为pdf和word文档，足够拿出来跟依赖Word的人交流；公式、脚注、交叉引用、目录、参考文献，功能齐全而不臃肿，格式标记简洁而优雅。我不再需要为Word的自以为是而抑郁，也不再需要为 (\LaTeX) 的纷繁复杂而烦恼了。
我用bookdown生成的书稿  一种亲切之美扑面而来，我感到无法抗拒无法阻挡。有了bookdown在手，写东西我还需要别的什么呢？想来想去，我不需要别的了。在Word和(\LaTeX) 之间摇摆了十来年，到头来才发现bookdown才是真爱。
不过，bookdown绝非完美。如果不了解rmarkdown(Allaire et al. 2016)，没见过 (\LaTeX) ，没听过pandoc，没用过knitr (Xie 2016c)(Xie 2015)(Xie 2014)，那么bookdown对新手来说，门槛仍然有点高。幸运的是，这几样工具我都用过，那么投入bookdown的怀抱就属于水到渠成了。即便如此，在使用初期仍然遇到了一些难以解决的问题，好在有bookdown的开发者益辉同学4{#fnref4.footnoteRef} 和其他同道中人热心地提供帮助，才能一路披荆斩棘，最后走上了幸福的康庄大道。
下面，我把我那些散落在各处的提问和解决方法汇总在这里。
 编译   起初我连bookdown的界面都没搞清楚，想编译却不知该点哪儿。益辉一直说build，build，我一直以为是菜单栏的build，后来才看到是在RStudio右上面板的build按钮。
bookdown是可以直接导出为word文档的。这么重要的功能，却隐藏得很深，在官方文档里都没有强调。导出方法是，在_output.yml里添加一行：
bookdown::word_document2: default  注意，default这个词是不能少的，不管它是不是默认。我也不知道为什么。
导出的word文档相当令人满意，参考文献的版式、图表的交叉引用都堪称完美。唯一不足之处，是公式的编号和交叉引用。bookdown的官方文档5{#fnref5.footnoteRef}给出的公式书写方案是，利用 (\LaTeX) 的公式环境来编号和引用，这一点在生成pdf时没问题，但生成word时，会发现别说编号，连公式本身都消失了。这大概是因为pandoc未能将公式环境正确转换的缘故。解决办法是，不使用公式环境，而使用行内公式（即公式前后有一个美元符号），公式前面用圆括号里加公式标签就可以了。例如，输入：
(@eq-mc) $E = mc^2$ I like Eq.</description>
    </item>
    
    <item>
      <title>人生无处不相逢</title>
      <link>http://www.pzhao.org/archives/18994/</link>
      <pubDate>Fri, 06 Jan 2017 01:41:55 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/18994/</guid>
      <description>北京 黄昏时分，我离开北大环境大楼。楼新路生，好在有D，一路曲折引我到地铁站。
D和我虽初次见面，却如同故人。不过，“一见如故”用在这里却似乎并不贴切。路上，D说起如何从我的博客学到R语言和LaTeX，又如何在工作中使用。D甚至记得我博客里写过的句子，我倍感惊讶，因为这些句子连我自己都忘却了。我们还顺便讨论了用WordPress建立科研小组网站的可能性。
大言不惭地说，D是我的一位粉丝。
四年前，当我在博客上百无聊赖地发布“R菜鸟入门”时，绝没有料到，四年后的今天，北大有一位新入职的老师，会因为这些帖子而当面向我表达谢意。用“受宠若惊”不足以表达我的感受。不仅如此，我们是不约而同地去另一位老师的办公室的，无论我或他早到十分钟还是晚来十分钟，我们就会错过这次邂逅。这样戏剧性的巧遇，简直不可思议。
在地铁站，我们挥手作别。我不由得想起一句电影台词：
 世间所有的相遇，都是久别重逢。
 深圳 一听说要去深圳出差，我就想起了深圳的两个人，其中一个就是L。我们是在独立博客圈结识的。当年我在德国，L在法国，学的都属于生态学的范畴，自然多了几分亲近。后来，L给一首外语歌曲填上了中文歌词，我为他配上了吉他谱和自弹自唱的视频，颇有伯牙子期之乐。我们甚至打算合写两篇学术论文，草稿都有了，最后却因为种种原因没有完成。
两个文艺青（中）年能不能一起搞学术呢？
这次深圳之行，一定是要当面问问的。
可惜天意弄人，我们最终没有在深圳见面，见面的地点却是东莞；也没有讨论写论文的事情，见面之后L很快就醉倒了。
这全是因为我见了另一个人。
东莞 独立博客圈的人，只要来广东，就必须要拜拜码头，一睹老大风采。
来之前，我对YY哥说：初次见面，找个星巴克喝个咖啡聊聊天就好，如果能赐墨宝便再好不过。
有句话是怎么说的？
 当我走向你的时候 我原想收获一缕春风 你却给了我整个春天
 YY哥：不如来虎门吧。
我：“虎门硝烟”的虎门？
YY哥：是的。
东莞虎门，YY哥大设酒宴，并邀请当地社会名流与我们共进晚餐。我和L的见面也被YY哥一手包办了。
席间推杯换盏，畅谈人生。别人问我：你跟YY哥认识多久了？我答道：神交已久，初次谋面。
私下我说：YY你搞的排场太大了。
YY哥不以为然。后来我才知道，酒宴只是计划的一部分。

酒后，我们K歌到凌晨三点，然后留宿酒店。次日，YY哥专程开车送我去深圳朋友处，临别前赠我亲笔书法作品与当地特产，还有一套《浮生六记》。
这套书陪我从深圳一路回河南。书作者是一位清朝人，内容是生活琐记，读罢我大笑不止。这不就是二百年前的人写的博客嘛。YY哥与我通过博客结识，送的这个礼物大有深意。

古书记载，有一位士绅生性豪爽，常仗义疏财，喜结交名士，曾致信给一位读书人说：“先生好游乎？此处有十里桃花。先生好饮乎？此处有万家酒店。”读书人闻讯而至。士绅每日以美酒相待，别时送名马官锦，并设宴饯行，拍手踏脚而歌。读书人作诗一首，曰：
 李白乘舟将欲行，忽闻岸上踏歌声。
大鹏湾水深千尺，不及勺子送我情。
 
原文链接</description>
    </item>
    
    <item>
      <title>LaTeX制作吉他谱</title>
      <link>http://www.pzhao.org/archives/18230/</link>
      <pubDate>Tue, 15 Dec 2015 09:11:42 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/18230/</guid>
      <description>搜索了一下用LaTeX制作吉他谱的网页，发现几乎没有中文的，我来写一个吧。
作为免费的专业排版软件，LaTeX的特长是数学公式的排版和参考文献的管理。如果配合上各种扩展包，就可以做出更多意想不到的事情，比如说输入吉他和弦谱。
插图：LaTeX制作的吉他和弦谱示例
这个吉他谱的扩展包是一位名叫Kasper Peeters的仁兄十几年前开发的。我几年前就被这个扩展包迷住了，有相逢恨晚的感觉。用这个扩展包制作吉他谱，制作的过程灵巧便捷，制作的结果赏心悦目。
这个扩展包的使用示例可以直接去ctan的gchords页面下载。只需把 chord­box.tcl，gchords.sty 和 get2­knowu.tex 三个文件下载保存在同一文件夹里，对 get2­knowu.tex 用LaTeX编译，就会生成一首示例英文歌曲的和弦谱。
可惜的是，原版的示例文件并不支持中文字符的排版；要想录入中文歌曲的吉他谱，需要做一些修改。这个我已经做好了：
1、 把原来的一个tex文件分成了两个，这样每次有新歌输入的话，不用更改主文档Compileme.tex，只需在子文档Example.tex里照例子输入新歌，然后编译Compileme.tex就行了。
2.、在两个文档里增加了中文支持：
\XeTeXinputencoding &amp;quot;GB18030&amp;quot; % 设置中文解码。每个子文档的开头都必须设置。 \usepackage{xltxtra} % 支持\XeTeX。 \usepackage{fontspec} % 支持中文破折号（把--转成m dash）。 \setmainfont{Microsoft YaHei} % 更改默认字体。cmd下用&amp;quot;fc-list :lang=zh&amp;quot;查已有的中文字体  3、为了省事，新增了个cmd文件，编译的时候直接双击这个文件就行了。
对于新手来说，要做的事情就是：点击下载我的示例文件，解压缩，然后双击Compileme.bat就可以看结果了。
给新的歌曲制作和弦谱，只需预先把需要的和弦指法定义一下，然后在歌曲里对应位置插入这个指法的名称， 就可以了。比如，A和弦是这么定义的：
\newcommand{\A}{\chord{t}{x,n,p2,p2,p2,n}{A}}  其中，{\A}是指法名称，\chord{t}表示指法图从吉他指板顶端开始，{x,n,p2,p2,p2,n}表示第6弦不要碰（x），第5弦和第1弦为空弦（n），其他三根弦按住第2品（p2）。 {A}表示和弦图显示的名称。示例中给出了很多常用和弦的定义。如果需要添加新的，那么照猫画虎就行了。歌曲里调用和弦的时候是这样的：
 我祈求\upchord{\C }星辰　月儿来\upchord{\Dm}作证  这样，就给“星”和“作”上分别加入了C和弦和Dm和弦指法图。
当然，前提是电脑里已经安装好了CTeX。
原文链接</description>
    </item>
    
    <item>
      <title>精品网络应用：LaTeX 篇（LaTeX初学者指南）</title>
      <link>http://www.pzhao.org/archives/17695/</link>
      <pubDate>Thu, 30 Oct 2014 14:17:18 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/17695/</guid>
      <description>LaTeX是什么？不知道的，本文带你花几分钟尝尝LaTeX的味道；是新手的，本文提供一个进阶学习指南；是老手的，本文提供几个日常的辅助工具。作为网络应用，不用安装任何软件，只要在一个浏览器里就实现了。
为了理解方便，可以把LaTeX当作Microsoft Word的替代品，是个写文章用的软件。我写博士论文用的是LaTeX，找工作的简历用的是LaTeX，甚至吉他谱都是用LaTeX记录的。关于到底是LaTeX好还是Word好，网上的讨论已经很多了，这不是本文的话题。在处理数学公式、美化版面、文献引用以及处理长文档方面，LaTeX的优势很明显。这样一款强大专业的排版软件，竟然是完全免费的，真是不可思议。所谓“尺有所短，寸有所长”，发挥他们各自的优势为我服务才是正道。
LaTeX 公式编辑器 我平时都是利用在线的LaTeX 公式编辑器把公式写好改好，再贴到我本地的LaTeX文档里。这个在线编辑器的好处有两个：一是工具栏很丰富，再也不必把一些符号代码记到脑子里；二是即时编译，你输入什么就立刻显示出编译后的公式。生成的公式可以导出图片，也能轻松插入博客里。
插图：LaTeX在线公式编辑器
试着把下面的代码贴到在线编辑器的输入窗口：
E=mc^2  LaTeX把它翻译成：，变量自动转换为斜体。
试着把下面的代码贴到在线编辑器的输入窗口：
\int H(x,x&#39;)\psi(x&#39;)dx&#39; = -\frac{\hbar^2}{2m}\frac{d^2}{dx^2}\psi(x)+V(x)\psi(x)  这是著名的薛定谔方程：LaTeX写的公式除了美观和专业外，我最强烈的体会是修改起来方便。比如想把通篇文章里包括公式在内的&amp;#8217;CO2&amp;#8217;里的&amp;#8217;2&amp;#8217;改成下标，只需要简单地搜索&amp;#8217;CO2&amp;#8216;替换成&amp;#8217;CO$_2$&amp;#8216;就行了，以LaTeX初学者的水平就能轻松完成。我用office用了十几年，都不知道怎么在word里完成这个操作。
LaTeX远远不止是个公式编辑器。如果说LaTeX是个美女，那么上面展示的只是她的眼睛。下面我们来看看她的面容。
LaTeX 编译器 LaTeX的工作逻辑跟word完全不同。任何一本LaTeX教材都会给出实例让你体会这种不同，而这款在线的LaTeX编译器则是非常直观地实现了这一点。从示例的下拉菜单里随便选一个，然后点击Load按钮，示例的代码就出现在了输入窗口。再点击Start LaTeX，编译就开始了，结果展示在输出窗口。
插图：LaTeX 编译器
利用这个在线编译器，不必本地安装，就可以开始学习LaTeX了。请试着从示例的列表中选择一个公式，然后替换成你刚才在LaTeX在线公式编辑器输入的公式，并编译体会一下。
LaTeX表格编辑器 LaTeX可以生成非常复杂的表格，但写起来却让人头疼。幸好，我们有下面两款在线表格编辑器。都很好用，选个自己喜欢的玩玩好了：
 LaTeX表格编辑器1 LaTeX表格编辑器2  这两款网络应用的界面是类似的：上半部分填好你要的表格，可以设置字体和边框等；下半部分生成对应的LaTeX代码。请随便填个表格，将生成的代码拷贝，然后粘贴到上文说的LaTeX 编译器的任意一个示例代码中，粘贴位置选在\begin{document}这一行的后面即可。编译体会一下。
此外，除了转换LaTeX表格外，这两款网络应用还可以转换html、markdown等表格，非常值得收藏。
谷歌LaTeX实验室 最后，我们来到一个完整的LaTeX环境里，看看LaTeX的身材，这就是Google LaTeX实验室。
插图：Google LaTeX实验室
LaTeX实验室是谷歌云端硬盘(google drive)的内置默认编辑器，第一次使用的时候要授权用google账号访问，然后就进入了主界面。默认情况下，会出现一个示例文档。建议这时点击窗口下面的Split按钮，切换到左右分栏的显示界面。左边输入LaTeX文档后，点击工具栏的编译按钮（红色圆点），就可以在右边的输出窗口看结果了。这个网络应用基本可以满足日常使用。
好了，如果到这里，你仍然对LaTeX感兴趣，那么可以考虑本地安装。其实LaTeX发展到现在，安装配置起来基本是个傻瓜操作：到CTeX下载安装包，一路点“下一步”就行了。另外，建议安装TeXStudio，窗口跟谷歌LaTeX实验室类似；以后用LaTeX工作就在TeXStudio里，非常方便。
原文链接</description>
    </item>
    
    <item>
      <title>诡异的打印</title>
      <link>http://www.pzhao.org/archives/17095/</link>
      <pubDate>Sun, 30 Mar 2014 21:22:03 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/17095/</guid>
      <description>最近博客疏于打理，因为有件事情忙得我焦头烂额。我觉得我遇到了灵异现象，或者说是超自然现象。不然最近遇到的事情没法解释。
下面，我试图用通俗的语言描述一下这个诡异的事件。
引子 历尽艰辛，过关斩将，我奋力突破重重障碍，终于把足球带到了禁区。盯准球门，屏住呼吸，临门一脚！
射偏了。
射门射偏很正常，但这次却有点古怪。按照球的射出轨迹和旋转程度来预计，是正的。但是球的实际轨迹，却像是被一阵狂风吹到了界外。
这是个室内场馆，空调也没开，根本没风！
对方门将扑了个空，站起来，眼神里也露出纳闷儿。他捡起球，扔给我，示意再射一次。裁判表示同意。
那我就不客气了。容不得多想，我飞起一脚，球杀气腾腾直奔球门，到门前时突然来个了90度转弯，像航模直升飞机一样竖直往上方飞去！
裁判们窃窃私语，商量一会儿，主裁判宣布暂停比赛。他找来一把水果刀，把球切开来检查。裁判们怀疑足球被动了手脚，也许真地被遥控了。
然而结果让他们失望。他们什么也没找到。
换了个球，依然让我再射。怀着强烈的困惑，我暗暗吸一口气，射门！
守门员麻木地看着我，一动没动。全场鸦雀无声。我低头一看，大脑一片空白。
球刚离开我的脚只有两米远，却没有继续前进，而是像在空气中遇到了一堵无形的墙而反弹回来，按原路返回到了我的脚下！
我一屁股坐在了地上，对射时的快感完全失去了兴趣。
请原谅，上面这个射门场景是我杜撰的，并未真实发生。如果把读博士这几年比作一场球赛，那么最终打印和提交博士论文就好比射门。在打印论文的过程中，我遇到了难以解释的怪事。说起来太抽象，涉及太多技术问题，读来怕是让人生厌，但诡异程度跟上面我编出来的踢球事件不相上下。
下面我就用让人生厌的冗长文字，记录下我打印论文遇到的怪事。这是写给自己的，供将来参考。
怪事第一 万里迢迢，我从东土来西欧取经，原本美好的愿望是把博士花三年读完，最长四年，可是，现实更糟糕，如今已经到了第五个年头。其中历经九九八十一难，足够再写一本新西游记，择日再谈，本文不详述。终于，上周，教授同意我去打印装订提交了。最近这一年来我一直盼着这一天，可以想象此时我的心情是多么迫切。打印的事儿再简单不过：带着pdf文件去学校打印室交给工作人员，告诉他们打印装订6份，第二天去取就行了，费用自掏腰包。这是惯例，几乎所有学生都是这么做的。于是，我计划3月27日周四下午送去文件，28日周五上午取，然后连同其他材料一起交到学院办公室，这事儿就算是在今年3月了了。
简单不过，简单不过，越简单越不过。事后我老婆说，这事儿可以写一篇题为《中年Peng的奇幻打印》的小说。
根据经验，很多错误非得打印到纸上才能发现，所以为了保险起见，我周四赶早到打印室，要求他们先打印个小样出来，我确认无误后再继续打印另外五份。周四午饭前，我拿到了小样，翻到正文第一页就发现，引用的参考文献在年代和每个右括号之间都多了个空格。
我教授对引用文献有洁癖，这种格式错误肯定会挨骂。错误的原因，我第一个想到的是bibtex出了问题。
这篇论文是在 windows xp sp3 英文版下用 LaTeX 写成的，写作环境用的是TeXStudio 2.5.2，编译用的是pdfLaTeX，参考文献的排版用的是bibtex。我试着在bibtex所用到的bst里找问题，未遂。但是我发现了别的问题：除了参考文献的冗余空格外，目录里各章节的页码没有靠右对齐；正文里很多行的文字排到了外侧边缘上；有些数字变量名称跟正文文字重叠。差不多每页都有问题，这些问题的共同点是：对不齐。
奇怪的是，在电脑上查看pdf，我用了Adobe Reager，Adobe Acrobat和SumatraPdf三款软件去看，都完全是好的，没有任何对齐问题（怪事第一）。那么，难道是打印机的问题？
我用自己办公室的打印机打印了两页，完全没问题！可惜我教授不允许用办公室的打印机打学位论文。我不想在这个节骨眼儿上去犯教授的忌。
那么是学校打印室的打印机问题？
此时的我还预料不到后面有多少麻烦事儿。由于还找到了其他的诸如拼写和标点等错误，我决定纠正之后，第二天再去打印室重印。
怪事第二 28日，周五。一大早，我赶赴打印室。学校打印室的工作人员有三个：一个只说德语的老头儿，和两个会说英语的年轻人。其中一个年轻人，一看就是那种搞技术的理工男，接待了我。他说，他再打印一份试试，但是由于打印任务太多，我需要等一小时再来。
一小时后，我拿到了新的小样，迫不及待地翻到那些页面，松了口气：对齐问题都解决了。我很高兴，理工男也很高兴，说这下今天可以交论文了。正打算继续打印，我说等等！
我发现了新问题！有些页面里出现了奇怪的局部空白。有的空大半页，有的隔三差五空一些字符。空白部分原本有的文字都不见了！这样的页面我随便一翻就找到了四五页。这个问题在第一个小样里是没有出现的。跟第一个小样比，这个更糟糕。（怪事第二）
理工男表示费解，去电脑上看，跟我电脑上看到的一样，完美无瑕，没有任何对齐问题和空白问题。他说再打印一份，让我一小时再来。
再来，还是一样。
理工男满脸歉意，用医生的口气说：
 很遗憾，我们已经尽力了。我们打印过成千上万的论文，这种情况还是第一次遇到。我们不知道为什么会这样，也不知道该怎么解决。您找别处试试吧。
 我只能离开了。离开时，我带走了所有印错的页面。这时已经到了周五中午，提交论文的办公室下班了。我最早只能下周一，也就是3月31日才能提交。回去我把这事儿告诉了同样在熬论文的德国同事J，他是个LaTeX高手，但也解决不了我的问题。事实上，我们没法判断这事儿跟LaTeX有没有关系。照理说，pdf应该是很稳定的格式啊。J为此事开始焦虑，说不知道他交论文的时候会遇上什么事儿。
3月一定交论文！我决心去朋友实验室的打印机上试试。
怪事第三到第八 朋友说没问题，周末趁没人的时候打，实验室有两台打印机，一彩一黑白，都好用。29日，周六，他在电脑上打开我的pdf文件，选择彩打，双面打印。打印机提示，需要手动换面。
朋友疑惑了，说：
 奇怪，前两天还能自动换面，怎么现在要手动？我一直用这一台，都没有问题。今天是怎么回事？怪了怪了。（怪事第三）
 手动换面本来就很容易弄混页码。这台彩打的手动换面说明也是德语的，看不懂。我来别人实验室偷偷打印，本来就心虚，还是算了吧。那另外一台呢？
另外一台连接不上。打印任务死活发送不出去。朋友反复嘟囔说：
 平时一直是好的，一直是。（怪事第四）
 我说：两台打印机都不正常，是不是你的电脑有问题？
他说：嗯，那换一台电脑。我用远程桌面，从另一台电脑上打印试试。那台电脑在另一个房间，周末锁了进不去。
远程桌面一连上，朋友突然惊呼：
 这不是我那台电脑！桌面全变了！
 桌面的确全变了，但的确是朋友那台电脑，因为原来的文档都在，只是有些软件没了，打印机驱动也没了。朋友说：
 这怎么回事儿，我昨天刚远程连过……（怪事第五）
 是不是打印机没有连在网络上呢？我们去检查打印机，没发现网络问题，却发现打印机上有usb接口。我插上优盘，发现可以直接打印。</description>
    </item>
    
    <item>
      <title>那些被墙的博客们</title>
      <link>http://www.pzhao.org/archives/14990/</link>
      <pubDate>Mon, 08 Apr 2013 19:28:05 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/14990/</guid>
      <description>前两天，土木坛子的博客不幸被墙了。话说此时坛子正在好心地为他墙内的母校募捐。坛子就像地下d员被捕就义前一样大义凛然地说：生命不息，博客不止。悲壮之情令壮士扼腕。数日前我曾在坛子的博客留言说：莫谈国是，谈者伤神，还是一心读圣贤书罢。现在回头去看，也许我那时便有隐约的预感。后来坛子发了几篇敏感题材的帖子，读后觉得尺度不算过分，哪知道，这么快就被有关部分采取行动了。
叫我说什么好呢？被墙，这大概是每个希望得到一点自由的博客都会经历的正常待遇。关于被墙，我想说的，在 2011 年所写的一篇当我的博客又被大陆屏蔽时里已经都说了，没有重复的必要。坛子那样坚持有态度的博客（语出勺子），令人敬佩。而我则是从几年前的惊讶到后来的愤慨，然后冷静直至今天的淡漠。对墙的看法，简单来说一句话：防民之口，甚于防川；水能载舟，亦能覆舟。墙，请好自为之吧。
喜欢的博客被墙，遇到的不是第一次了。不过这次我倒是想多做一件事情。凡是被墙的博客，必有可读之处。因此，我打算在征得博主的同意后，把优秀的博客文章做成离线版，让他们就像旧日里那些手抄本的禁书一样在墙内流传，看看是否可行。今天用 LaTeX 做完了坛子的博客，手生，竟然花了几个小时，好在dapeng越战越勇。相信做几次之后，就会驾轻就熟。欢迎网友给我留言，告诉我被墙的优秀博客地址。
试想几百年后，我们的子孙后代会如何评价这段历史呢？
博客离线阅读：
 2013-04-08 制作被墙的土木坛子的博客：pdf A4版（含插图），pdf Kindle 6寸版（含插图），txt 版（无插图） 2013-04-09 获得被墙的可能吧博主的许可，计划制作可能吧的文字版，pdf A4插图版和kindle 6寸插图版。 2013-04-09 制作没有被墙的勺子的博客：pdf A4版（含插图无目录）  PS： 2013-04-13 更新：今天在精品博客见到一本好书教人翻墙，100 种方法，吓我一跳。此书应当加强传播，下载地址1，地址2，地址3，地址4。墙内下载不了的请给 dapeng 留言。
原文链接</description>
    </item>
    
    <item>
      <title>解开PPT情结</title>
      <link>http://www.pzhao.org/archives/14154/</link>
      <pubDate>Thu, 19 Jan 2012 08:02:55 +0000</pubDate>
      
      <guid>http://www.pzhao.org/archives/14154/</guid>
      <description>[摘要] 推荐替代Powerpoint的软件：Openoffice，WPS，永中Office，LATEX，Prezi。
　上周在课题组的研讨会上做了个口头报告。咖啡时间，组里的博士后美国人克里斯跟我闲聊。克里斯问：“你做报告的时候用的是什么软件？好像不是Powerpoint吧？”
　我说我用的是prezi。
　他接着问：“为什么不用Powerpoint呢？要知道，大家都在用，学生们在用，教授们也在用。看到偶尔有人不用，我就很想知道为什么，想知道是不是自己也要学这些新东西。Powerpoint做演示不是已经足够好了吗？”
　克里斯说得没错，我管它叫做“Powerpoint情结”。
1. Powerpoint
　是的，从十几年起开始，我们刚刚接触计算机的时候，Powerpoint就是最常使用的明星软件之一。它简直就是口头报告的默认配置。我们说：“明天就要答辩了，你的Powerpoint准备好了吗？考给我一份吧。”这里Powerpoint既指答辩报告本身，也指演示用的文稿。不管是不是正版，那时的我们每个人都在用powerpoint 97，你发给我一个ppt文档，我一样能打开，演示效果跟在你那里看得一样好。微软的产品做得非常不错，我们很满意。
　微软却不满意。没过多久Powerpoint 2000出现了，然后是2003，2007，2010……
　朋友精心设计的贺卡是个ppt文件，我收到后打开一看，文字和图片的位置怎么不对啊，质疑朋友的审美眼光和制作水准。作学术报告的时候，我把ppt考到公用计算机上，等演示的时候发现，公式里面的符号怎么都成了乱码？被质疑学术上的严谨态度。后来知道，是MS Office版本间的兼容问题。不光Powerpoint，Word也是。
　当你发给我一个pptx的时候，你是要求我必须升级我的Powerpoint吗？但是我不想因为要向你看齐而花钱，你说怎么办。你是在诱导我使用盗版软件么？
　或许我们也许可以避免这个问题。比如，交流时只交换演示文稿的pdf文件。这样，我就可以解开Powerpoint情结。Powerpoint之外，尽是自由天地。
2.永中Office
　最优秀的取代微软Office三件套的免费软件，当属永中Office。这个软件当年算得上同类软件的翘楚，界面跟微软三件套毫无二致，并且和微软的格式兼容得极好，常用功能毫不逊色甚至多有突破，比如把三个软件整合到一起，比如具备pdf导出功能，最重要的是，免费！而且同时具有linux版本。永中office 2007是当时linux下最棒的中文办公套件。不久又推出了2009免费版，也不错。
　可惜，这个软件后来就下落不明了。听说是公司经营不善导致了债务问题。如今登录永中官网，免费版已经找不到了，只有专业版和试用版。我感觉，永中Office如今已是荣光不再了。
3.WPS
　跟永中Office比较相近的，是WPS。说起WPS的前世今生，每个支持国货的中国人都会扼腕长叹，这里不谈了。如今的WPS亦步亦趋地跟随微软Office的脚步，用户的使用体验几乎完全相同，如果不是免费，我还真分辨不出到底是微软的产品还是金山的。Windows下的普通用户完全可以抛弃微软的office，远离不得不升级购买或非法盗版的噩梦。
　对我来说，WPS的最大缺点是，第一是没有英文界面，影响我和国外同事的交流，这一点不如微软;第二是没有linux版本，这一点不如永中;第三是版本太多，个人版，企业版，抢鲜版，新春版，华而不实。
　若要弥补这些缺憾，只有openoffice了。
4. Openoffice
　正如上面说的，Openoffice的优点很明显，免费，多语言界面，多平台支持，该有的功能基本都有了。这些优点得益于两个字：开源。当然，也有缺点，那就是对微软office虽然支持，但是不够好。另外，界面看上去比较简陋。如果你觉得这点缺点跟盗版比起来不算什么的话，那不妨试试。用惯了我发现我喜欢上了Openoffice，很多时候比微软的Office更好用。同一个家族的LibreOffice也一样好用。
　哪里好用呢？
　举个例子。拷贝粘贴时，软件默认会把文字连同格式一起粘进来，速度慢，后续工作麻烦。因此，办公软件都包含了“选择性粘贴”的按钮，允许仅粘贴纯文本。微软Office需要点击工具栏-编辑-选择性粘贴才行，Openoffice只需要点击Alt+shift+v就可以了。微软不是不能做到，但是需要用户自己设定一下才行。个人感觉，Openoffice的快捷键比微软丰富灵活。
　再举个例子。有时候需要将ppt里某张图片导出来。新版的我不清楚，但是老版本的微软office需要先把ppt另存成html文件，然后在生成的文件夹里方能找到这张图片。或者把整页幻灯片另存成图片格式，再后续处理才行。Openoffice就简单多了，因为文件本身就是个封装好的文件夹。windows下可以用total commander打开，ubuntu下可以用归档管理器打开，看到的就是个文件夹，从里面找到图片就可以了。
　第三个例子比较小众，无关ppt，是关于excel的，但是可以从中看到有趣的现象。用excel打开csv数据文件的时候，会自动转换格式，比如2012-1-19会自动认为是日期的年-月-日格式。问题在于，中国人习惯年-月-日的顺序，美国人习惯的是月-日-年，德国人习惯日-月-年。Openoffiece对此有充分的估计，导入时给用户选择来确认，而微软……显然没有考虑德国习惯。这个失误曾让我在数据处理时出现过重大错误，不堪回首。
　Openoffice是我接触的第一个免费的办公软件，当时某个bbs上管它叫OOO（OpenOffice.Org），还专门成立了个蛋蛋版。那时纠结的是文献管理软件Endnote跟微软office结合得很好，但不支持Openoffice。现在，有免费的zotero，全面取代收费的Endnote并全面支持Openoffice。我还有什么理由继续使用昂贵的、闭源的、笨重的微软office呢？
5. LATEX
　在众多取代Powerpoint的软件里，LATEX无疑是最为另类的。因为，它是一个排版软件，不是个文稿演示软件。
　LATEX免费，强悍，就是上手比较难，这得怪微软。习惯了微软图形界面的我们，每每接触一些涉及“指令”的软件就觉得头大。我想如果我刚刚接触电脑的时候就从linux、LATEX、vim、R开始，那么我的生活会是另外一个模样。而如今，LATEX我始终学不会，自然在这里不便多讲。但是，当我第一次看到用LATEX制作的pdf格式的幻灯片动画效果时，我的确震惊了。pdf可以带动画效果！这完全是另一个世界。
　对我来讲，它就是有点难。
6. Prezi
　有一次参加一个学术报告，一位学者演示用的是个flash文件，动画做得绚烂多姿。我不知道他是怎么做到的，如果用Macromedia Flash来做，一定很花时间。
　其实，从Powerpoint到永中到WPS到Openoffice到LATEX幻灯片，生成的演示文稿其实都是一个模样，我们觉得做报告演示就是这个样子，一页一页讲，一页一页切换。不知不觉，我们的思维被困在了Powerpoint的笼子里再也没有新意。而flash动画显然具有更大的自由度，能动的不光是页内元素和页间过度，你可以放大某个细节，可以旋转某个角度，可以做一切你想做的动画效果。当时我就盼着，有个这样的免费工具就好了。
　最近这样的工具终于被我找到了，它就是prezi。</description>
    </item>
    
  </channel>
</rss>