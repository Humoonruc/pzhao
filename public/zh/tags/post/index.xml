<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Post on Peng Zhao</title>
    <link>http://www.pzhao.org/zh/tags/post/index.xml</link>
    <description>Recent content in Post on Peng Zhao</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017 Peng Zhao</copyright>
    <atom:link href="/zh/tags/post/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Windows 的又一个坑：R writeLines() 函数的换行符</title>
      <link>http://www.pzhao.org/zh/post/r-writelines-line-break/</link>
      <pubDate>Thu, 18 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/r-writelines-line-break/</guid>
      <description>&lt;p&gt;昨天，又被 Windows 坑到了。&lt;/p&gt;
&lt;p&gt;事情的背景是，我的工作环境是 Windows 操作系统。由于一些众所周知的原因，有些事情在 Linux 下做起来比较顺当。于是，我就用 virtualbox 装了个虚拟的 Ubuntu。由于不熟，只用到其中很小一部分功能，所以，凡是能在 Windows 下做的事情，我绝不去 Ubuntu。&lt;/p&gt;
&lt;p&gt;昨天，我要写一批 bash 指令，打算在 Ubuntu 里运行。这批指令格式相同，只是内容略有不同。于是，我就动了点小心思，用 R 语言批量写好了 bash 指令的内容，最后用 &lt;code&gt;writeLines()&lt;/code&gt; 函数生成了这批 .sh 文件。&lt;/p&gt;
&lt;p&gt;前面我提到了，这些操作都是在 windows 下完成了。保险起见，我特地指定了 &lt;code&gt;writeLines(useBytes = TRUE)&lt;/code&gt;，来保证这批 .sh 文件的编码 UTF-8，心想这下应该没问题了吧。&lt;/p&gt;
&lt;p&gt;但是，在 Ubuntu 里执行 这批 .sh 文件，居然出错！说什么文件找不到……&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17_153445.jpg&#34; alt=&#34;img&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;img&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;上面显示的这个 test.sh 文件，是我测试用的。我从这批运行失败的 .sh 文件里面随便拎出一个，里面删得只剩两条指令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ~
ls&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;就这，居然还有错？&lt;/p&gt;
&lt;p&gt;我记得在 Ubuntu 下直接写的 .sh 文件没这个问题啊。&lt;/p&gt;
&lt;p&gt;那好，我就在 ubuntu 的文本编辑器里写了一个一模一样的文件，取名 test2.sh，内容也是只有这两条指令。然后运行，居然好了！&lt;/p&gt;
&lt;p&gt;肉眼去看，两个文件都完全相同！我对比了一下两个文件的编码，都是 UTF-8。&lt;/p&gt;
&lt;p&gt;这是遇见孙悟空和六耳猕猴了？&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17_153646.jpg&#34; alt=&#34;img&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;img&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;我拿出两面照妖镜：一个是 Totalcommander 的文本比较工具，一个是 notepad++ 的文本比较插件。比较的结果是，两个文件完全相同！&lt;/p&gt;
&lt;p&gt;大惑不解。&lt;/p&gt;
&lt;p&gt;使出浑身解数，都没有进展。万般无奈之下，想起这批 .sh 文件是用 R 的 &lt;code&gt;writeLines()&lt;/code&gt;函数写的，那就去看看这个函数的帮助文件吧。&lt;/p&gt;
&lt;p&gt;这一看，不打紧，竟发现一条惊人的线索。&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17-001.jpg&#34; alt=&#34;img&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;img&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Linux 的换行分隔符是&lt;code&gt;LF&lt;/code&gt;， Windows 是 &lt;code&gt;CRLF&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;好像是有这么个印象。于是，我在 notepad++ 里打开了“显示所有符号”。&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17_153657.jpg&#34; alt=&#34;img&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;img&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;真相大白！&lt;/p&gt;
&lt;p&gt;原来，因为我用 windows 下 R 语言的 &lt;code&gt;writeLines()&lt;/code&gt;函数写的 .sh 文件，里面的换行符号是 &lt;code&gt;CRLF&lt;/code&gt;，在 Linux 里执行时不认可，所以出现了错误。&lt;/p&gt;
&lt;p&gt;F1 才是识别六耳猕猴的如来佛祖！&lt;/p&gt;
&lt;p&gt;解决办法：同样的 R 代码，在 Linux 运行就可以了，生成的 .sh 文件没有任何问题。&lt;/p&gt;
&lt;p&gt;谨以此文，纪念又一次被 windows 坑了一下。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>一封 CRAN 的来信</title>
      <link>http://www.pzhao.org/zh/post/a-mail-from-cran/</link>
      <pubDate>Wed, 17 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/a-mail-from-cran/</guid>
      <description></description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (4)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-4/</link>
      <pubDate>Wed, 17 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-4/</guid>
      <description>&lt;p&gt;9&lt;/p&gt;
&lt;p&gt;bookdown 或者说 Pandoc 的伟大之处，就是把原先必须在 LaTeX 里做的事情，99.9% 都可以用 markdown 语法完成。剩下的 0.1%，例如公式、索引、控制换行、临时改变字体字号、强制分页等操作，所涉及的 LaTeX 命令都很简单（&lt;code&gt;$$&lt;/code&gt;, &lt;code&gt;\index{}&lt;/code&gt;、&lt;code&gt;\mbox{}&lt;/code&gt;、&lt;code&gt;\small&lt;/code&gt;、&lt;code&gt;\newpage&lt;/code&gt;），偶尔用一下无伤大雅。只需找个漂亮的编辑器，在 bookdown 下写作就有不错的体验，而生成的 pdf 文档处处透露着 LaTeX 的优雅。平时自用一下，美得不行，仿佛梅开二度，枯木逢春。我为 bookdown 量身制作了 bookdownplus，pinyin 和 mindr 几个扩展包，沉浸在美妙之中不可自拔。&lt;/p&gt;
&lt;p&gt;但是，直到这次真正给《学 R》排版，真正要送到印刷厂印个几千本的时候，光有 bookdown 的现成模板就不够用了。《学 R》是本中文书，LaTeX 对中文的支持先天不足，很多细小的问题，得自己一个一个抠。&lt;/p&gt;
&lt;p&gt;比如中文里夹杂的英文词的中断换行（hyphenation），总是在不该断的地方瞎断。找不到完美的解决方案，最后我手动添加了 &lt;code&gt;\mbox{}&lt;/code&gt; 凑合。&lt;/p&gt;
&lt;p&gt;比如段首空两格。我明明记得原先是自动空两格的，不知哪一次升级以后，这个设置就不见了。好在这个不难解决。&lt;/p&gt;
&lt;p&gt;比如脚注和上标。bookdown 里&lt;code&gt;^[]&lt;/code&gt;表示脚注，两个&lt;code&gt;^&lt;/code&gt;之间表示上标。问题是两个脚注连在一起怎么办？要是写成&lt;code&gt;杨过^[]和小龙女^[]&lt;/code&gt;，那两个&lt;code&gt;^&lt;/code&gt;之间的文字就变成了上标。我试来试去，最简单的就是在中间偷偷摸摸塞进去个空格，把上标结构破坏掉。想来英文不存在这个问题，到处都是空格。&lt;/p&gt;
&lt;p&gt;10&lt;/p&gt;
&lt;p&gt;所幸，我算是挺过来了。最后排出的文档，虽然不是尽善尽美，但已经达到了我能力的天花板。想要更多也没有了。&lt;/p&gt;
&lt;p&gt;只是年轻的时候我从没想过，将来自己会跟排版这件事纠缠。那些投进去的时间和精力，花在别处，会不会更好？无论本职工作，还是业余爱好，我都不是干排版的啊。&lt;/p&gt;
&lt;p&gt;可是，怪就怪在，排版里这些一个一个的坑，你不去亲自填，就没人给你填。就像自己的娃，打扮成啥样，全在爹妈。自己的书，正式的出版物，难看的排版，你能忍吗？诸葛亮是怎么死的？事无巨细事必躬亲累死的。可是难道诸葛亮自己想被累死吗？&lt;/p&gt;
&lt;p&gt;回头看看来时的路，我把青春的尾巴献给了 R，LaTeX，Linux。Linux 已然渐行渐远，LaTeX 曾经聚聚散散，只有 R 自始至终在我身边，成为了长久的陪伴。而这次，LaTeX 想甩也甩不掉了，她借着 bookdown 这匹木马，藏在了 R 的深处，彻底把我攻陷。&lt;/p&gt;
&lt;p&gt;用 LaTex 排出的《学 R》这本书，就当是青春的纪念。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (3)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-3/</link>
      <pubDate>Sat, 23 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-3/</guid>
      <description>&lt;p&gt;7&lt;/p&gt;
&lt;p&gt;LaTeX 做出来的文档，确实漂亮。这种漂亮不是那种一眼就能看出哪儿漂亮的漂亮，而是一种说不出来的气质。这种气质来自字体、间距、断字等等诸多细节的堆积和交互作用。只要是用过 LaTeX 的人，拿来个文档用鼻子一闻，就知道是 Word 做的还是 LaTeX 做的。就好像你遇到了你的另一半，让你神魂颠倒，可就是说不出她究竟好在哪里; 她走在人群里，你一眼就能找到她。因为你眼里没别人。&lt;/p&gt;
&lt;p&gt;然而，这种气质不是能轻易把握的。LaTeX 最为奇特的是，你为她投入了无数的时间，却竟然说不清楚到底是因为她太好还是她太糟。如果她太好，为何这么难用？如果她太糟，为何你甘心为她付出？&lt;/p&gt;
&lt;p&gt;之所以能用 LaTeX 写完博士论文，我想来想去，这个奇迹是以下四点一起促成的：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;组里的同事提供了现成的论文模板，&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;身边有同事可以随时问，&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;老板只看结果，对我实现的手段并不介意，&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;论文是英文写的，不需要跟中文排版死磕。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;想学 LaTeX 的注意了！以上四点，只要缺了一样，那么学 LaTeX 的阻力就会提高一个数量级。此坑慎入！&lt;/p&gt;
&lt;p&gt;如果有了这四个条件，那么基本上就不用额外操心，只管埋头写论文就是了。&lt;/p&gt;
&lt;p&gt;然而，LaTeX 下埋头写作的体验并不美好。那感觉根本就不是写论文，而是写代码。不编译出来，你根本不知道自己写了几页，每页是啥模样。一天下来，脑袋胀胀的，心里乱乱的。相比之下，用 Word 写论文，每敲一个字符都有一点成就感，敲完一页后，就像已经出版了一样心满意足。&lt;/p&gt;
&lt;p&gt;LaTeX 就像个绝世美人，不时让你为她的美貌倾倒。更大的诱惑是，你心里清楚，只要你努力，就能距离她的美貌更接近一点。于是，你就身不由己地投入大把大把的精力，把你的文档弄得越来越漂亮，虽然每次只是漂亮了那么一点点。&lt;/p&gt;
&lt;p&gt;不像 Word，你知道，无论再怎么使劲，做出来的论文顶多也就那样了，不可能更美，所以心态反而平静下来，老老实实过日子。&lt;/p&gt;
&lt;p&gt;一个像恋爱，一个像婚姻。&lt;/p&gt;
&lt;p&gt;8&lt;/p&gt;
&lt;p&gt;当完成博士论文的时候，我决定结束天天心惊胆战的 LaTeX 爱情长跑，回到 Word 的温柔乡。我把城墙修高加厚，厚得就像特洛伊城，把 LaTeX 拦住墙外，从此一刀两断。曾经在同一个战壕里的战友，变成了洪水猛兽。&lt;/p&gt;
&lt;p&gt;到了新工作单位，观察了一下，老板和同事全部是正常人，不是 X-men。我松了一口气。&lt;/p&gt;
&lt;p&gt;有一次，有个名叫 LyX 的使者来敲我的城门。从三个字母参差不齐的模样，我一眼就识破了他的伪装，知道是 LaTeX 派来的奸细，于是我轻轻吐出一个字：滚。&lt;/p&gt;
&lt;p&gt;我以为，从此就跟 LaTeX 形同陌路了。&lt;/p&gt;
&lt;p&gt;有一天，我在使用 R 语言的时候，神使鬼差地装上了一个名叫 bookdown 的扩展包。&lt;/p&gt;
&lt;p&gt;很久以后，再次回忆那一刻，仍然不由得感慨万千。命中注定的事，逃不掉的劫数。&lt;/p&gt;
&lt;p&gt;bookdown，就是攻陷特洛伊的木马; 里面藏着的，除了我的旧爱 LaTeX，还有 Pandoc 这个魔鬼。后者从名字上一看，就知道是潘多拉放出来的。&lt;/p&gt;
&lt;p&gt;安装 bookdown 的那一瞬间，我把木马轰隆隆地拉进了我的城，而我却浑然不知。&lt;/p&gt;
&lt;p&gt;特洛伊，就此沦陷。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>有那么几回，我也想跳楼：写给我的中年朋友们</title>
      <link>http://www.pzhao.org/zh/post/midlife-pressure/</link>
      <pubDate>Wed, 20 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/midlife-pressure/</guid>
      <description>&lt;p&gt;1&lt;/p&gt;
&lt;p&gt;中兴员工跳楼，让人唏嘘叹惋。有人说是因为行业衰落，有人抱怨程序员压力太大。在我看来，这些纯属借题发挥。在不了解现场详细过程的情况下，人们怎么就那么确定是这些原因呢？当事人年岁已过不惑，阅历丰富，儿女双全，有两套房，与其说是因为经济压力而突然跳楼，我还不如相信这是一个意外，比如死者以跳楼来威胁对方答应条件时不慎坠落，或者是受抑郁症驱使而一时失控等等——当事人已经不在了，真相谁会知道呢？&lt;/p&gt;
&lt;p&gt;不过，死者遭遇的中年危机是事实。同样是中年人，同样是失业在即，同样是家有俩娃要还房贷，既然说起这个话题，我也借题发挥，谈谈我对自杀一事的看法。为死者讳，事后去妄加揣度这个中年人的工作、家庭和心理状态是极为不妥的，因此我下面所写的，都跟这个悲剧的当事人没有任何关系，只是由这个事件引发而已。因为，回顾自己这半辈子，有那么几回，我也想跳楼。&lt;/p&gt;
&lt;p&gt;2&lt;/p&gt;
&lt;p&gt;一路走来，回头去看，你有没有动过轻生的念头，哪怕只有一点点？&lt;/p&gt;
&lt;p&gt;当年刚离开故乡，只身远赴千里之外的大学校园，没过多久，我就不想活了。&lt;/p&gt;
&lt;p&gt;从上小学起，我的学习成绩傲视群雄，在五线小城里独孤求败；到了京城的大学一看，高手如云，上课一个字都听不懂，考试及格是奇迹，顿时学霸成学渣。&lt;/p&gt;
&lt;p&gt;现在回头去看，这点破事儿算什么。完全是因为一路顺风顺水，不懂什么叫挫折，一时心里落差太大而造成的不适而已。但是回到当时，如果有点什么小事刺激一下，鬼使神差爬上楼顶……这种事时不时在校园里发生，只不过跳的不是我；我躲过此劫的原因之一，就是跟着同样沦为学渣的兄弟们混。你渣，自有人更渣，他们都不跳楼，你跳什么？&lt;/p&gt;
&lt;p&gt;咬牙念完大学，混迹于滚滚红尘的江湖里，我觉得活着没啥奔头了。&lt;/p&gt;
&lt;p&gt;江湖好混乱，人性太复杂。有人可以不劳而获坐享其成，有人却是累死累活还得背黑锅；微薄的薪水捉襟见肘地养着房贷和日渐成长的娃，往未来去看，看不到光明。&lt;/p&gt;
&lt;p&gt;好在那时心境已经比读书时宽了许多，知道跟人攀比是没有尽头的。要是真攀比，谁活得长谁赢。于是，开始接受那些能接受的，改变那些能改变的。既不能接受又不能改变，那就选择躲开。&lt;/p&gt;
&lt;p&gt;后来出国读书，熬博士论文期间，觉得生不如死。&lt;/p&gt;
&lt;p&gt;在那个阶段里，天天过得暗无天日，真心觉得挺不下去了，还不如把这个学位放弃一死了之。&lt;/p&gt;
&lt;p&gt;几年后的一天，已经距离博士毕业两年有余，遇见当年一起读博的韩国哥们儿，他抱着我想哭，后来一边喝酒一边谈笑。他花了 8 年，在我毕业之后一年多才干完。回忆当年一起在野外做观测的点点滴滴，觉得日子过得厚重。&lt;/p&gt;
&lt;p&gt;跟中年人所承受的压力相比，回望这些经历，无非是青少年时期学业和事业里的小菜一碟，属于无病呻吟，为赋新词强说愁。那么，等到老年，回望中年的经历，会不会也觉得淡如云烟呢？&lt;/p&gt;
&lt;p&gt;前提是得活到老年那一天。&lt;/p&gt;
&lt;p&gt;3&lt;/p&gt;
&lt;p&gt;有个老同学在朋友圈里分享了一篇文章，标题是“你失踪了，会惊动谁”。我留言说：会惊动房东和银行。我每个月得交房租，得还国内的房贷。&lt;/p&gt;
&lt;p&gt;二十多岁，两手空空，拿累了就放下；三十来岁，左手拿累了就交给右手；四十多岁，双手都拎着东西，累了只能左右换一下。&lt;/p&gt;
&lt;p&gt;中年人面对的考验，更多，更凶险。&lt;/p&gt;
&lt;p&gt;我看到关于跳楼事件的一些言论，都是归罪于行业衰落和个人经济压力。如果是这样，那就给自杀找来了合理性，只怕将来会让更多人走上轻生的不归路。生活的压力不是什么新鲜事。如果不是衔着金汤匙出生，那么草根生活原本不就是这么累吗？&lt;/p&gt;
&lt;p&gt;科幻小说《三体》里，外星文明即将对人类实施灭绝计划之前，对人类这样说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;生存本来就是一种幸运，过去的地球上是如此，现在这个冷酷的宇宙中也到处如此。但不知从什么时候起，人类有了一种幻觉，认为生存成了唾手可得的东西，这就是你们失败的根本原因。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;从什么时候起，我们开始有了这种幻觉，觉得生存是件唾手可得的东西，而忘记生存本身的艰难呢？&lt;/p&gt;
&lt;p&gt;记得以前同事里有个大姐，比我大十来岁，有一次听我抱怨，就说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;你们这些年轻人，不知足，年纪轻轻就自己租房买房了。我们这一代人，结婚了也一直跟父母一起住一辈子，哪里有条件去租房买房，想都别想。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;没错。想想父辈，经历的是百废待兴；想想祖辈，经历的是战乱浩劫；而曾祖辈，还生活在积弱难返的晚清呢。他们哪一代人活得不比我们难？可是他们子又生孙，孙又生子，一代一代都挺过来了，我们凭什么不能？&lt;/p&gt;
&lt;p&gt;小时候看过一部电视剧，剧名剧情全忘了，只记得一句歌词：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;要生存，先把泪擦干；走过去，前面是个天。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;4&lt;/p&gt;
&lt;p&gt;那个中年人走了，如果真是自杀，那是他自己的事。但是，最让人揪心的，是他留下的一双小儿女，由谁来养大成人？两对老父母，谁来养老送终？&lt;/p&gt;
&lt;p&gt;中年人的命，不只属于一个人。&lt;/p&gt;
&lt;p&gt;再苦再难，只要留得青山在，就不愁没柴烧。不管遭遇何种困境，看得远一点，穿越到未来，回头一看，全部都是过眼云烟。&lt;/p&gt;
&lt;p&gt;就让我把本文献给我的朋友们吧，他们大多数上有老、下有小、中间还要还房贷。这里，用电影《乱世佳人》里女主角 Scarlett 的一句台词，作为本文的结尾，与朋友们共勉：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;As God is my witness, as God is my witness they’re not going to lick me. I’m going to live through this and when it’s all over, I’ll never be hungry again. No, nor any of my folk. If I have to lie, steal, cheat or kill. As God is my witness, I’ll never be hungry again.&lt;/p&gt;
&lt;p&gt;上帝作证，上帝作证，他们休想打垮我。我会度过难关。当一切结束后，我再也不要挨饿。不要，我的家人也不要。即使让我去撒谎，去偷，去骗，去杀人，上帝作证 ，我永远不会再挨饿。&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>逻辑娃 III</title>
      <link>http://www.pzhao.org/zh/post/logical-kid-3/</link>
      <pubDate>Sun, 03 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/logical-kid-3/</guid>
      <description>&lt;p&gt;最近，逻辑娃的逻辑出了点毛病。&lt;/p&gt;

&lt;p&gt;德生得到一个新玩具，说明书上说适合两人以上玩。&lt;/p&gt;

&lt;p&gt;我：去跟哥哥玩吧。&lt;/p&gt;

&lt;p&gt;德生：这是给小小孩玩的。&lt;/p&gt;

&lt;p&gt;我：给几岁小小孩玩？&lt;/p&gt;

&lt;p&gt;德生：给四岁小小孩玩。不给十岁小孩玩。（看看奶奶）也不给六十多岁的玩。但是给三十多岁的玩。&lt;/p&gt;

&lt;p&gt;这是什么逻辑！&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;在以前的幼儿园，德生能说会道，据说呜哩哇啦从早到晚说一天。&lt;/p&gt;

&lt;p&gt;换到新幼儿园没几天，老师就问我：德生会不会说德语？&lt;/p&gt;

&lt;p&gt;我说：会呀。&lt;/p&gt;

&lt;p&gt;老师说：德生在幼儿园一句话都不说。&lt;/p&gt;

&lt;p&gt;私下里我就问：今天在幼儿园你跟老师说话了吗？&lt;/p&gt;

&lt;p&gt;德生：没说话。&lt;/p&gt;

&lt;p&gt;我：为什么不说话？&lt;/p&gt;

&lt;p&gt;德生：中文要在家里说，德语要在以前的幼儿园说。新幼儿园，我不说。&lt;/p&gt;

&lt;p&gt;这是什么逻辑！&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;家里汽车年检没过，大修的话，花的钱还不如买个新的。于是，我们讨论换车的事儿，主要讨论价格和性能。两个孩子在旁边插嘴讨论颜色。&lt;/p&gt;

&lt;p&gt;德生：我喜欢白色的车。&lt;/p&gt;

&lt;p&gt;我：为什么？&lt;/p&gt;

&lt;p&gt;德生：因为外面下雪了。白色的车不怕雪。&lt;/p&gt;

&lt;p&gt;这是什么逻辑！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>R bookdownplus 升级手记，以及北大论文模板</title>
      <link>http://www.pzhao.org/zh/post/-bookdownplus-update/</link>
      <pubDate>Sun, 26 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/-bookdownplus-update/</guid>
      <description>&lt;p&gt;bookdownplus 这个 R 语言程序包，自用起来感觉不错，当初发布的时候还小得意了一把。时过境迁，现在回头看起来是越来越不满意。CRAN 上，bookdownplus 的总下载量接近三千（与此相比，bookdown 的总下载量是七万），大约每小时就有一次下载。Google ‘bookdownplus’ 可以搜到 已经有中文用户在写使用体验了。越是这样，我越惶恐，因为我知道，这个包写得粗糙，可改进的地方数都数不过来。&lt;/p&gt;
&lt;p&gt;向我反馈问题的用户超出了预期，主要是兼容性的问题：在 macOS上如何，在 Linux 上如何，这些问题我都没有办法回答，因为我只在 Windows 7 上测试了，其他操作系统既无精力也无条件测试。开发个软件，自用是一回事，让别人能用完全是另外一回事，这两回事之间真是相差了一个筋斗云。&lt;/p&gt;
&lt;p&gt;所以我决定先把自己看不过去的问题解决一下，那就是代码的构架问题。&lt;/p&gt;
&lt;p&gt;bookdownplus v.1.3 以后的版本包含了 20 个模板。写这个包的时候，因为懒，我就把所有模板的 .tex 文件混到一个文件夹里，style 和 cls 文件混在另一文件夹里，到最后自己都搞不清楚哪个模板用哪个文件了。用户每次想运行 &lt;code&gt;bookdownplus()&lt;/code&gt; 生成一个新文档时，都把所有有用没用的文件一股脑考进来（反正也不大），连我自己都看不下去了。此外，我还指望着别人贡献一些新模板，可是目前乱糟糟的，谁愿意把好东西往垃圾堆里扔呢？&lt;/p&gt;
&lt;p&gt;于是这两天我花了一个上午，把这些文件重新整理归类，让他们各回各家各找各妈，每个 bookdown 模板都对应一个 zip 压缩文件，扔在 bookdownplus 的安装目录里。而且，如果再开发新 bookdown 模板，只需按照现有模板 zip 文件里的结构，将所需文件压缩并甩进 bookdownplus 安装目录，就可以用 &lt;code&gt;bookdownplus()&lt;/code&gt; 直接调用了，连升级都不用。&lt;/p&gt;
&lt;p&gt;虽然功能上没有多大增强，但架构上舒服多了，所以我把版本号从1.3.x 升到了 1.4.0。&lt;/p&gt;
&lt;p&gt;我还有一块心病，是北京大学学位论文的 &lt;a href=&#34;https://github.com/CasperVector/pkuthss&#34;&gt;LaTeX 模板&lt;/a&gt;，我迟迟没能转成 bookdown 模板。原因是这个 LaTeX 模板本身在我电脑上就编译不成功。这次不知怎么开了窍，突然被我搞定了，作为第 21 个模板，收进了 bookdownplus v.1.4.0 里。&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_thesis_pku.jpg&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;此外，新增了一下几个模板：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;益辉制作了 &lt;a href=&#34;https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fyihui%2Fbookdown-crc%3A5wtgG3vpge_i9bq1JupLLfeTiOI&amp;amp;cuid=5083260&#34;&gt;Chapman &amp;amp; Hall 出版社的模板&lt;/a&gt;，现成的，我稍微改了一下。看上去是这样的：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_yihui_crc.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;这提醒我，直接去 bookdown.org 找现成的嘛！于是找到了Eduardo García Portugués 写的 &lt;a href=&#34;https://bookdown.org/egarpor/nonpar-eafit/&#34;&gt;A short course on nonparametric curve estimation&lt;/a&gt;，是在 yihui_demo 模板基础上增加了一个自定义环境。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_nonpar.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;以前搜集过一个很有趣的 LaTeX 模板叫 dnd，这次虽然没有完全改为 bookdown 模板，但是我仍然收进来了，作为开发版，以后慢慢想办法吧。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_dnd_dev.jpg&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;bookdownplus v.1.4.0 已经在 GitHub 发布，安装和使用方法是在 R 语言环境下运行：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/bookdownplus&amp;quot;)
require(bookdownplus)
bd()&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>全面迁站：从 Wordpress 到 Hugo</title>
      <link>http://www.pzhao.org/zh/post/migrated-to-hugo/</link>
      <pubDate>Sat, 25 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/migrated-to-hugo/</guid>
      <description>&lt;p&gt;从今天起，我的旧博客 dapengde.com 停止更新。旧博客的全部帖子已经搬到了 &lt;a href=&#34;http://www.pzhao.org&#34; target=&#34;_blank&#34;&gt;pzhao.org&lt;/a&gt;，欢迎收藏（ctrl + d）和&lt;a href=&#34;http://www.pzhao.org/zh/index.xml&#34; target=&#34;_blank&#34;&gt;订阅&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;半年多以前，我用 R 语言的 blogdown 包搭建了新网站，与旧博客并存至今。&lt;a href=&#34;http://www.pzhao.org/archives/19323/&#34; target=&#34;_blank&#34;&gt;当时我就说&lt;/a&gt;，我要等着益辉同学把blogdown 的使用说明书“迁站”一章写好，就照步骤把旧博客内容全搬过去。前些日子，&lt;a href=&#34;https://bookdown.org/yihui/blogdown&#34; target=&#34;_blank&#34;&gt;blogdown 书&lt;/a&gt;终于出版了，从 wordpress 搬到 hugo 的迁站方法写得很详细。迁站的时机成熟了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://media.defense.gov/2012/Mar/19/2000168920/670/394/0/120319-F-JZ014-905.JPG&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;然而，迁站的过程并不是很顺利。我照着书里推荐的步骤，试图用 &lt;a href=&#34;https://github.com/yihui/travis-exitwp&#34; target=&#34;_blank&#34;&gt;travis-exitwp&lt;/a&gt; 将 wordpress 导出的 xml 文件转换成 Hugo 的markdown 文件。前面都还好，到了最后一步（第8步），我始终得不到右下角的绿色对勾，自然也得不到文件的下载链接。起初我以为是 xml 文件太大的缘故（10 M，五百多篇帖子），于是试着只导出少量帖子来生成 xml，从头操作，但是一觉睡醒还没得到下载链接。&lt;/p&gt;

&lt;p&gt;于是改变策略，我给 wordpress 博客安装了插件 &lt;a href=&#34;https://github.com/SchumacherFM/wordpress-to-hugo-exporter&#34; target=&#34;_blank&#34;&gt;wordpress-to-hugo-exporter&lt;/a&gt;，直接将帖子导出为 Hugo 的markdown 格式。除了文件名里的中文乱码外，我相当满意。于是将文件批量重命名，只保留日期。文件内容可以用益辉写的 &lt;a href=&#34;https://github.com/yihui/oldblog_xml/blob/master/convert.R&#34; target=&#34;_blank&#34;&gt;convert.R 代码&lt;/a&gt;来清理。&lt;/p&gt;

&lt;p&gt;不过，对我来说仍然不够，看来还得自己动手，才能丰衣足食。因为我用的是 hugo-academic 主题，网页上会显示每篇帖子的摘要，需要每篇帖子的 yaml 里设置一个 “summary” 条目。这个好办，用 R 语言把每篇帖子的第一段摘出来当作 summary 插进去就行了（R 代码附后）。&lt;/p&gt;

&lt;p&gt;此外，我还想在每篇帖子末尾增添一个“原文链接”，链到旧博客，万一哪篇帖子格式没转好呢？这也好吧，markdown 的 yaml 里有个 url 条目，稍微改一下插到文末就行了（R 代码附后）。&lt;/p&gt;

&lt;p&gt;这就是 hugo 静态网站的好处。有 R 语言在手，以后我就可以对这些 markdown 格式的帖子为所欲为了。而且，GitHub、简书、 steemit、Stackoverflow、统计之都等诸多网站都原生支持 markdown， 发的帖子只需稍微整理，就能发到博客上，颇有万佛朝宗的盛况。&lt;/p&gt;

&lt;p&gt;Hugo-academic 主题我很满意，唯一不足的是缺个归档页面，一目了然展示全部帖子清单。看来得以后自己动手做一个。&lt;/p&gt;

&lt;p&gt;旧博客 dapengde.com 虽然不更新了，但会仍然放在那里，发挥余热。前些天，还有朋友&lt;a href=&#34;http://dapengde.com/archives/14752#comment-153909&#34; target=&#34;_blank&#34;&gt;来我四年前写的帖子后面留言&lt;/a&gt;呢。&lt;/p&gt;

&lt;p&gt;增加 summary 和原文链接的代码：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;for (i in dir(&#39;postold&#39;)){
  txt &amp;lt;- readLines(paste0(&#39;postold/&#39;, i), encoding = &#39;UTF-8&#39;)
  summ &amp;lt;- txt[grep(&#39;---&#39;, txt)[2]+1]
  summ &amp;lt;- gsub(&#39;&amp;quot;&#39;, &#39;&#39;, summ)
  newline &amp;lt;- paste0(&#39;summary: &amp;quot;&#39;, summ, &#39;&amp;quot;&#39;)
  linkzh &amp;lt;- &#39;原文链接&#39;
  newline2 &amp;lt;- paste0(&#39;\n[&#39;, linkzh, &#39;](http://dapengde.com&#39;, substring(txt[grep(&#39;url&#39;, txt)[1]], 6), &#39;)\n&#39;)
  txtnew &amp;lt;- c(txt[1:3], newline,  txt[4:length(txt)], newline2)
  writeLines(txtnew, paste0(&#39;postnew/&#39;, i), useBytes = TRUE)
}
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (2)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-2/</link>
      <pubDate>Wed, 22 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-2/</guid>
      <description>&lt;p&gt;5&lt;/p&gt;
&lt;p&gt;如果上一篇帖子让你以为我在为 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 做广告，呵呵，那你就上当了。为啥？&lt;/p&gt;
&lt;p&gt;因为我早就抛弃 LaTeX 了。&lt;/p&gt;
&lt;p&gt;几年前，把用 LaTeX 排版排得漂漂亮亮的博士论文提交的那一刻，我咬牙切齿地想：老子终于可以跟 LaTeX 这个怪物永别了。&lt;/p&gt;
&lt;p&gt;想不起来第一次是从哪里知道 LaTeX 的。好像是从 Linux 的学习里，得知 LaTeX 是科研圈常用的写作工具。作为一个混科研圈的工具控，我居然没听说过？而且身边全是搞科研的，居然没人用过？怪哉怪哉。&lt;/p&gt;
&lt;p&gt;于是，我就去问见多识广的朋友：“你用过 LaTeX 吗？”&lt;/p&gt;
&lt;p&gt;朋友正穿着白大褂，在中科院化学所的有机实验室忙活，一听我的问题，痛痛快快地回答：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;latex 啊？用过用过，我们经常从美国买。你要做什么？要多少克？&lt;a href=&#34;#fn1&#34; class=&#34;footnoteRef&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我愣了，赶紧说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;不急不急。你先忙，我需要的时候找你买。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这就是我初学 LaTeX 时的生态。圈里没人懂，身边没人带，全凭好奇和兴趣。作为一个寻常百姓，学起来的难度可想而知。&lt;/p&gt;
&lt;p&gt;当时虽然已经奔三的年岁，但血气犹存;还没当爹，手头还有一点闲置光阴。于是，磕磕碰碰，我终于用 LaTeX 把工作总结做了个 beamer 幻灯片，准备在单位作报告时用。花了这么多时间，如果不好用，那还学个啥劲呢？所以，要不要继续学，在此一举。&lt;/p&gt;
&lt;p&gt;就在这关键时刻，单位领导一句话，把我仅有的热情抛进了万丈深渊。领导说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;工作总结的 ppt 你不是说你做完了？发给我来修改。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;6&lt;/p&gt;
&lt;p&gt;LaTeX 在我这里真正派上用武之地，是来德国读博士的时候。&lt;/p&gt;
&lt;p&gt;刚到这个研究组，我就大吃一惊：组里清一色的 Linux 操作系统，大家拿 LaTeX 写各种文档，用 R 语言处理数据。&lt;/p&gt;
&lt;p&gt;Linux，LaTeX，R，这是耗尽我青春尾巴的三大怪物。此外还有个 vim，但是跟这仨货比起来，属于小巫见大巫。&lt;/p&gt;
&lt;p&gt;Linux 和 R 的血泪史按下不表，今天只说 LaTeX。&lt;/p&gt;
&lt;p&gt;当时我无奈地想，嫁鸡随鸡嫁狗随狗，就跟着这帮 X-men 一起混吧。&lt;/p&gt;
&lt;p&gt;很快，我又大吃一惊：在这个变种人小组里，牵头的老板，居然是个正常人，用的是 Windows 系统，Word 写文档，Excel 处理数据。话说一个正常老板跟一群变种人下属之间是怎么交流的？&lt;/p&gt;
&lt;p&gt;没过多久，我就找到了答案：老板从来不直接修改文字。他总是把意见用批注添加到 X-men 发来的 pdf 上，让 X-men 自己去改。&lt;/p&gt;
&lt;p&gt;于是，在同事的诱骗和老板的纵容下，我踏上了 LaTeX 的邪路。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dcmnyjhirotcw.cloudfront.net/cdn/scdn/images/uploads/economy-powder-free-latex-gloves_56693.jpg&#34; /&gt; 图解：Latex 材质的手套，要不要来一双？&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;latex 是一种微粒聚合物混合的乳剂，成分包括蛋白质、生物碱、淀粉、糖类、植物油、单宁酸、树脂、树胶等等，详见&lt;a href=&#34;https://en.wikipedia.org/wiki/Latex&#34;&gt;维基百科&lt;/a&gt; 。&lt;a href=&#34;#fnref1&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (1)</title>
      <link>http://www.pzhao.org/zh/post/latex-and-me-1/</link>
      <pubDate>Tue, 21 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-and-me-1/</guid>
      <description>&lt;p&gt;1&lt;/p&gt;
&lt;p&gt;2017 年快要过去了。如果剩下这四十天不出什么幺蛾子的话，我今年的最蠢事情排行榜，基本是板上钉钉。名列榜首的，就是过早给《学 R》一书大肆宣传。跟罗永浩当年头一回卖锤子手机一样一样的，还没量产，就先吹牛，结果吹破了，打了自己的脸。&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://5b0988e595225.cdn.sohucs.com/images/20170715/d6a28e43a55b48128265e4029fb4e6c2.gif&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;其实，这本书早在今年 6 月就写完了，7 月做了最后一次修改。当时书号已经批了，封面也有了模样，我以为马上就能印出来了，于是告诉了我能告诉的每一个朋友。朋友们都很讲义气，把白花花的银子拍在桌上，就等着付钱买了。当了教授的老同学说：放心，到时候我送给我的学生人手一本！&lt;/p&gt;
&lt;p&gt;谁知道，一晃四个多月过去了，书还没出来。我的前期宣传算是白费了。让人欣慰的是，直到现在，仍然有铁杆粉丝惦记着我，时不时发来鼓励的短信：“喂，你那书烂尾了吧？啊哈哈哈哈~~~~”&lt;/p&gt;
&lt;p&gt;谢谢。&lt;/p&gt;
&lt;p&gt;那么，四个月里，这书干嘛去了？&lt;/p&gt;
&lt;p&gt;在排版。&lt;/p&gt;
&lt;p&gt;《学 R》这本书，一直排不出理想的模样。&lt;/p&gt;
&lt;p&gt;四个月是在反反复复修改排版里度过的。一直拖到上周，我们仍然看不到任何排版成功的迹象。2017 年所剩无几的耐心消耗殆尽，一咬牙一跺脚，我们决定壮士断腕。合作作者 Y 从出版社讨来排版文件，并且自己花钱购买了专业软件，自己排；我同时用 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 排，齐头并进。谁先排好就用谁的。我们谁都不想再拖，再拖就真的要吐血了。&lt;/p&gt;
&lt;p&gt;当做出这个决定的第二天，Y 看到我用 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 做出的 pdf 书稿小样得到了印刷厂的认可，就放下了手里的专业软件，决定不干了：“&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 真厉害，有空我学一下……”&lt;/p&gt;
&lt;p&gt;我立马拦住：“最好别去学。这个坑太大。一入 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;，坑深似海。”&lt;/p&gt;
&lt;p&gt;2&lt;/p&gt;
&lt;p&gt;出版社负责录入和排版的工作，简称“录排”。&lt;/p&gt;
&lt;p&gt;这四个月来，录排可谓兢兢业业，全心全力为《学 R》排版。可惜，辛苦不一定有回报，排出的书稿，一直有层出不穷的问题。&lt;/p&gt;
&lt;p&gt;比如说，丢失公式和特殊字符。原稿里的诸如 &lt;em&gt;R&lt;/em&gt;&lt;sup&gt;2&lt;/sup&gt;， &lt;span class=&#34;math inline&#34;&gt;\(\pi\)&lt;/span&gt; 等都莫名其妙消失了。&lt;/p&gt;
&lt;p&gt;比如说，字体。原稿里的代码都是用等宽字体表示的，录排之后都成了跟正文一样的字体。&lt;/p&gt;
&lt;p&gt;比如说，标点符号。原稿里的所有标点符号，包括代码里的逗号、引号、括号、冒号，都变成了中文标点符号。加上非等宽字体，书里的代码惨不忍睹。&lt;/p&gt;
&lt;p&gt;最要命的是，原稿里的很多空格也都不翼而飞。比如录排稿：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://www.pzhao.org/img/xuer1.jpg&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;是不是一头雾水？实际上原稿是：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://www.pzhao.org/img/xuer2.jpg&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;每次从录排稿里挑问题，都恨不得把一双近视眼珠子抠出来，再拿着放大镜逐字逐句看。后来，索性放弃了很多想法。比如说，原先代码是彩色的，得知需要录排逐个字符手动修改，算了不要了；原先打算增加个小贴士目录，得知需要排完页码手动添加，算了不要了；原先打算给常用函数做个索引，方便读者从书里找示例，看样子也得手动做，算了不要了……&lt;/p&gt;
&lt;p&gt;即便如此，每次的排版仍然会出现奇奇怪怪的问题。如此往返三次，《学 R》这本书我已经读得想呕吐了。&lt;/p&gt;
&lt;p&gt;我百思不得其解：这到底是怎么回事？&lt;/p&gt;
&lt;p&gt;3&lt;/p&gt;
&lt;p&gt;来回折磨了四个月。终于， Y 试用了一下录排用的排版软件—— Adobe InDesign，俗称 ID，是国内出版业主流的专业排版软件。&lt;/p&gt;
&lt;p&gt;Y 立刻对我说：“我明白问题出在哪里了！”&lt;/p&gt;
&lt;p&gt;原来，录排是把我们提交的原稿，转成了 txt 文本文件；书里的插图，全部转成了 tif 图片。然后，把这些素材导入 ID，然后手动按照原稿 pdf 的样子做调整。&lt;/p&gt;
&lt;p&gt;这正是录排一贯的工作流程。&lt;/p&gt;
&lt;p&gt;这个流程，对文学类书籍没有问题。一篇小说，重要的是内容，不是格式；只要把文字分好段，就不会有大错。&lt;/p&gt;
&lt;p&gt;然而，这个流程用在《学 R》 这本书上，就是个灾难。因为这本书，内容和格式，都很重要。&lt;/p&gt;
&lt;p&gt;然而，这一点，录排不知道。&lt;/p&gt;
&lt;p&gt;然而，我们不知道录排不知道。&lt;/p&gt;
&lt;p&gt;然而，录排不知道我们不知道录排不知道。&lt;/p&gt;
&lt;p&gt;四个月的大好青春，就是这样搭进去的。&lt;/p&gt;
&lt;p&gt;对此我感到抱歉，让录排白白花了那么多时间和精力，我的吹毛求疵一定让录排很受折磨。同时我也感到遗憾，如果重来一次，这个坑恐怕仍然绕不开。&lt;/p&gt;
&lt;p&gt;4，&lt;/p&gt;
&lt;p&gt;好在我们及时止损了。&lt;/p&gt;
&lt;p&gt;上周，我们从头做起，不仅四个月来积攒的问题一扫而空，而且彩色代码的格式保住了，索引也作出来了。&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 在这里显示了无与伦比的强大力量。以致于 Y 饶有兴趣地说：“&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 真厉害，有空我学一下……”&lt;/p&gt;
&lt;p&gt;我立马拦住：“最好别去学。这个坑太大。一入 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;，坑深似海。”&lt;/p&gt;
&lt;p&gt;如果你以为本文是为 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 做广告，呵呵，那你就错了。为啥？下回再说。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>逻辑娃(2)</title>
      <link>http://www.pzhao.org/zh/post/logical-kid-2/</link>
      <pubDate>Tue, 21 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/logical-kid-2/</guid>
      <description>&lt;p&gt;1&lt;/p&gt;
&lt;p&gt;我：下午谁跟我出去逛街？&lt;/p&gt;
&lt;p&gt;德生：我！给我买新玩具！&lt;/p&gt;
&lt;p&gt;我：新玩具家里有。上午不是刚刚买过了吗？&lt;/p&gt;
&lt;p&gt;德生：家里没有。买回来拆开就不是新的了。&lt;/p&gt;
&lt;p&gt;我竟然无言以对。&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://maxpixel.freegreatpicture.com/static/photo/1x/Inspiration-Innovation-Idea-Thought-Imagination-2123970.jpg&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;2&lt;/p&gt;
&lt;p&gt;我们家住半山腰，爬山有得天独厚的条件。然而德生愿意赖在家里玩玩具和看书。&lt;/p&gt;
&lt;p&gt;德生说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;不敢去爬山，山上有老虎。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;妈妈：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;山上没老虎！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;德生：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;山上有没有动物园？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;妈妈：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有啊！走，咱们爬山去看动物园……&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;德生：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;动物园里有没有老虎？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;妈妈：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有啊……嗯？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;德生：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;那山上有没有老虎？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;妈妈：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有……&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>R bookdown 的小技巧</title>
      <link>http://www.pzhao.org/zh/post/bookdown-tips/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/bookdown-tips/</guid>
      <description>&lt;p&gt;本帖用来收集整理 R 语言 bookdown 扩展包的一些使用技巧。有些是在网上搜来的，有些是我在别处讨论得来的，有些是我尚未发布的，都写在这里备用。&lt;/p&gt;
&lt;div id=&#34;-markdown-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;输出 Markdown 文件&lt;/h2&gt;
&lt;p&gt;使用 bookdown 编译 Rmd 文件，可以得到的输出格式五花八门。对此，&lt;a href=&#34;https://bookdown.org/yihui/bookdown/output-formats.html&#34;&gt;bookdown 的官方文档&lt;/a&gt; 有详细介绍，包括 github， pdf，epub，word，html 单个文档等，偏偏没有提 markdown 格式。&lt;/p&gt;
&lt;p&gt;其实，markdown 文件是有的，在编译过程里作为过渡文档存在，编译结束后自动删除。编译顺利的时候，在文件夹里“刷”地闪一下就消失了。我以前的做法是“快手”，在它消失之前迅速用 notepad++ 打开，就存下来了。这显然不是办法，凑合着过日子而已。&lt;/p&gt;
&lt;p&gt;一般来说，如果仅仅是使用 rmarkdown，只需在 yaml 设置里声明一下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;output:
  md_document:
    variant: markdown_github&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后 knit 一下，就可以得到 markdown 文件了。想当然地，我把这段代码加到了 bookdown 的yaml 里，却得到警告，说 bookdown 不支持。&lt;/p&gt;
&lt;p&gt;这事儿被我搁置了很久，最后我终于在 bookdown 的项目主页找到了&lt;a href=&#34;https://github.com/rstudio/bookdown/issues/317#issuecomment-275262486&#34;&gt;答案&lt;/a&gt;：参数 &lt;code&gt;clean = FALSE&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bookdown::render_book(&#39;index.Rmd&#39;, clean = FALSE)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我很喜欢 markdown 格式。我用 bookdown 写论文，Rmd 的正文里插了不少诸如 &lt;code&gt;r pi&lt;/code&gt; 这样的调用。跟合作作者讨论时，看 Rmd 文件吧不直观，看 html 吧不方便修改，md 大概是最好的格式。&lt;/p&gt;
&lt;p&gt;bookdown 的编译，我习惯按快捷键 ctrl+alt+b，或者点击右上方面板的 Build 按钮编译的，输出格式取决于 yaml。这样就得不到 md 文件。要想得到 md 文件，看来以后得改成命令行编译了。&lt;/p&gt;
&lt;p&gt;我的 &lt;a href=&#34;https://github.com/pzhaonet/bookdownplus&#34;&gt;bookdownplus 最新版本 v1.3.1&lt;/a&gt; ，把 &lt;code&gt;clean&lt;/code&gt; 参数默认设置为 FALSE，并且在编译后把用不着的 .lol 文件删除。这样，新用户第一次用bookdown 时，就又多得到一种漂亮的输出结果。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;pdf-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;pdf 的参考文献引用格式&lt;/h2&gt;
&lt;p&gt;bookdown 里引用参考文献，在 bookdown 的官方文档里有说明。例如标识为’zhao2017’ 的 bib 条目，引用的方式和输出结果为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@zhao2017&lt;/code&gt;，得到 &lt;code&gt;Zhao (2017)&lt;/code&gt;， 相当于 LaTeX 里的 &lt;code&gt;\citet{zhao2017}&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[@zhao2017]&lt;/code&gt; ，得到 &lt;code&gt;(Zhao, 2017)&lt;/code&gt;， 相当于 LaTeX 里的 &lt;code&gt;\citep{zhao2017}&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;但是，如果有多篇参考文献连续引用（我经常需要），就出问题了。我想得到的是 &lt;code&gt;(Xie, 2016; Zhao, 2017)&lt;/code&gt;，但无论输入 &lt;code&gt;[@zhao2017][@xie2016]&lt;/code&gt;, 或是&lt;code&gt;[@zhao2017 @xie2016]&lt;/code&gt;，或是&lt;code&gt;(@zhao2017; @xie2016)&lt;/code&gt;，都不管用。&lt;/p&gt;
&lt;p&gt;管用的方法是使用 LaTeX 方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\citep{zhao2017,xie2016}&lt;/code&gt;，得到&lt;code&gt;(Xie, 2016; Zhao, 2017)&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;更新：经 Yihui 提示，应当用 &lt;code&gt;[@zhao2017; @xie2016]&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-pdf-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;往 pdf 里插入网络图片&lt;/h2&gt;
&lt;p&gt;假定往文档里插入下面这张网络图片：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;url &amp;lt;- &#39;https://bookdown.org/yihui/bookdown/images/cover.jpg&#39;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;一般有两种方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;knitr::include_graphics(url)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;![](https://bookdown.org/yihui/bookdown/images/cover.jpg)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;得到的网页输出格式里没有任何问题，但是 pdf 却不行。&lt;/p&gt;
&lt;p&gt;这是因为，生成 pdf 的 LaTeX 不支持插入网络图片。LaTeX 界的解决办法是，先用 &lt;code&gt;wget&lt;/code&gt; 把网络图片下载到本地，再插入到tex 文档里。那么，我在 bookdown 里也如法炮制：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;download.file(url,&amp;#39;cover.jpg&amp;#39;, mode = &amp;#39;wb&amp;#39;)
knitr::include_graphics(&amp;#39;cover.jpg&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这事儿其实已经解决了，但是不够完美。如果用 bookdown 同时输出网页格式和 pdf，那么网页格式的文档里插入的图片是本地图片；如果发布到 bookdown.org，那么插入的图片来自 bookdown.org。两者都不是该图片的原始地址。有点资源浪费。&lt;/p&gt;
&lt;p&gt;完美的解决方式来自&lt;a href=&#34;https://stackoverflow.com/questions/46331896/how-can-i-insert-an-image-from-internet-to-the-pdf-file-produced-by-r-bookdown-i&#34;&gt;Yihui 的回答&lt;/a&gt;，在 Rmd 里这么写：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if (!file.exists(cover_file &amp;lt;- &amp;#39;cover.jpg&amp;#39;))
  download.file(url, cover_file, mode = &amp;#39;wb&amp;#39;)
knitr::include_graphics(if (identical(knitr:::pandoc_to(), &amp;#39;html&amp;#39;)) url else cover_file)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这段代码自动判断，如果输出网页文档，就插入原始图片链接，否则就下载到本地再插入。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;主控文档和子文档&lt;/h2&gt;
&lt;p&gt;Word 有个很好的功能，叫做“主控文档”：如果文件太大，那么各章可以分别写在一个 word 文档（子文档）里，然后插入到另一个文档里合并。LaTeX 里也有同样的功能，用 include 指令就行了。&lt;/p&gt;
&lt;p&gt;bookdown 当然也可以。官方文档对此有&lt;a href=&#34;https://bookdown.org/yihui/bookdown/usage.html&#34;&gt;说明&lt;/a&gt;，只需在’_bookdown.yml’里声明即可：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rmd_files: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter2.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果希望在不同格式的输出文件里包含不同的章节，比如网页格式的书里包含 1 到 3 章，而 pdf 的只包含第 1 和第 3 章，那么：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rmd_files:
  html: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter2.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]
  latex: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;但是，这种方法只适合并列关系的章节，如果是总分关系的呢？比如，我想在 chapter1 里某段插入 ‘mytext.md’ 这个文本，在 chapter2 里再插入一次，该怎么办？&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://disqus.com/home/discussion/yihui/r_markdown_notebook_jupyter_ipython_notebook/#comment-3426121547&#34;&gt;这样办&lt;/a&gt;：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cat(readLines(&amp;quot;mytext.md&amp;quot;), sep = &amp;quot;\n&amp;quot;) # 结合代码段选项 results=&amp;quot;asis&amp;quot;, echo=FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果深入一步，考虑上一节“往 pdf 里插入网络图片”的方法，就可以玩出更多花样，例如书的网页格式里插入 mytext.md，而 pdf 里不插。&lt;/p&gt;
&lt;p&gt;如果再跟上面的 yaml 声明相结合，各个文本文件就成了乐高积木块，随心所欲组合了。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;bookdown.org-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;bookdown.org 的多账号管理&lt;/h2&gt;
&lt;p&gt;在 bookdown.org 发布书稿，点击RStudio 左上面板的发布符号，会引导你用 google 账号登录。第一次登录会让你设置在 bookdown.org 的用户名，这个要重视，想个你喜欢的名字，以后就没法改了。&lt;/p&gt;
&lt;p&gt;用同一账号发布书稿，一点问题都没有。但是当我用多个账号发布书稿，遇见了一些小麻烦。&lt;/p&gt;
&lt;p&gt;首先，我用 &lt;code&gt;bookdown::publish_book()&lt;/code&gt; 的 &lt;code&gt;account&lt;/code&gt; 参数指定一个新账号，得到了错误信息:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error: Unknown account name &amp;#39;newaccount&amp;#39; (you can use the setAccountInfo function to add a new account)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;一查 setAccountInfo，不是 bookdown 包的函数，而是 rsconnect 包的函数：&lt;code&gt;rsconnect::setAccountInfo()&lt;/code&gt;。然后就不知道怎么办了。&lt;/p&gt;
&lt;p&gt;其实，添加账号应该点击 Rstudio 左上面板的发布按钮- Manage Account - Connect - RStudio Connect - 输入 bookdown.org，然后往下照提示走就行了。&lt;/p&gt;
&lt;p&gt;添加账号后，照理说用 &lt;code&gt;bookdown::publish_book()&lt;/code&gt; 的 &lt;code&gt;account&lt;/code&gt;指定一下账号，就应该能发布了吧？不，还是失败了，说 &lt;code&gt;name&lt;/code&gt; 参数有问题。其实没问题。&lt;/p&gt;
&lt;p&gt;怎么办？我发现必须从 Mange Account 里删掉旧 bookdown 的账号，就可以用新的账号成功发布了。&lt;/p&gt;
&lt;p&gt;上面说了这么多，其实就是一句话：用不同账号往 bookdown.org 发布书稿，只需在 Manage Account 里添加并保留唯一一个账号即可。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>如何在 R markdown 里输出 r pi 并前后加上小撇`</title>
      <link>http://www.pzhao.org/zh/post/backticks-in-rmd/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/backticks-in-rmd/</guid>
      <description>&lt;p&gt;其实本文的标题应该是：如何在文章里显示 &lt;code&gt;`r pi`&lt;/code&gt; 这样的文字。但是我不知道怎么把这个格式弄到标题里。所以，就这样凑合过吧。&lt;/p&gt;
&lt;p&gt;这个问题的答案，要分几层意思来说。&lt;code&gt;`r pi`&lt;/code&gt; 是代码格式（本博客显示为粉底红字），并且包含的`符号同样是代码格式，并且 pi 并没有被编译成 3.1415927。别看它短，这三点每个都是个坑。&lt;/p&gt;
&lt;p&gt;这个问题在编写 R markdown 教程时常见。其实，等你明白这个问题的答案后，会发现答案并不难，难的是如何描述这个问题。我费了好大劲，都想不出一个准确描述的办法，并且在那些支持 markdown 的论坛上，我连这个小撇都输不出来，这叫人怎么问？最后我只能这么提问：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请问在输出文档里怎么显示’撇 r pi 撇’并且别让它编译出来 3.1415927？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;-1--&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 1 层意思，那个小撇 `，它到底叫什么？总不能总叫“小撇”吧？&lt;/h3&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/KB_Germany.svg/550px-KB_Germany.svg.png&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;我用的是德语键盘，挪，就是上图第一行右起第二个键的上面那个小可爱。&lt;/p&gt;
&lt;p&gt;查&lt;a href=&#34;https://en.wikipedia.org/wiki/Grave_accent&#34;&gt;维基百科&lt;/a&gt;才知道，` 的学名叫 &lt;em&gt;Grave accent&lt;/em&gt; ，中文叫“重音符”。在程序猿的世界里，它又被称作 &lt;em&gt;backquote&lt;/em&gt; 或 &lt;em&gt;backtick&lt;/em&gt;，中文叫反引号。所以，跟这个有关的问题可以这么问：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://meta.stackexchange.com/questions/82718/how-do-i-escape-a-backtick-in-markdown&#34;&gt;How do I escape a backtick ` in Markdown?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/20409172/how-to-display-verbatim-inline-r-code-with-backticks-using-rmarkdown&#34;&gt;How to display verbatim/literal inline r code with backticks using Rmarkdown?&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-2-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 2 层意思：怎么把反引号显示出来？&lt;/h3&gt;
&lt;p&gt;如果仅仅输入个反引号 &lt;code&gt;，在同一段里后面没有了还好办，万一又出现一个反引号&lt;/code&gt;，就会把他俩自动配对儿，两者之间的文字当成了代码。瞧，就是上句话这个德性。&lt;/p&gt;
&lt;p&gt;为了棒打鸳鸯不让他俩自动配对儿，那就用转义符\。输入\`，就避免反引号自动配对变代码了。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-3--r-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 3 层意思，是怎么把 r 语言的输出结果显示到代码环境里。&lt;/h3&gt;
&lt;p&gt;这个就开始有点绕了。&lt;/p&gt;
&lt;p&gt;比如，我想在Rmd 源文件里输入 pi，而输出的文档里显示 &lt;code&gt;3.1415927&lt;/code&gt;。注意，光是输出 3.1415927 这容易，输入&lt;code&gt;`r pi`&lt;/code&gt; 就行了，但是怎么显示成代码格式（这里是粉底红字）？在 &lt;code&gt;`r pi`&lt;/code&gt; 外边加一层反引号是不行的。&lt;/p&gt;
&lt;p&gt;正确的方法是: &lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;一个反引号&lt;/code&gt; + &lt;code&gt;r&lt;/code&gt; + &lt;code&gt;pi&lt;/code&gt; + &lt;code&gt;一个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;两个反引号&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;也就是说，&lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; 相当于更外一层的反引号。 R markdown 先看到内层的反引号，进行编译，得到 3.1415927：然后，看到外层的反引号，于是把内层的编译结果表示成代码格式。&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-4--3.1415927-r-pi-r-pi&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 4 层意思，怎么让上面那个 3.1415927 在输出文档里显示源码’r pi’，并且都在代码环境（粉底红色）里，即 &lt;code&gt;r pi&lt;/code&gt;？&lt;/h3&gt;
&lt;p&gt;方法有两种。第一种是用&lt;a href=&#34;https://yihui.name/knitr/faq/&#34;&gt;knitr&lt;/a&gt; 的 &lt;code&gt;inline_expr()&lt;/code&gt; 函数：&lt;code&gt;`r knitr::inline_expr(&#39;pi&#39;)`&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;第二种是用第 3 层意思里说的方法，即 &lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; &lt;code&gt;r&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;pi&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;两个反引号&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;牢记&lt;strong&gt;&lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; = &lt;code&gt;更外一层的反引号&lt;/code&gt;&lt;/strong&gt;，就稍微容易理解一点。&lt;/p&gt;
&lt;p&gt;写到这个地方，我已经要晕车了，但是还没完。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-5--4-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 5 层意思，怎么在第 4 层意思的基础上再加两个反引号，并显示成粉底红字，即&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;`r pi`&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我现在用的方法是：&lt;code&gt;``&lt;/code&gt; &lt;code&gt;r &#39;\x60r pi\x60&#39;&lt;/code&gt; &lt;code&gt;``&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这个 &lt;code&gt;\x60&lt;/code&gt; 就是反引号。相当于把反引号弄到字符串里处理。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-6-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;完了吗？还没完，还有第 6 层意思。&lt;/h3&gt;
&lt;p&gt;反引号就像个俄罗斯套娃；上文你看到的结果都是渲染出来的，而实际书写的源文档，总会比你看见的外面再多一层。&lt;/p&gt;
&lt;p&gt;写到这里，我不行了，容我扶墙出去呼吸两颗新鲜空气。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>外国国名的中文含义</title>
      <link>http://www.pzhao.org/zh/post/country-names/</link>
      <pubDate>Fri, 21 Jul 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/country-names/</guid>
      <description>&lt;p&gt;有一天，德国朋友苏珊兴奋地问我：听说 Germany 在中文的意思是&lt;strong&gt;美德的国度&lt;/strong&gt;，对吗？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 对。德国，美德之国。&lt;/p&gt;

&lt;p&gt;我爱中文！再多讲讲。France 怎么说？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 法国。法制之邦。&lt;/p&gt;

&lt;p&gt;嗯，有道理。那么 America 呢？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 美国。美丽之国。&lt;/p&gt;

&lt;p&gt;真的？那 Britain 呢？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 英吉利。幸运的花儿。&lt;/p&gt;

&lt;p&gt;有趣！Netherlands？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 荷兰。荷花和兰花。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Finland&lt;/em&gt;?&amp;rsquo;&lt;/p&gt;

&lt;p&gt;&amp;ndash; 芬兰。芬芳的兰花。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Denmark&lt;/em&gt;?&lt;/p&gt;

&lt;p&gt;&amp;ndash; 丹麦。红色的麦子。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Czech&lt;/em&gt;?&lt;/p&gt;

&lt;p&gt;&amp;ndash; 捷克。打败敌人，赢得战争！&lt;/p&gt;

&lt;p&gt;天哪! &lt;em&gt;Austria&lt;/em&gt;?&lt;/p&gt;

&lt;p&gt;&amp;ndash; 奥地利，占据地利的国家。&lt;/p&gt;

&lt;p&gt;为什么是地利？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 因为有个 Belgium，比利时，占据天时的国家！&lt;/p&gt;

&lt;p&gt;好吧。&lt;em&gt;Portugal&lt;/em&gt;?&amp;rsquo;&lt;/p&gt;

&lt;p&gt;&amp;ndash; 葡萄牙。葡萄的牙齿。&lt;/p&gt;

&lt;p&gt;啥？那 Spain？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 西班牙。在西边分开的牙齿！&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://haonowshaokao.files.wordpress.com/2013/04/europe_map_political.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;我懂了！亚洲国家呢？Vietnam？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 越南。百越部族的南边。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thailand&lt;/em&gt;?&amp;rsquo;&lt;/p&gt;

&lt;p&gt;&amp;ndash; 泰国。国泰民安。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Korea&lt;/em&gt;?&lt;/p&gt;

&lt;p&gt;&amp;ndash; 朝鲜。明亮的早晨。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Japan&lt;/em&gt; 是什么意思?&lt;/p&gt;

&lt;p&gt;&amp;ndash; 日本，太阳的根。&lt;/p&gt;

&lt;p&gt;这些远东国家的名字在中文里更有意义。那么 China 呢？&lt;/p&gt;

&lt;p&gt;&amp;ndash; 我们才不是远东呢。中国，我们是中央之国。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
