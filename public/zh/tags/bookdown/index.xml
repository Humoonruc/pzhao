<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bookdown on Peng Zhao</title>
    <link>http://www.pzhao.org/zh/tags/bookdown/index.xml</link>
    <description>Recent content in Bookdown on Peng Zhao</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017 Peng Zhao</copyright>
    <atom:link href="/zh/tags/bookdown/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>R bookdown 的小技巧</title>
      <link>http://www.pzhao.org/zh/post/bookdown-tips/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/bookdown-tips/</guid>
      <description>&lt;p&gt;本帖用来收集整理 R 语言 bookdown 扩展包的一些使用技巧。有些是在网上搜来的，有些是我在别处讨论得来的，有些是我尚未发布的，都写在这里备用。&lt;/p&gt;
&lt;div id=&#34;-markdown-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;输出 Markdown 文件&lt;/h2&gt;
&lt;p&gt;使用 bookdown 编译 Rmd 文件，可以得到的输出格式五花八门。对此，&lt;a href=&#34;https://bookdown.org/yihui/bookdown/output-formats.html&#34;&gt;bookdown 的官方文档&lt;/a&gt; 有详细介绍，包括 github， pdf，epub，word，html 单个文档等，偏偏没有提 markdown 格式。&lt;/p&gt;
&lt;p&gt;其实，markdown 文件是有的，在编译过程里作为过渡文档存在，编译结束后自动删除。编译顺利的时候，在文件夹里“刷”地闪一下就消失了。我以前的做法是“快手”，在它消失之前迅速用 notepad++ 打开，就存下来了。这显然不是办法，凑合着过日子而已。&lt;/p&gt;
&lt;p&gt;一般来说，如果仅仅是使用 rmarkdown，只需在 yaml 设置里声明一下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;output:
  md_document:
    variant: markdown_github&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后 knit 一下，就可以得到 markdown 文件了。想当然地，我把这段代码加到了 bookdown 的yaml 里，却得到警告，说 bookdown 不支持。&lt;/p&gt;
&lt;p&gt;这事儿被我搁置了很久，最后我终于在 bookdown 的项目主页找到了&lt;a href=&#34;https://github.com/rstudio/bookdown/issues/317#issuecomment-275262486&#34;&gt;答案&lt;/a&gt;：参数 &lt;code&gt;clean = FALSE&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bookdown::render_book(&#39;index.Rmd&#39;, clean = FALSE)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我很喜欢 markdown 格式。我用 bookdown 写论文，Rmd 的正文里插了不少诸如 &lt;code&gt;r pi&lt;/code&gt; 这样的调用。跟合作作者讨论时，看 Rmd 文件吧不直观，看 html 吧不方便修改，md 大概是最好的格式。&lt;/p&gt;
&lt;p&gt;bookdown 的编译，我习惯按快捷键 ctrl+alt+b，或者点击右上方面板的 Build 按钮编译的，输出格式取决于 yaml。这样就得不到 md 文件。要想得到 md 文件，看来以后得改成命令行编译了。&lt;/p&gt;
&lt;p&gt;我的 &lt;a href=&#34;https://github.com/pzhaonet/bookdownplus&#34;&gt;bookdownplus 最新版本 v1.3.1&lt;/a&gt; ，把 &lt;code&gt;clean&lt;/code&gt; 参数默认设置为 FALSE，并且在编译后把用不着的 .lol 文件删除。这样，新用户第一次用bookdown 时，就又多得到一种漂亮的输出结果。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;pdf-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;pdf 的参考文献引用格式&lt;/h2&gt;
&lt;p&gt;bookdown 里引用参考文献，在 bookdown 的官方文档里有说明。例如标识为’zhao2017’ 的 bib 条目，引用的方式和输出结果为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@zhao2017&lt;/code&gt;，得到 &lt;code&gt;Zhao (2017)&lt;/code&gt;， 相当于 LaTeX 里的 &lt;code&gt;\citet{zhao2017}&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[@zhao2017]&lt;/code&gt; ，得到 &lt;code&gt;(Zhao, 2017)&lt;/code&gt;， 相当于 LaTeX 里的 &lt;code&gt;\citep{zhao2017}&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;但是，如果有多篇参考文献连续引用（我经常需要），就出问题了。我想得到的是 &lt;code&gt;(Xie, 2016; Zhao, 2017)&lt;/code&gt;，但无论输入 &lt;code&gt;[@zhao2017][@xie2016]&lt;/code&gt;, 或是&lt;code&gt;[@zhao2017 @xie2016]&lt;/code&gt;，或是&lt;code&gt;(@zhao2017; @xie2016)&lt;/code&gt;，都不管用。&lt;/p&gt;
&lt;p&gt;管用的方法是使用 LaTeX 方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\citep{zhao2017,xie2016}&lt;/code&gt;，得到&lt;code&gt;(Xie, 2016; Zhao, 2017)&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;-pdf-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;往 pdf 里插入网络图片&lt;/h2&gt;
&lt;p&gt;假定往文档里插入下面这张网络图片：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;url &amp;lt;- &#39;https://bookdown.org/yihui/bookdown/images/cover.jpg&#39;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;一般有两种方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;knitr::include_graphics(url)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;![](https://bookdown.org/yihui/bookdown/images/cover.jpg)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;得到的网页输出格式里没有任何问题，但是 pdf 却不行。&lt;/p&gt;
&lt;p&gt;这是因为，生成 pdf 的 LaTeX 不支持插入网络图片。LaTeX 界的解决办法是，先用 &lt;code&gt;wget&lt;/code&gt; 把网络图片下载到本地，再插入到tex 文档里。那么，我在 bookdown 里也如法炮制：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;download.file(url,&amp;#39;cover.jpg&amp;#39;, mode = &amp;#39;wb&amp;#39;)
knitr::include_graphics(&amp;#39;cover.jpg&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这事儿其实已经解决了，但是不够完美。如果用 bookdown 同时输出网页格式和 pdf，那么网页格式的文档里插入的图片是本地图片；如果发布到 bookdown.org，那么插入的图片来自 bookdown.org。两者都不是该图片的原始地址。有点资源浪费。&lt;/p&gt;
&lt;p&gt;完美的解决方式来自&lt;a href=&#34;https://stackoverflow.com/questions/46331896/how-can-i-insert-an-image-from-internet-to-the-pdf-file-produced-by-r-bookdown-i&#34;&gt;Yihui 的回答&lt;/a&gt;，在 Rmd 里这么写：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if (!file.exists(cover_file &amp;lt;- &amp;#39;cover.jpg&amp;#39;))
  download.file(url, cover_file, mode = &amp;#39;wb&amp;#39;)
knitr::include_graphics(if (identical(knitr:::pandoc_to(), &amp;#39;html&amp;#39;)) url else cover_file)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这段代码自动判断，如果输出网页文档，就插入原始图片链接，否则就下载到本地再插入。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;主控文档和子文档&lt;/h2&gt;
&lt;p&gt;Word 有个很好的功能，叫做“主控文档”：如果文件太大，那么各章可以分别写在一个 word 文档（子文档）里，然后插入到另一个文档里合并。LaTeX 里也有同样的功能，用 include 指令就行了。&lt;/p&gt;
&lt;p&gt;bookdown 当然也可以。官方文档对此有&lt;a href=&#34;https://bookdown.org/yihui/bookdown/usage.html&#34;&gt;说明&lt;/a&gt;，只需在’_bookdown.yml’里声明即可：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rmd_files: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter2.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果希望在不同格式的输出文件里包含不同的章节，比如网页格式的书里包含 1 到 3 章，而 pdf 的只包含第 1 和第 3 章，那么：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rmd_files:
  html: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter2.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]
  latex: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;但是，这种方法只适合并列关系的章节，如果是总分关系的呢？比如，我想在 chapter1 里某段插入 ‘mytext.md’ 这个文本，在 chapter2 里再插入一次，该怎么办？&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://disqus.com/home/discussion/yihui/r_markdown_notebook_jupyter_ipython_notebook/#comment-3426121547&#34;&gt;这样办&lt;/a&gt;：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cat(readLines(&amp;quot;mytext.md&amp;quot;), sep = &amp;quot;\n&amp;quot;) # 结合代码段选项 results=&amp;quot;asis&amp;quot;, echo=FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果深入一步，考虑上一节“往 pdf 里插入网络图片”的方法，就可以玩出更多花样，例如书的网页格式里插入 mytext.md，而 pdf 里不插。&lt;/p&gt;
&lt;p&gt;如果再跟上面的 yaml 声明相结合，各个文本文件就成了乐高积木块，随心所欲组合了。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;bookdown.org-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;bookdown.org 的多账号管理&lt;/h2&gt;
&lt;p&gt;在 bookdown.org 发布书稿，点击RStudio 左上面板的发布符号，会引导你用 google 账号登录。第一次登录会让你设置在 bookdown.org 的用户名，这个要重视，想个你喜欢的名字，以后就没法改了。&lt;/p&gt;
&lt;p&gt;用同一账号发布书稿，一点问题都没有。但是当我用多个账号发布书稿，遇见了一些小麻烦。&lt;/p&gt;
&lt;p&gt;首先，我用 &lt;code&gt;bookdown::publish_book()&lt;/code&gt; 的 &lt;code&gt;account&lt;/code&gt; 参数指定一个新账号，得到了错误信息:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error: Unknown account name &amp;#39;newaccount&amp;#39; (you can use the setAccountInfo function to add a new account)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;一查 setAccountInfo，不是 bookdown 包的函数，而是 rsconnect 包的函数：&lt;code&gt;rsconnect::setAccountInfo()&lt;/code&gt;。然后就不知道怎么办了。&lt;/p&gt;
&lt;p&gt;其实，添加账号应该点击 Rstudio 左上面板的发布按钮- Manage Account - Connect - RStudio Connect - 输入 bookdown.org，然后往下照提示走就行了。&lt;/p&gt;
&lt;p&gt;添加账号后，照理说用 &lt;code&gt;bookdown::publish_book()&lt;/code&gt; 的 &lt;code&gt;account&lt;/code&gt;指定一下账号，就应该能发布了吧？不，还是失败了，说 &lt;code&gt;name&lt;/code&gt; 参数有问题。其实没问题。&lt;/p&gt;
&lt;p&gt;怎么办？我发现必须从 Mange Account 里删掉旧 bookdown 的账号，就可以用新的账号成功发布了。&lt;/p&gt;
&lt;p&gt;上面说了这么多，其实就是一句话：用不同账号往 bookdown.org 发布书稿，只需在 Manage Account 里添加并保留唯一一个账号即可。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>如何在 R markdown 里输出 r pi 并前后加上小撇`</title>
      <link>http://www.pzhao.org/zh/post/backticks-in-rmd/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/backticks-in-rmd/</guid>
      <description>&lt;p&gt;其实本文的标题应该是：如何在文章里显示 &lt;code&gt;`r pi`&lt;/code&gt; 这样的文字。但是我不知道怎么把这个格式弄到标题里。所以，就这样凑合过吧。&lt;/p&gt;
&lt;p&gt;这个问题的答案，要分几层意思来说。&lt;code&gt;`r pi`&lt;/code&gt; 是代码格式（本博客显示为粉底红字），并且包含的`符号同样是代码格式，并且 pi 并没有被编译成 3.1415927。别看它短，这三点每个都是个坑。&lt;/p&gt;
&lt;p&gt;这个问题在编写 R markdown 教程时常见。其实，等你明白这个问题的答案后，会发现答案并不难，难的是如何描述这个问题。我费了好大劲，都想不出一个准确描述的办法，并且在那些支持 markdown 的论坛上，我连这个小撇都输不出来，这叫人怎么问？最后我只能这么提问：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请问在输出文档里怎么显示’撇 r pi 撇’并且别让它编译出来 3.1415927？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;-1--&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 1 层意思，那个小撇 `，它到底叫什么？总不能总叫“小撇”吧？&lt;/h3&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/KB_Germany.svg/550px-KB_Germany.svg.png&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;我用的是德语键盘，挪，就是上图第一行右起第二个键的上面那个小可爱。&lt;/p&gt;
&lt;p&gt;查&lt;a href=&#34;https://en.wikipedia.org/wiki/Grave_accent&#34;&gt;维基百科&lt;/a&gt;才知道，` 的学名叫 &lt;em&gt;Grave accent&lt;/em&gt; ，中文叫“重音符”。在程序猿的世界里，它又被称作 &lt;em&gt;backquote&lt;/em&gt; 或 &lt;em&gt;backtick&lt;/em&gt;，中文叫反引号。所以，跟这个有关的问题可以这么问：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://meta.stackexchange.com/questions/82718/how-do-i-escape-a-backtick-in-markdown&#34;&gt;How do I escape a backtick ` in Markdown?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/20409172/how-to-display-verbatim-inline-r-code-with-backticks-using-rmarkdown&#34;&gt;How to display verbatim/literal inline r code with backticks using Rmarkdown?&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-2-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 2 层意思：怎么把反引号显示出来？&lt;/h3&gt;
&lt;p&gt;如果仅仅输入个反引号 &lt;code&gt;，在同一段里后面没有了还好办，万一又出现一个反引号&lt;/code&gt;，就会把他俩自动配对儿，两者之间的文字当成了代码。瞧，就是上句话这个德性。&lt;/p&gt;
&lt;p&gt;为了棒打鸳鸯不让他俩自动配对儿，那就用转义符\。输入\`，就避免反引号自动配对变代码了。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-3--r-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 3 层意思，是怎么把 r 语言的输出结果显示到代码环境里。&lt;/h3&gt;
&lt;p&gt;这个就开始有点绕了。&lt;/p&gt;
&lt;p&gt;比如，我想在Rmd 源文件里输入 pi，而输出的文档里显示 &lt;code&gt;3.1415927&lt;/code&gt;。注意，光是输出 3.1415927 这容易，输入&lt;code&gt;`r pi`&lt;/code&gt; 就行了，但是怎么显示成代码格式（这里是粉底红字）？在 &lt;code&gt;`r pi`&lt;/code&gt; 外边加一层反引号是不行的。&lt;/p&gt;
&lt;p&gt;正确的方法是: &lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;一个反引号&lt;/code&gt; + &lt;code&gt;r&lt;/code&gt; + &lt;code&gt;pi&lt;/code&gt; + &lt;code&gt;一个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;两个反引号&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;也就是说，&lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; 相当于更外一层的反引号。 R markdown 先看到内层的反引号，进行编译，得到 3.1415927：然后，看到外层的反引号，于是把内层的编译结果表示成代码格式。&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-4--3.1415927-r-pi-r-pi&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 4 层意思，怎么让上面那个 3.1415927 在输出文档里显示源码’r pi’，并且都在代码环境（粉底红色）里，即 &lt;code&gt;r pi&lt;/code&gt;？&lt;/h3&gt;
&lt;p&gt;方法有两种。第一种是用&lt;a href=&#34;https://yihui.name/knitr/faq/&#34;&gt;knitr&lt;/a&gt; 的 &lt;code&gt;inline_expr()&lt;/code&gt; 函数：&lt;code&gt;`r knitr::inline_expr(&#39;pi&#39;)`&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;第二种是用第 3 层意思里说的方法，即 &lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; &lt;code&gt;r&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;pi&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;两个反引号&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;牢记&lt;strong&gt;&lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; = &lt;code&gt;更外一层的反引号&lt;/code&gt;&lt;/strong&gt;，就稍微容易理解一点。&lt;/p&gt;
&lt;p&gt;写到这个地方，我已经要晕车了，但是还没完。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-5--4-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 5 层意思，怎么在第 4 层意思的基础上再加两个反引号，并显示成粉底红字，即&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;`r pi`&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我现在用的方法是：&lt;code&gt;``&lt;/code&gt; &lt;code&gt;r &#39;\x60r pi\x60&#39;&lt;/code&gt; &lt;code&gt;``&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这个 &lt;code&gt;\x60&lt;/code&gt; 就是反引号。相当于把反引号弄到字符串里处理。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-6-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;完了吗？还没完，还有第 6 层意思。&lt;/h3&gt;
&lt;p&gt;反引号就像个俄罗斯套娃；上文你看到的结果都是渲染出来的，而实际书写的源文档，总会比你看见的外面再多一层。&lt;/p&gt;
&lt;p&gt;写到这里，我不行了，容我扶墙出去呼吸两颗新鲜空气。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>bookdownplus 的两个魔法</title>
      <link>http://www.pzhao.org/zh/post/bookdownplus-magic/</link>
      <pubDate>Tue, 27 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/bookdownplus-magic/</guid>
      <description>&lt;p&gt;bookdown 是个好东西，只是入手有点难，酒香巷深。&lt;/p&gt;
&lt;p&gt;对于 R 初学者来说，如果身边没有人指导，使用者可能需要花大量精力应付 LaTeX，YAML，Pandoc，而很多初学者可能从来没听说过这些，站在 bookdown 的门口往里张望了一下，说不定就被吓跑了，从而错过了门里的精彩世界。&lt;/p&gt;
&lt;p&gt;bookdownplus 扩展包，可以让新手对 bookdown 快速上手。从此，bookdown 这坛好酒就不必去深巷苦寻，它就放在你手边。&lt;/p&gt;
&lt;p&gt;从 v1.2.0 开始，bookdownplus 增加了两个魔法，更是让新手对 bookdown 一见钟情。如果你对 bookdown 感兴趣却苦于入门的烦恼，那么可以试试这两个魔法。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;准备工作&lt;/h2&gt;
&lt;p&gt;首先，安装好必需的软件，包括 R, RStudio, &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;等。详见 &lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;bookdown 官方手册&lt;/a&gt;。然后，安装开发版的bookdownplus：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/bookdownplus&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;再用 &lt;code&gt;setwd()&lt;/code&gt; 将R的工作目录设置到一个空文件夹里。&lt;/p&gt;
&lt;p&gt;一切准备就绪后，接下来就是见证奇迹的时刻。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;第一个魔法&lt;/h2&gt;
&lt;p&gt;在 R 里运行下面的代码，然后去喝个茶：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;for (i in template()[1:19])
  bookdownplus(template = i, 
               more_output = more_output()[1:3])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;回来以后，你会在工作目录里看到很多文件和文件夹。打开那个叫做 &lt;code&gt;_book/&lt;/code&gt;的文件夹，Duang！19个示例文档，每个都以 pdf、Word、网页和电子书格式乖乖地等在那里，等你打开了。其中，电子书 epub 格式可以在手机上阅读，也可以在台式机用免费的Calibre软件打开阅读。&lt;/p&gt;
&lt;p&gt;这些示例文档，从学术论文到诗歌乐谱，从中文到英文，展示了 bookdown 能胜任的工作。是不是动心了？&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;第二个魔法&lt;/h2&gt;
&lt;p&gt;运行下面的代码，然后看两眼窗外的风景，bookdownplus 就把事情做完了：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;for (mf in mail_font()) {
  for (ms in mail_style()) {
    for (mt in mail_theme()) {
      outputname &amp;lt;- paste(&amp;#39;mail&amp;#39;, ms, mf, mt, sep = &amp;#39;_&amp;#39;)
      bookdownplus(template = &amp;#39;mail&amp;#39;, 
                   mail_style = ms, 
                   mail_font = mf, 
                   mail_theme = mt, 
                   output_name = outputname)
    }
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;仍然打开那个叫做 &lt;code&gt;_book/&lt;/code&gt;的文件夹，Duang！ 不同字体、不同主题、不同布局的信件示例文档就全部在那里了。&lt;/p&gt;
&lt;p&gt;如果看了这个你还没动心，那么只能说明跟 bookdown 没缘分，趁早放手吧！&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R 包 bookdownplus 正式发布</title>
      <link>http://www.pzhao.org/zh/post/bookdownplus-released/</link>
      <pubDate>Thu, 22 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/bookdownplus-released/</guid>
      <description>&lt;p&gt;很高兴地宣布，我的 R 语言扩展包 ‘bookdownplus v1.0.2’ &lt;span class=&#34;citation&#34;&gt;(Zhao 2017a)&lt;/span&gt; 在 CRAN &lt;a href=&#34;https://cran.r-project.org/web/packages/bookdownplus/&#34;&gt;正式发布&lt;/a&gt;了。本文是对’bookdownplus v1.0.2’的简要描述. 由于最近更新频繁, 最新版的’bookdownplus’更加强大和易用, 例如 ‘bookdownplus v1.2.0’ 可以一条指令生成19个模板文档的 pdf, word, html 和 epub 四种格式. 建议移步位于 GitHub 的 &lt;a href=&#34;http://github.com/pzhaonet/bookdownplus&#34;&gt;bookdownplus 项目主页&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://cranlogs.r-pkg.org/badges/grand-total/bookdownplus&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;http://www.pzhao.org/post/2017-06-22-bookdownplus_released_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;简介&lt;/h1&gt;
&lt;p&gt;bookdownplus 是对 bookdown 包 &lt;span class=&#34;citation&#34;&gt;(Xie 2016)&lt;/span&gt; 的增强和简化, 是快速使用 bookdown 的最简洁方法。bookdown 就好比 Microsoft Word 或 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;，可以用来写文档，而 bookdownplus 提供了很多有用的模板，可以很方便地在 bookdown 平台写期刊论文、学位论文、学术海报、化学分子式、信件、日记、日历、诗集、吉他谱等各种常用文档和书籍。这是功能上的增强（+）。&lt;/p&gt;
&lt;p&gt;bookdownplus 使用时只需指定一个模板，给定作者和书名，就可以一键生成模板文件，用户在模板文件里照猫画虎写自己的文字就可以了，不必再花力气上网找模板、设置 YAML 和 LaTeX。这是操作上的简化（-）。&lt;/p&gt;
&lt;p&gt;bookdownplus 各个模板的使用方法详见 &lt;a href=&#34;https://bookdown.org/baydap/bookdownplus&#34;&gt;R bookdownplus Textbook&lt;/a&gt;。这本电子书本身就是用 bookdownplus 生成的，尤其是它的 &lt;a href=&#34;https://bookdown.org/baydap/bookdownplus/bookdownplus.pdf&#34;&gt;pdf 版本&lt;/a&gt;很美观。此书的源码开放，可以作为使用 bookdownplus写书的示例。&lt;/p&gt;
&lt;p&gt;下面是 bookdownplus 的简介和快速使用方法。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;快速入门&lt;/h1&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;准备&lt;/h2&gt;
&lt;p&gt;在开始前，需要安装 R, RStudio, bookdown，和其他依赖的软件和包(例如 &lt;code&gt;Pandoc&lt;/code&gt;, &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;, &lt;code&gt;rmarkdown&lt;/code&gt;, &lt;code&gt;rticle&lt;/code&gt;, &lt;code&gt;knitr&lt;/code&gt;等)，作为准备。详见 &lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;bookdown 官方手册&lt;/a&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;p&gt;准备完毕后，就可以安装 bookdownplus 了。可以安装稳定版：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;bookdownplus&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;或开发版：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/bookdownplus&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;生成模板文件&lt;/h2&gt;
&lt;p&gt;接着，在 R 中运行下面的代码：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdownplus::bookdownplus()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这时，在你的工作目录（&lt;code&gt;getwd()&lt;/code&gt;），会得到一些模板文件（如 &lt;code&gt;index.Rmd&lt;/code&gt;，&lt;code&gt;body.Rmd&lt;/code&gt;， &lt;code&gt;bookdownplus.Rproj&lt;/code&gt;） 和文件夹。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;编译成书&lt;/h2&gt;
&lt;p&gt;用 RStudio 打开 &lt;code&gt;bookdownplus.Rproj&lt;/code&gt;文件，然后按 &lt;code&gt;ctrl+shift+b&lt;/code&gt;，Duang！你就得到模板书 &lt;code&gt;*.pdf&lt;/code&gt;了！保存在 &lt;code&gt;_book/&lt;/code&gt; 文件夹里。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;你的文字&lt;/h2&gt;
&lt;p&gt;在 &lt;code&gt;index.Rmd&lt;/code&gt; 和 &lt;code&gt;body.Rmd&lt;/code&gt; 里写你自己的文字，享受写书的快乐吧！自古皆死，不朽者文。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更多输出格式&lt;/h2&gt;
&lt;p&gt;模板默认生成的书是pdf格式。‘bookdownplus’ 从 1.0.3 开始，可以很方便地输出更多格式，包括国内最常见的 ’word’格式，网页’html’格式和电子书’epub’格式，只需运行：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdownplus::bookdownplus(template = &amp;#39;article&amp;#39;, more_output = c(&amp;#39;html&amp;#39;, &amp;#39;word&amp;#39;, &amp;#39;epub&amp;#39;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;就可以在 &lt;code&gt;_book/&lt;/code&gt; 文件夹里看到这些文件了。&lt;/p&gt;
&lt;p&gt;网页格式可以极其方便地免费发布到 &lt;a href=&#34;https://bookdown.org&#34;&gt;bookdown.org&lt;/a&gt;，只需运行：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdown::publish_book()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里是 bookdown 书籍的大本营。截至 2017 年 6 月，我有三本书被放置在这个网站的首页。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更多建议&lt;/h2&gt;
&lt;p&gt;我开发的另外两个 R 包可以配合 ‘bookdown’ 使用：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;mindr &lt;span class=&#34;citation&#34;&gt;(Zhao 2017b)&lt;/span&gt;，可以从 markdown 或 R markdown 格式的书稿中提取纲要，并且生成思维导图。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;pinyin &lt;span class=&#34;citation&#34;&gt;(Zhao 2017c)&lt;/span&gt;，可以为书稿的章节标题自动生成&lt;a href=&#34;https://bookdown.org/yihui/bookdown/cross-references.html&#34;&gt;‘{#ID}’&lt;/a&gt;。如果标题里含有汉字，就会自动转换成拼音。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体用法见他们的帮助信息。这两个包已经在 CRAN正式发布，安装命令是：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;#39;mindr&amp;#39;)
install.packages(&amp;#39;pinyin&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更改模板&lt;/h2&gt;
&lt;p&gt;上述快速入门得到的模板文档是默认的论文文档。只需在上述步骤里为 &lt;code&gt;bookdownplus()&lt;/code&gt; 函数指定模板名称，就可以用类似的操作得到其他模板的示范文档，如：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdownplus::bookdownplus(template = &amp;#39;poem&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下面展示一些模板。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;article&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;article_mdpi1&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article_mdpi.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;article_zh&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article_zh.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;calendar&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+calendar.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;chemistry&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+chemistry.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;guitar&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+guitar.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;journal&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+journal.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;mail&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+mail.jpg&#34; /&gt;

&lt;/div&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+mail2.png&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;poem&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poem.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;thesis_classic&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_classic.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;thesis_ubt&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_ubt.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;thesis_zju&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_zju.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;yihui_demo&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_demo.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;yihui_mini&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_mini.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;yihui_zh&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_zh.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;poster&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poster_ocean.jpg&#34; /&gt;

&lt;/div&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poster_eco.jpg&#34; /&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更新记录&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;2017-06-21. &lt;a href=&#34;https://cran.r-project.org/web/packages/bookdownplus/index.html&#34;&gt;Released on CRAN&lt;/a&gt;!&lt;/li&gt;
&lt;li&gt;2017-06-21. &lt;strong&gt;Version 1.0.2.&lt;/strong&gt; Resubmitted to CRAN!&lt;/li&gt;
&lt;li&gt;2017-06-21. &lt;strong&gt;Version 1.0.2.&lt;/strong&gt; Resubmitted to CRAN!&lt;/li&gt;
&lt;li&gt;2017-06-21. &lt;strong&gt;Version 1.0.1.&lt;/strong&gt; Submitted to CRAN!&lt;/li&gt;
&lt;li&gt;2017-06-14. &lt;strong&gt;Version 0.0.1.&lt;/strong&gt; A bug fixed.&lt;/li&gt;
&lt;li&gt;2017-05-15. &lt;strong&gt;Version 0.0.0.&lt;/strong&gt; A very preliminary version.&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;refs&#34; class=&#34;references&#34;&gt;
&lt;div id=&#34;ref-R-bookdown&#34;&gt;
&lt;p&gt;Xie, Yihui. 2016. &lt;em&gt;Bookdown: Authoring Books and Technical Documents with R Markdown&lt;/em&gt;. Boca Raton, Florida: Chapman; Hall/CRC. &lt;a href=&#34;https://github.com/rstudio/bookdown&#34; class=&#34;uri&#34;&gt;https://github.com/rstudio/bookdown&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-bookdownplus&#34;&gt;
&lt;p&gt;Zhao, Peng. 2017a. &lt;em&gt;Bookdownplus: Generate Varied Books and Documents with R ’Bookdown’ Package&lt;/em&gt;. &lt;a href=&#34;https://CRAN.R-project.org/package=bookdownplus&#34; class=&#34;uri&#34;&gt;https://CRAN.R-project.org/package=bookdownplus&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-mindr&#34;&gt;
&lt;p&gt;———. 2017b. &lt;em&gt;Mindr: Convert Files Between Markdown or Rmarkdown Files and Mindmaps&lt;/em&gt;. &lt;a href=&#34;https://github.com/pzhaonet/mindr&#34; class=&#34;uri&#34;&gt;https://github.com/pzhaonet/mindr&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-pinyin&#34;&gt;
&lt;p&gt;———. 2017c. &lt;em&gt;Pinyin: Convert Chinese Characters into Pinyin&lt;/em&gt;. &lt;a href=&#34;https://github.com/pzhaonet/pinyin&#34; class=&#34;uri&#34;&gt;https://github.com/pzhaonet/pinyin&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R bookdown&#43;: 用 R bookdown 写期刊论文、日记、信件、日历、吉他书、化学方程式</title>
      <link>http://www.pzhao.org/zh/post/bookdown-plus/</link>
      <pubDate>Tue, 09 May 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/bookdown-plus/</guid>
      <description>&lt;p&gt;&lt;strong&gt;注意：本文所述的&lt;code&gt;bookdown+&lt;/code&gt;这个项目已经停止开发，继承者是我新开的R包项目&lt;a href=&#34;https://github.com/pzhaonet/bookdownplus&#34;&gt;bookdownplus&lt;/a&gt; ，这是因为我学会了写R包。当然，说不定有些朋友不喜欢安装R包，喜欢下载个文件夹直接免安装用，那么本文所述的方法仍然可以继续使用，只是我不再更新了而已。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;R bookdown 能做的事情很多，可是那些功能迟迟不来，我只好自己动手，写了个 &lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;bookdown+&lt;/a&gt;，目前大体实现了用 bookdown 写期刊论文、化学分子式、信件、日记、日历等功能。当然，有些还没完全实现，革命不够彻底，带着浓重的&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;旧社会的气息。革命尚未成功，同志仍需努力。&lt;/p&gt;
&lt;p&gt;下面是 &lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;bookdown+&lt;/a&gt; 的简介和快速使用方法。&lt;/p&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;背景&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;R bookdown+&lt;/a&gt;，听起来像是跟R&lt;span class=&#34;citation&#34;&gt;[@R-base]&lt;/span&gt;的扩展包&lt;code&gt;bookdown&lt;/code&gt;&lt;span class=&#34;citation&#34;&gt;[@R-bookdown]&lt;/span&gt;有关吧?&lt;/p&gt;
&lt;p&gt;一点没错！我们知道，&lt;code&gt;bookdown&lt;/code&gt;天生是个用来写编程书籍的称手工具。只是，这仅仅是硬币的一面。&lt;code&gt;bookdown&lt;/code&gt;的功能远远不止如此。它就像一个美味的蛋糕，我等啊等啊，等着谁把它切开，实在等不及了，就自己下手吧。所以，我弄了个&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;bookdown+&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;bookdown+&lt;/a&gt;是&lt;code&gt;bookdown&lt;/code&gt;的扩展。我数年前收集了一些&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;模板，现在我把他们整理到&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;bookdown+&lt;/a&gt;里，这样就可以开开心心在&lt;code&gt;bookdown&lt;/code&gt;的环境里做喜欢的事情。&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;bookdown+&lt;/a&gt; 展示了硬币的另一面：你可以用它来写写期刊论文、化学分子式、信件、日历、甚至日记。&lt;/p&gt;
&lt;p&gt;另一方面，我从个人角度对&lt;code&gt;bookdown&lt;/code&gt;的使用做了简化。官方提供的&lt;code&gt;bookdown&lt;/code&gt;模板虽然很好用，但对新手来说略显繁琐，需要：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在&lt;code&gt;index.Rmd&lt;/code&gt;和&lt;code&gt;_output.yml&lt;/code&gt;两个文件里设置yaml，&lt;/li&gt;
&lt;li&gt;需要在&lt;code&gt;_bookdown.yml&lt;/code&gt;里设置文件名；&lt;/li&gt;
&lt;li&gt;对中文用户来说，还得跟LaTeX打交道，需要考虑&lt;code&gt;before_body.tex&lt;/code&gt;, &lt;code&gt;after_body&lt;/code&gt;, &lt;code&gt;preamble.tex&lt;/code&gt;里面的设置。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些操作可能让新手望而生畏。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;R bookdown+&lt;/a&gt;用起来就容易多了，只需在一个叫做&lt;code&gt;_runme.R&lt;/code&gt;的文件里设置好书名、作者，选好模板，binggo！就可以开始放心写自己的文字了。&lt;/p&gt;
&lt;p&gt;功能扩展，操作简化，这就是&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus&#34;&gt;R bookdown+&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在不久的未来，肯定会出现很多官方的bookdown模板，但是我不想等了。你要是也等不及，就跟我来一起使用或开发[bookdown+]吧！&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;快速入门&lt;/h1&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;预备&lt;/h2&gt;
&lt;p&gt;在开始前，你需要安装 R, RStudio, bookdown，和其他依赖的软件和包(例如 &lt;code&gt;Pandoc&lt;/code&gt;, &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;, &lt;code&gt;rmarkdown&lt;/code&gt;, &lt;code&gt;rticle&lt;/code&gt;, &lt;code&gt;knitr&lt;/code&gt;等)。详见&lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;bookdown官方手册&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;准备好后，从Github&lt;a href=&#34;https://github.com/pzhaonet/bookdown-plus/archive/master.zip&#34;&gt;下载&lt;code&gt;bookdown+&lt;/code&gt;&lt;/a&gt;压缩文件。解压缩到你的电脑里，在得到的文件夹里找到 &lt;code&gt;_start.Rproj&lt;/code&gt;文件，双击就会在RStudio里打开一个项目。&lt;/p&gt;
&lt;p&gt;文件夹里还有个&lt;code&gt;_runme.R&lt;/code&gt;文件。你可以双击打开并运行。下面是对这个文件里代码的详细解释。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;第1步：标题和作者&lt;/h2&gt;
&lt;p&gt;改成你自己书的标题和作者名。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;title &amp;lt;- &amp;#39;bookdown+: Authoring Articles, Mails, Guitar books, Chemical Molecular Formulae and Equations with R bookdown&amp;#39;
author &amp;lt;- &amp;#39;Peng Zhao&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;2-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;第2步: 模板&lt;/h2&gt;
&lt;p&gt;在给定的可用模板里选择你想要的。这里我们选第8个。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;templates  &amp;lt;- c(&amp;#39;article&amp;#39;,     #1, academic article
                &amp;#39;article_zh&amp;#39;,  #2, academic article in Chinese
                &amp;#39;calendar&amp;#39;,    #3, calendar, in progress
                &amp;#39;chemistry&amp;#39;,   #4, chemical molecular formulae and equations
                &amp;#39;chemistry_zh&amp;#39;,#5, in Chinese,
                &amp;#39;guitar&amp;#39;,      #6, guitar book
                &amp;#39;mail&amp;#39;,        #7, mail, in progress
                &amp;#39;journal&amp;#39;,     #8, laboratory journal, or personal diary
                &amp;#39;mini&amp;#39;,        #9, a mini demo by Yihui
                &amp;#39;original&amp;#39;,    #10, the original demo by Yihui
                &amp;#39;book_zh&amp;#39;      #11, the demo in Chinese by Yihui
)
template &amp;lt;- templates[8]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;运行 &lt;code&gt;fun/build.R&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;source(&amp;#39;fun/build.R&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;3-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;第3步: 成书&lt;/h2&gt;
&lt;p&gt;现在按下 &lt;code&gt;ctrl+shift+b&lt;/code&gt; 快捷键，你就会在新生成的&lt;code&gt;book/&lt;/code&gt;文件里找到一本示例书。打开看看吧！&lt;/p&gt;
&lt;p&gt;你自己的文字只需在&lt;code&gt;body.Rmd&lt;/code&gt;修改，写完后重复本步即可。&lt;/p&gt;
&lt;p&gt;祝你玩得愉快！&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;模板效果展示&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;article&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;article_mdpi1&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article_mdpi.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;article_zh&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article_zh.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;calendar&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+calendar.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;chemistry&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+chemistry.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;guitar&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+guitar.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;journal&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+journal.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;mail&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+mail.jpg&#34; /&gt;

&lt;/div&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+mail2.png&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;poem&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poem.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;thesis_classic&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_classic.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;thesis_ubt&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_ubt.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;thesis_zju&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_zju.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;yihui_demo&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_demo.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;yihui_mini&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_mini.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;yihui_zh&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_zh.jpg&#34; /&gt;

&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;poster&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poster_ocean.jpg&#34; /&gt;

&lt;/div&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poster_eco.jpg&#34; /&gt;

&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R bookdown 写学术论文</title>
      <link>http://www.pzhao.org/zh/post/r-bookdown/</link>
      <pubDate>Fri, 24 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/r-bookdown/</guid>
      <description>&lt;p&gt;&lt;em&gt;1&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;最近，我使用 R 语言的 bookdown 扩展包接连做了三件事：先是整理出一本跟&lt;a href=&#34;http://dapengde.com/archives/19122&#34; target=&#34;_blank&#34;&gt; R 语言有关的书&lt;/a&gt;，然后把博客的帖子整理出一本&lt;a href=&#34;http://dapengde.com/archives/19150&#34; target=&#34;_blank&#34;&gt;纯文本的中文书&lt;/a&gt;，这两天我又在用它来写一篇打算投稿的学术期刊论文。&lt;/p&gt;

&lt;p&gt;用 bookdown 写英文的科研期刊论文，配置起来是很简单的，只需在bookdown提供的&lt;a href=&#34;https://github.com/rstudio/bookdown-demo&#34; target=&#34;_blank&#34;&gt;官方演示文档&lt;/a&gt;里做简单修改如下：&lt;/p&gt;

&lt;p&gt;首先，index.Rmd 的文件头 yaml 部分，将 documentclass 设为 article，并关闭图表目录和文章目录即可：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;documentclass: article
lof: no
lot: no
toc: no
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;然后，_output.yml 文件内容全部清空，然后添加指令生成 word_document2 文档、 pdf_document2 文档和 html_document2 文档，参数为default即可。也就是说，_output.yml 文件内容只需3行：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;bookdown::word_document2: default 
bookdown::pdf_document2: default
bookdown::html_document2: default
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;就能生成足够美观的三种格式的文档了。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;2&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;写论文期间发生了一件事，让我饱受刺激。&lt;/p&gt;

&lt;p&gt;我的科研论文有个计算公式，昨天发现其中一个数值不小心敲错了。后续计算都是建立在这个计算的基础上，所以后续计算全错。虽然不影响结论，但严格来讲，论文里所有的数据都得改。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://blogs.helmholtz.de/hejus/wp-content/uploads/sites/15/2014/10/writinghardwork.jpg&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;放在以前，这是让人崩溃的灾难。幸亏，这次我写论文用了 bookdown。&lt;/p&gt;

&lt;p&gt;这篇研究论文是用 Rmd 格式写的，里面绝大部分数据不是手动敲进去的，而是调用了 R 代码，图表也是用 R 代码插入的，走的是“可重复性研究”的思路。现在，我只要把 R 代码里那个敲错的数据改过来，运行代码，后续计算就全部自动更新，而论文 Rmd 文件里调用代码的输出结果，会在导出的 pdf 或 word 文档也相应自动更新，节省了大量时间，还减少了敲数字或拷贝粘贴出错的可能，怎一个爽字了得！&lt;/p&gt;

&lt;p&gt;在 bookdown 发布之前，其实 rmarkdown 也有这个功能，但因为公式、交叉引用、参考文献方面的欠缺， rmarkdown 对我来讲比较鸡肋，一直未能用在论文写作上。现在有了 bookdown ，可以甩开膀子使劲儿用。可以说， bookdown 把 rmarkdown 原有的价值做了更充分的挖掘。&lt;/p&gt;

&lt;p&gt;写学术论文的过程比较煎熬，多年来我都不享受。而经过昨天的事件，我在写论文的过程里发现了很多快乐。我甚至有种变态心理，希望发现更多的计算错误，然后稍微一改，“叮！”论文全部自动更新。&lt;/p&gt;

&lt;p&gt;老子陪你玩。好享受。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;3&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;二娃德生前不久生病了，医生开了止咳糖浆。德生开始很拒绝，后来喜欢上了糖浆的味道。即使病好了，也经常要求喝止咳糖浆。&lt;/p&gt;

&lt;p&gt;我问：“这是药，咳嗽才能喝。你咳嗽了吗？”&lt;/p&gt;

&lt;p&gt;德生：“咳咳！咳咳！我咳嗽啦！”&lt;/p&gt;

&lt;p&gt;学术论文写作使用 bookdown ，就是止咳药里添加的糖浆味道，让人不咳嗽的时候也想喝两盅，上瘾。&lt;/p&gt;

&lt;p&gt;PS：今天在google.com以“bookdown”为关键词搜中文网页，我的博客已经出现在首页啦！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>R bookdown 语法标记速查</title>
      <link>http://www.pzhao.org/zh/post/bookdown-cheatsheet/</link>
      <pubDate>Tue, 14 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/bookdown-cheatsheet/</guid>
      <description>&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;快速开始&lt;/h2&gt;
&lt;div id=&#34;r-bookdown-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;R bookdown 是什么&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;一个用来写书写文章的软件。&lt;/li&gt;
&lt;li&gt;比Word更美观，比LaTeX更易用，比Markdown格式更丰富。&lt;/li&gt;
&lt;li&gt;可以方便地插入目录、图表、交叉引用、脚注、索引。&lt;/li&gt;
&lt;li&gt;可以方便地插入公式、参考文献、R代码。&lt;/li&gt;
&lt;li&gt;可以生成漂亮的pdf、word和网页文件。&lt;/li&gt;
&lt;li&gt;撰写可重复性报告的不二之选。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;安装&lt;/h3&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;a href=&#34;https://cran.r-project.org/bin/windows/base/&#34;&gt;下载R&lt;/a&gt;并安装。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.rstudio.com/products/rstudio/download/&#34;&gt;下载RStudio&lt;/a&gt;并安装。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ctex.org/CTeXDownload&#34;&gt;下载CTEX&lt;/a&gt;并安装。建议安装完整版。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://pandoc.org/installing.html&#34;&gt;下载Pandoc&lt;/a&gt;并安装。&lt;/li&gt;
&lt;li&gt;运行RStudio。在左上面板的代码窗口输入并运行以下代码（安装bookdown扩展包）：&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;bookdown&amp;quot;)
install.packages(&amp;#39;servr&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;好了，安装完毕。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;从模板开始&lt;/h3&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;下载模板文档（到下载页面点击&lt;code&gt;Clone or download&lt;/code&gt; - &lt;code&gt;Download ZIP&lt;/code&gt;）：&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;如果你要写英文文档，那么下载&lt;a href=&#34;https://github.com/rstudio/bookdown-demo&#34;&gt;通用模板&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;如果你要写中文文档，那么下载&lt;a href=&#34;https://github.com/yihui/bookdown-chinese&#34;&gt;中文模板&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;将模板文档解压缩到任意文件夹。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在解压缩后得到的文件里找到扩展名为.Rproj的文件。双击，默认会用RSudio打开。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在RStudio右上面板点击&lt;code&gt;Build&lt;/code&gt;标签，再点击&lt;code&gt;build book&lt;/code&gt;。好了，模板书出现在名为&lt;code&gt;_book&lt;/code&gt;的子文件夹里。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在RStudio右下面板里会看到该文件夹里的文件，其中有一些扩展名为.Rmd的文件。逐个点击打开，把其中的内容修改成你自己的内容。除了index.Rm外，不需要的.Rmd文件可以删掉。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;重复第4步，就得到了你自己的书。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;对照一下.Rmd的文件内容和生成的文档，体会两者之间是如何对应的。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;基本标记&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;标记&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;输出&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;*斜体*&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;em&gt;斜体&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;**粗体**&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;strong&gt;粗体&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;CO~2~&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CO&lt;sub&gt;2&lt;/sub&gt;下标&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;R^2^&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;R&lt;sup&gt;2&lt;/sup&gt;上标&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;$E = mc^2$&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;span class=&#34;math inline&#34;&gt;\(E = mc^2\)&lt;/span&gt; 行内公式（双美元符号为行间公式）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;[大鹏志](http://dapengde.com)&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;a href=&#34;http://dapengde.com&#34;&gt;大鹏志&lt;/a&gt;超级链接&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;&amp;lt;dapengde@live.com&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;a href=&#34;mailto:dapengde@live.com&#34;&gt;dapengde@live.com&lt;/a&gt; 邮件链接&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;![](http图片链接)&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;插入图片&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;&amp;gt; 引用文字&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;引用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;`代码`&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;代码&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;# 第一章&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;章节标题&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;1. 首先，...&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;带编号的列表&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;- 首先&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;不带编号的列表&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;^[脚注]&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;脚注&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;章节划分、编号和交叉引用&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;# (PART) Part I {-} 
# (APPENDIX) Appendix {-} 
# References {-}
# chapter {#ID}
## section {#ID}
# chapter {#ID .unnumbered}

\@ref(ID)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;图表&lt;/h2&gt;
&lt;p&gt;第一种插图：嵌入的R代码作图：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```{r, fig.cap=&amp;#39;caption&amp;#39;, out.width=&amp;#39;80%&amp;#39;, fig.align=&amp;#39;center&amp;#39;, echo=FALSE}
plot(1:10)
```&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;\@ref(fig:fig1)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;第二种插图：将现成的图片文件插进来：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```{r img1, fig.cap=&amp;#39;caption&amp;#39;, out.width=&amp;#39;80%&amp;#39;, fig.align=&amp;#39;center&amp;#39;, echo=FALSE}
knitr::include_graphics(&amp;quot;images/img1.png&amp;quot;)
```&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;\@ref(fig:img1)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;第三种插图：用markdown基础语法：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;![caption](images/img1.png)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;第一种表格：直接用markdown语法画表格。输入：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;第一列标题  第二列标题
----------- ----------
第一行1     第一行2
第二行1     第二行2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;第一列标题&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;第二列标题&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;第一行1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;第一行2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;第二行1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;第二行2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;第二种表格：用R函数展示表格：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```{r tab1, tidy=FALSE, echo=FALSE}
knitr::kable(
  head(iris, 20), caption = &amp;#39;Here is a nice table!&amp;#39;,
  booktabs = TRUE
)
```&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;\@ref(tab:tab1)&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;参考文献&lt;/h2&gt;
&lt;p&gt;参考文献信息需要保存在.bib文件里。&lt;/p&gt;
&lt;p&gt;引用文献条目：&lt;code&gt;[@R-bookdown]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;参考文献列表：&lt;code&gt;# References {-}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;生成R包参考文献库：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::write_bib(c(&amp;quot;knitr&amp;quot;, &amp;quot;stringr&amp;quot;), &amp;quot;&amp;quot;, width = 60)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;定义、定理、示例等环境&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;环境全称：theorems   lemma   definition  corollary   proposition example
引用简称：thm          lem   def         cor         prp         ex&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;```{环境全称, label=&amp;#39;&amp;#39;, name=&amp;quot;&amp;quot;}
内容
```&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;\@ref(引用简称:label)&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;word&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;输出word文档&lt;/h2&gt;
&lt;p&gt;在_output.yml里添加一行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bookdown::word_document2: default &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注意，&lt;code&gt;default&lt;/code&gt;这个词是不能少的。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;公式编号和引用&lt;/h2&gt;
&lt;p&gt;word文档里的公式的编号和交叉引用，可以使用行内公式，公式前用圆括号里加公式标签。例如，输入：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(@eq-mc) $E = mc^2$

I like Eq. (@eq-mc) so much that I am falling love with her.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到：&lt;/p&gt;
&lt;ol class=&#34;example&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;span class=&#34;math inline&#34;&gt;\(E = mc^2\)&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I like Eq. (1) so much that I am falling love with her.&lt;/p&gt;
&lt;p&gt;pdf文档里的公式编号和交叉引用，建议使用公式环境。例如，输入：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;\begin{equation} 
E = mc^2
  (\#eq:mc2)
\end{equation} 

I like Eq. \@ref(eq:mc2) so much that I am falling love with her.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更进一步&lt;/h2&gt;
&lt;p&gt;bookdown的详细介绍见&lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;使用手册&lt;/a&gt;。我的使用体验写成了三篇帖子：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://dapengde.com/archives/19122&#34;&gt;用bookdown写书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dapengde.com/archives/19190&#34;&gt;用bookdown写学术论文&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dapengde.com/archives/19150&#34;&gt;用bookdown写文学作品&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>不可挡的bookdown</title>
      <link>http://www.pzhao.org/zh/post/inresistible-bookdown/</link>
      <pubDate>Mon, 13 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/inresistible-bookdown/</guid>
      <description>&lt;p&gt;最近，我打算把博客上关于R语言的帖子整理成一本书，希望弄得帅气一点，整齐一点，将来容易维护一点。涌进脑子的第一个念头是 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; ，第二个念头是想吐。&lt;/p&gt;
&lt;p&gt;是的，虽然我推崇 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; ，觉得这个工具排出来的文档很漂亮，但自从弄完博士论文&lt;a href=&#34;#fn1&#34; class=&#34;footnoteRef&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; 之后，除了帮别人备份一下博客&lt;a href=&#34;#fn2&#34; class=&#34;footnoteRef&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt; 、往论文里插几个公式和玩玩吉他谱&lt;a href=&#34;#fn3&#34; class=&#34;footnoteRef&#34; id=&#34;fnref3&#34;&gt;&lt;sup&gt;3&lt;/sup&gt;&lt;/a&gt;，我再也没碰过她。惰性开始代替折腾，我宁可点点鼠标写出一份不太美观的Word文档，也不想面对 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 那让人头疼的代码。大概我是真上了岁数罢。&lt;/p&gt;
&lt;p&gt;对于 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;，我想自己的内心深处是怀有恐惧的。她的美丽让我着迷，她的复杂令人生畏。&lt;/p&gt;
&lt;p&gt;所以，这次整理博客，我决定在Word里做。用了这么多年，对Word的秉性我算是略知一二，从一开始就用主控文档和子文档的方式管理，以防单个文档太大而死机；从标题到R代码，我预先都设置好了样式以及样式的快捷键，方便调整格式；每写几句话，就左手抽筋一样ctrl+s一下，以防万一。其间，发现帖子里有些R代码要修改调试，我就咬牙忍着在RStudio和Word之间频繁拷贝粘贴的煎熬。反正换回 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 也是一样想吐，既来之则安之，嫁鸡随鸡嫁狗随狗吧。&lt;/p&gt;
&lt;p&gt;我天真地以为，这样就万无一失了。&lt;/p&gt;
&lt;p&gt;有一天，我正在Word里改某篇帖子，改之前我留意了一下总页数是160多页。改了几个段落之后，我惊奇地发现，总页数成了220多页。再仔细找，发现有些代码区的文字无缘无故变成了乱码，一乱就新增几十页。进而测试发现，我正在好端端敲字，Word左下角的页数突然就刷刷地增加了，翻回去看，乱码已经被填进去了。试了好几次，都是这样。我甚至给文档权限设置为凭密码修订，仍然挡不住Word疯狂的脚步。&lt;/p&gt;
&lt;p&gt;对着那自动呼呼上涨的页码，我想：认识十来年，想不到对你依然不了解。&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 的倩影再度闪现在我脑海。她虽然复杂，但至少源文件是纯文本，不会胡来，不像Word这么没有底线。&lt;/p&gt;
&lt;p&gt;为什么就没有个像Word那么界面简单，像 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 那么源码单纯的两全其美方案呢？&lt;/p&gt;
&lt;p&gt;“叮”的一声，脑子里冒出刚刚发布不久的bookdown&lt;span class=&#34;citation&#34;&gt;(Xie 2016b)&lt;/span&gt;&lt;span class=&#34;citation&#34;&gt;(Xie 2016a)&lt;/span&gt;。这是R语言的一个扩展包，专门用来写书，可以看作是R markdown的升级版。我的博客原文都是以markdown写成的，弄到bookdown里应当是顺理成章的事。只是大约因为上了岁数，我近几年对新工具越来越排斥，所以一直懒得尝试。这次被逼无奈，要不就试试吧。反正都是折腾，与其把精力花在让人心碎的Word里或让人心焦的 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 里，还不如花在崭新的bookdown里。就算是有缺点，还能比Word和 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 更不能忍么？&lt;/p&gt;
&lt;p&gt;然后，刷！一晃十来天。春宵苦短日高起，从此君王不早朝。&lt;/p&gt;
&lt;p&gt;这大半个月，我陶醉在bookdown的魅力里不可自拔。bookdown秉承拿来主义，把一大串工具链里的精华整合起来，让以前繁琐的步骤无比简化，怎一个爽快了得！她近乎完美地解决了我遇到的所有问题：纯文本操作，满足了我的控制欲；在导出完美的网页格式同时，还能导出为pdf和word文档，足够拿出来跟依赖Word的人交流；公式、脚注、交叉引用、目录、参考文献，功能齐全而不臃肿，格式标记简洁而优雅。我不再需要为Word的自以为是而抑郁，也不再需要为 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 的纷繁复杂而烦恼了。&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://dapengde.com/wp-content/uploads/2017/03/2017-03-14.png&#34; alt=&#34;我用bookdown生成的书稿&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;我用bookdown生成的书稿&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;一种亲切之美扑面而来，我感到无法抗拒无法阻挡。有了bookdown在手，写东西我还需要别的什么呢？想来想去，我不需要别的了。在Word和&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 之间摇摆了十来年，到头来才发现bookdown才是真爱。&lt;/p&gt;
&lt;p&gt;不过，bookdown绝非完美。如果不了解rmarkdown&lt;span class=&#34;citation&#34;&gt;(Allaire et al. 2017)&lt;/span&gt;，没见过 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; ，没听过pandoc，没用过knitr &lt;span class=&#34;citation&#34;&gt;(Xie 2016c)&lt;/span&gt;&lt;span class=&#34;citation&#34;&gt;(Xie 2015)&lt;/span&gt;&lt;span class=&#34;citation&#34;&gt;(Xie 2014)&lt;/span&gt;，那么bookdown对新手来说，门槛仍然有点高。幸运的是，这几样工具我都用过，那么投入bookdown的怀抱就属于水到渠成了。即便如此，在使用初期仍然遇到了一些难以解决的问题，好在有bookdown的开发者益辉同学&lt;a href=&#34;#fn4&#34; class=&#34;footnoteRef&#34; id=&#34;fnref4&#34;&gt;&lt;sup&gt;4&lt;/sup&gt;&lt;/a&gt; 和其他同道中人热心地提供帮助，才能一路披荆斩棘，最后走上了幸福的康庄大道。&lt;/p&gt;
&lt;p&gt;下面，我把我那些散落在各处的提问和解决方法汇总在这里。&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;编译&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;起初我连bookdown的界面都没搞清楚，想编译却不知该点哪儿。益辉一直说build，build，我一直以为是菜单栏的build，后来才看到是在RStudio右上面板的build按钮。&lt;/p&gt;
&lt;p&gt;bookdown是可以直接导出为word文档的。这么重要的功能，却隐藏得很深，在官方文档里都没有强调。导出方法是，在_output.yml里添加一行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bookdown::word_document2: default &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注意，&lt;code&gt;default&lt;/code&gt;这个词是不能少的，不管它是不是默认。我也不知道为什么。&lt;/p&gt;
&lt;p&gt;导出的word文档相当令人满意，参考文献的版式、图表的交叉引用都堪称完美。唯一不足之处，是公式的编号和交叉引用。bookdown的官方文档&lt;a href=&#34;#fn5&#34; class=&#34;footnoteRef&#34; id=&#34;fnref5&#34;&gt;&lt;sup&gt;5&lt;/sup&gt;&lt;/a&gt;给出的公式书写方案是，利用 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 的公式环境来编号和引用，这一点在生成pdf时没问题，但生成word时，会发现别说编号，连公式本身都消失了。这大概是因为pandoc未能将公式环境正确转换的缘故。解决办法是，不使用公式环境，而使用行内公式（即公式前后有一个美元符号），公式前面用圆括号里加公式标签就可以了。例如，输入：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(@eq-mc) $E = mc^2$

I like Eq. (@eq-mc) so much that I am falling love with her.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到：&lt;/p&gt;
&lt;ol class=&#34;example&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;span class=&#34;math inline&#34;&gt;\(E = mc^2\)&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I like Eq. (1) so much that I am falling love with her.&lt;/p&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;中文支持&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;益辉专门为中文弄了个bookdown的中文示例文档&lt;a href=&#34;#fn6&#34; class=&#34;footnoteRef&#34; id=&#34;fnref6&#34;&gt;&lt;sup&gt;6&lt;/sup&gt;&lt;/a&gt;，编译需要的tex文件全都写好了，简直太体贴。我照猫画虎，却意外出现了编译错误，后来把preamble.tex的15到27行删掉，把index.Rmd里的 &lt;code&gt;colorlinks: yes&lt;/code&gt; 改为 no，中文文档就华丽丽地编译出来了。&lt;/p&gt;
&lt;p&gt;其间还出过其他的意外。我Windows的区域设置是German(Austria)，导致导出的文档里有乱码，只要把区域设置改为Chinese(PRC)就解决了大部分的乱码问题了。如果仍然有没解决的，那么将所有能设置编码的地方就全部设置成UTF-8，例如&lt;code&gt;readLines()&lt;/code&gt;函数的encoding参数，&lt;code&gt;writeLines()&lt;/code&gt;的useBytes参数等。&lt;/p&gt;
&lt;p&gt;bookdown默认是按章节标题来生成网页文件名称，纯英文标题和纯中文标题都没问题，但对中英混合的标题，bookdown会只取其中的英文部分为html文件命名。如果每个章节标题里都有个R字母，那么生成的html文件就都叫R.html，编译时就会报错。解决办法是给heading添加{#ID}，让编译生成的html文件以此ID命名。解决是解决了，但又出现无编号章节标题{#ID} 和{-}共存问题。这就不知道怎么搜了，只好继续骚扰益辉，得到的答案是 &lt;code&gt;{#identifier .unnumbered}&lt;/code&gt;。我就拿这个答案一搜，原来这一条明明白白写在pandoc的技术文档里，惭愧。&lt;/p&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;参考文献&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;导出的网页格式文件里，参考文献的默认风格是apalike，方法是在index.Rmd的文件头用yaml声明&lt;code&gt;biblio-style&lt;/code&gt;，得到的引用格式是“作者-年份”。我想改为数字编号引用，于是把上面改为plain或者ieeetr，但编译出来的网页文件仍然是apalike格式。益辉的答复是biblio-style仅对pdf生效；其他格式的文件需要用YAML或pandoc_args的csl选项——这个我懒得折腾了，按下不表。但即使是pdf文档，biblio-style设为plain或者ieeetr却编译失败。我忘了错误信息是什么了，好像大概是我的 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 出了点问题，后来改为unsrt风格就全好了。&lt;/p&gt;
&lt;p&gt;如果要引用R的扩展包，knitr提供了函数&lt;code&gt;write_bib()&lt;/code&gt;，用来生成指定扩展包的文献库，但是跟&lt;code&gt;citation()&lt;/code&gt;函数得到的经常不一致。例如：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::write_bib(c(.packages(), &amp;#39;lattice&amp;#39;, &amp;#39;ggplot2&amp;#39;), &amp;#39;packages.bib&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到的参考文献是扩展包在CRAN上的链接和版本信息，并且只能得到一个条目，这一点在bookdown的官方文档有说明。而&lt;code&gt;citation()&lt;/code&gt;函数得到的是扩展包作者建议的参考文献条目，例如&lt;code&gt;citation(&#39;lattice&#39;)&lt;/code&gt;就得到跟上面不同的返回结果。从尊重作者的角度来讲，我倾向于使用&lt;code&gt;citation()&lt;/code&gt;函数，所以自己写了个函数来代替&lt;code&gt;write_bib()&lt;/code&gt;：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mf_bib &amp;lt;- function(pkg = c(&amp;#39;base&amp;#39;), bibfile = &amp;#39;packages.bib&amp;#39;){
  pkg &amp;lt;- unique(pkg[order(pkg)])
  for (i in pkg){
    # if (class(try(citation(i))) == &amp;#39;try-error&amp;#39;) install.packages(i)
    cti &amp;lt;- toBibtex(citation(i))
    entryloc &amp;lt;- grep(pattern = &amp;#39;^@&amp;#39;, cti)
    cti[entryloc] &amp;lt;- gsub(&amp;#39;,&amp;#39;, paste(&amp;#39;R-&amp;#39;,i, &amp;#39;,&amp;#39;, sep =&amp;#39;&amp;#39;), cti[entryloc])
    symbol6loc &amp;lt;- grep(&amp;#39;&amp;amp;&amp;#39;, cti)
    for (j in symbol6loc) {
      cti[j] &amp;lt;- gsub(pattern = &amp;#39; &amp;amp;&amp;#39;, replacement = &amp;#39; \\\\&amp;amp;&amp;#39;, cti[j])
    }
    if (length(entryloc) &amp;gt; 1)  cti[entryloc] &amp;lt;- paste(substr(cti[entryloc], 1, nchar(cti[entryloc])-1), 1:length(entryloc), &amp;#39;,&amp;#39;, sep =&amp;#39;&amp;#39;)
    cat(cti, sep = &amp;#39;\n&amp;#39;, file = bibfile, append = TRUE)
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;运行这个函数，就能生成个bib格式的文献库文件。但这也有麻烦，就是有的扩展包作者建议的文献条目信息不齐全，还得我手动编辑；有的作者建议的条目太多，弄得参考文献列表很长，并且没必要。看来只能这两个函数搭配使用了。&lt;/p&gt;
&lt;p&gt;解决了上面这些问题，基本上就走上了正轨。对我来说，bookdown是个素颜版的 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; ，满足了99%的需求，而使用难度大概只有 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 的1%，性价比极高。这个“价”指的是弄懂她所花的精力和时间，bookdown本身当然是开源和免费的。想来是人上了岁数，不再看脸和身材，而是看重是否合得来吧。&lt;/p&gt;
&lt;p&gt;更重要的一点是，bookdown还在不断完善和发展中，作者益辉同学年富力强，将来有的是机会把bookdown弄得更好（得盯住他不要为求完美而歪到 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 的老路上）。只盼早日把R + RStudio + bookdown + Dropbox + Github + Google LaTeX lab都整合到云端，到时候只需把输入数据一上传，打开个网页就写论文，别的什么都不用管，那么连剩下那&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;%1的难度也都省了，天下太平。到了那个时候，使用bookdown就没有门槛，大家就会乐意用她来写诗集和小说了。&lt;/p&gt;
&lt;p&gt;这时问题又来了：称手的兵刃有了，然而妖精在哪里？&lt;/p&gt;
&lt;p&gt;注：本文是在R markdown环境下写成的。&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;参考文献：&lt;/p&gt;
&lt;div id=&#34;refs&#34; class=&#34;references&#34;&gt;
&lt;div id=&#34;ref-R-rmarkdown&#34;&gt;
&lt;p&gt;Allaire, JJ, Joe Cheng, Yihui Xie, Jonathan McPherson, Winston Chang, Jeff Allen, Hadley Wickham, Aron Atkins, Rob Hyndman, and Ruben Arslan. 2017. &lt;em&gt;Rmarkdown: Dynamic Documents for R&lt;/em&gt;. &lt;a href=&#34;https://CRAN.R-project.org/package=rmarkdown&#34; class=&#34;uri&#34;&gt;https://CRAN.R-project.org/package=rmarkdown&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-knitr3&#34;&gt;
&lt;p&gt;Xie, Yihui. 2014. “Knitr: A Comprehensive Tool for Reproducible Research in R.” In &lt;em&gt;Implementing Reproducible Computational Research&lt;/em&gt;, edited by Victoria Stodden, Friedrich Leisch, and Roger D. Peng. Chapman; Hall/CRC. &lt;a href=&#34;http://www.crcpress.com/product/isbn/9781466561595&#34; class=&#34;uri&#34;&gt;http://www.crcpress.com/product/isbn/9781466561595&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-knitr2&#34;&gt;
&lt;p&gt;———. 2015. &lt;em&gt;Dynamic Documents with R and Knitr&lt;/em&gt;. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. &lt;a href=&#34;http://yihui.name/knitr/&#34; class=&#34;uri&#34;&gt;http://yihui.name/knitr/&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-bookdown2&#34;&gt;
&lt;p&gt;———. 2016a. &lt;em&gt;Bookdown: Authoring Books and Technical Documents with R Markdown&lt;/em&gt;. Boca Raton, Florida: Chapman; Hall/CRC. &lt;a href=&#34;https://github.com/rstudio/bookdown&#34; class=&#34;uri&#34;&gt;https://github.com/rstudio/bookdown&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-bookdown1&#34;&gt;
&lt;p&gt;———. 2016b. &lt;em&gt;Bookdown: Authoring Books and Technical Documents with R Markdown&lt;/em&gt;. &lt;a href=&#34;https://github.com/rstudio/bookdown&#34; class=&#34;uri&#34;&gt;https://github.com/rstudio/bookdown&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-knitr1&#34;&gt;
&lt;p&gt;———. 2016c. &lt;em&gt;Knitr: A General-Purpose Package for Dynamic Report Generation in R&lt;/em&gt;. &lt;a href=&#34;http://yihui.name/knitr/&#34; class=&#34;uri&#34;&gt;http://yihui.name/knitr/&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;&lt;a href=&#34;http://dapengde.com/archives/17095&#34; class=&#34;uri&#34;&gt;http://dapengde.com/archives/17095&lt;/a&gt;&lt;a href=&#34;#fnref1&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;&lt;a href=&#34;http://dapengde.com/archives/16906&#34; class=&#34;uri&#34;&gt;http://dapengde.com/archives/16906&lt;/a&gt;&lt;a href=&#34;#fnref2&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn3&#34;&gt;&lt;p&gt;&lt;a href=&#34;http://dapengde.com/archives/18230&#34; class=&#34;uri&#34;&gt;http://dapengde.com/archives/18230&lt;/a&gt;&lt;a href=&#34;#fnref3&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn4&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://yihui.name/cn/&#34; class=&#34;uri&#34;&gt;https://yihui.name/cn/&lt;/a&gt;&lt;a href=&#34;#fnref4&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn5&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34; class=&#34;uri&#34;&gt;https://bookdown.org/yihui/bookdown/&lt;/a&gt;&lt;a href=&#34;#fnref5&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn6&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/yihui/bookdown-chinese&#34; class=&#34;uri&#34;&gt;https://github.com/yihui/bookdown-chinese&lt;/a&gt;&lt;a href=&#34;#fnref6&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
