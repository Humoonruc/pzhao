<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Hugo on Peng Zhao</title>
    <link>/zh/tags/hugo/index.xml</link>
    <description>Recent content in Hugo on Peng Zhao</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017 Peng Zhao</copyright>
    <atom:link href="/zh/tags/hugo/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Hugo 网站的浏览器小图标</title>
      <link>/zh/post/hugo-icon/</link>
      <pubDate>Wed, 19 Apr 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/hugo-icon/</guid>
      <description>&lt;p&gt;&lt;img src=&#34;/img/myicon.png&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;网站图标，就是上图的这些东东，用浏览器打开网站时显示在地址栏的顶端。R blogdown安装的hugo-academic主题，默认图标是个蓝色学位帽，挺好看的，不改也行，只是如果大家都用的话，泯然众人，识别度就低了。&lt;/p&gt;
&lt;p&gt;改的方式很简单：将你自己的图标图片保存为.png格式，并命名为icon.png，替换&lt;code&gt;\themes\hugo-academic\static\img\icon.png&lt;/code&gt;即可。&lt;/p&gt;
&lt;p&gt;update: 更好的方案来自&lt;a href=&#34;https://disqus.com/home/discussion/pzhao/hugo/#comment-3287700912&#34;&gt;yang Cao的提议&lt;/a&gt;：把icon.png放在&lt;code&gt;static/img/&lt;/code&gt;，避免在更新themes时将自定义图标覆盖。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Hugo 网站的RSS</title>
      <link>/zh/post/hugo-rss/</link>
      <pubDate>Tue, 18 Apr 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/hugo-rss/</guid>
      <description>&lt;p&gt;R blogdown 搭建的 Hugo 网站，小细节很多，可以一点一点完善，好在都不难搞定。今天添加了个RSS订阅按钮。&lt;/p&gt;
&lt;p&gt;自从 Google Reader 死后，我就觉得 RSS 没有多大趣味，就好像子期死后伯牙摔琴一样。但是，没有 RSS 提醒的话，还真不知道谁的博客更新了，于是就勉强用 feedly 凑合。眼看我的新网站构架基本完成，就在 feedly 里订阅了一下自己的网站，输入 &lt;code&gt;pzhao.org&lt;/code&gt;，发现没找到。嗯？研究一下才明白，我的主页完整地址是：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://pzhao.org/zh/&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这个路径对应的本地文件夹下面，不仅有个&lt;code&gt;index.html&lt;/code&gt;，还有个&lt;code&gt;index.xml&lt;/code&gt;，后者就是 RSS 订阅的文件。所以，在feedly添加：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://pzhao.org/zh/index.xml&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;就把我的新网站添进去了。这是订阅全站。如果只想订阅其中的博客，或新发表的学术文章，或新做的报告，那么：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://pzhao.org/zh/post/index.xml
http://pzhao.org/zh/publication/index.xml
http://pzhao.org/zh/talk/index.xml&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这个RSS链接，我该放到主页的什么位置，来方便网友订阅呢？我决定放到我的头像下面的社交按钮里。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/img/social.png&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;头像下的社交按钮是在&lt;code&gt;config.toml&lt;/code&gt;里设置的，只需添加个&lt;code&gt;[[params.social]]&lt;/code&gt;就可以了，图标去&lt;a href=&#34;https://fortawesome.github.io/Font-Awesome/icons/&#34;&gt;fa&lt;/a&gt;或&lt;a href=&#34;https://jpswalsh.github.io/academicons/&#34;&gt;ai&lt;/a&gt;两个包的主页找便是。
实在缺乏社交，只好把自己卡拉OK的录音和腾讯视频加进去凑数，代码如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  [[params.social]]
    icon = &amp;quot;rss&amp;quot;
    icon_pack = &amp;quot;fa&amp;quot;
    link = &amp;quot;http://www.pzhao.org/zh/index.xml&amp;quot;

  [[params.social]]
    icon = &amp;quot;music&amp;quot;
    icon_pack = &amp;quot;fa&amp;quot;
    link = &amp;quot;http://kg.qq.com/node/personal?uid=649d9d85212c3489&amp;quot;

  [[params.social]]
    icon = &amp;quot;video-camera&amp;quot;
    icon_pack = &amp;quot;fa&amp;quot;
    link = &amp;quot;http://v.qq.com/vplus/0f8190586a3f2f22a25e9827b38c171e&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>R blogdown 搭建个人博客或科研网站</title>
      <link>/zh/post/r-blogdown/</link>
      <pubDate>Tue, 11 Apr 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/r-blogdown/</guid>
      <description>&lt;p&gt;本文收录在《学 R 》一书的附录中。&lt;/p&gt;
&lt;p&gt;互联网时代有个自己的网站，就好像真实世界里有了自己的房子（服务器）和固定地址（域名）；自我介绍时附上自己的网站，就像生活里邀请朋友来访或者职场上递上名片，都甚为方便。然而，建立一个网站并不容易，涉及诸多领域的知识和技能，门槛比较高。好在，我们有万能的R语言，搭建网站只需几分钟，而并不需要多少网络知识。你甚至不用懂 R 语言是什么，照我下面说的做就行，包教包会，学不会免费再教。&lt;/p&gt;
&lt;p&gt;这里，我提供两个示范，演示如何使用 R 语言的 blogdown 扩展包&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;，用来搭建一个&lt;a href=&#34;http://dapengde.com/blogdown_demo_default/&#34;&gt;个人博客&lt;/a&gt;和一个&lt;a href=&#34;http://dapengde.com/blogdown_demo_academic/&#34;&gt;科研小组网站&lt;/a&gt;。截至本文成稿之日，blogdown 含苞待放，尚未正式发布，但是已经能够正常安装使用了。我们来尝尝鲜，提前一睹她的芳容。&lt;/p&gt;
&lt;div id=&#34;r-blogdown-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;R blogdown 简介和安装&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;R blogdown 是什么&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;R语言的一个扩展包，用来制作网站的工具。&lt;/li&gt;
&lt;li&gt;可以用非常简洁的方式快速搭建静态网页构成的网站。&lt;/li&gt;
&lt;li&gt;虽然名字里有“博客”（blog）字样，但并不仅限于博客。非常适合搭建一个科研小组的展示窗口。&lt;/li&gt;
&lt;li&gt;基于 markdown 扩展语法，可以在网页中方便地插入图表、脚注、数学公式、R 代码等元素。&lt;/li&gt;
&lt;li&gt;非常容易将 bookdown 生成的论文转化成网页展示。&lt;/li&gt;
&lt;li&gt;非常易于维护，迁移，备份。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本书的官方网站就是用 R blogdown 搭建的。网站里给大家提供的 R 示例代码、试读章节、勘误表等，都是直接从书稿中拷贝粘贴到文本文件里，然后运行一下 blogdown 的指令，网站就自动更新了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;安装&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;blogdown 的背景平台是 R 语言，用户界面首选 RStudio ，产生的网站框架是 Hugo ，掰手指头数一数，要安装4样东西，略显繁琐，但并不难，一劳永逸。安装方式如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;R。去R的服务器&lt;a href=&#34;https://cran.r-project.org/&#34;&gt;CRAN&lt;/a&gt;，点击Download R for Windows（其他操作系统的用户请自便），在打开的新网页最上方点击&lt;code&gt;base&lt;/code&gt;，就找到下载链接了。下载完毕后安装，一路“下一步”的傻瓜式安装即可。&lt;/li&gt;
&lt;li&gt;RStudio。去&lt;a href=&#34;https://www.rstudio.com/&#34;&gt;官网&lt;/a&gt;下载安装文件运行即可。&lt;/li&gt;
&lt;li&gt;blogdown。运行RStudio，在左上面板的代码窗口输入并运行以下代码：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;if(!require(devtools)) install.packages(&amp;#39;devtools&amp;#39;)
devtools::install_github(&amp;#39;rstudio/blogdown&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;解释一下：由于 blogdown 目前只发布到了 GitHub 服务器上，尚未发布到CRAN，所以上面第一条代码先安装开发工具 &lt;code&gt;devtools&lt;/code&gt; 包，第二行用这个包的&lt;code&gt;install_github()&lt;/code&gt; 函数从 GitHub 安装。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hugo 框架。在 RStudio 左上面板的代码窗口输入并运行以下代码：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;blogdown::install_hugo()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;安装完毕。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-r-blogdown-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;用 R blogdown 搭建个人博客&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;创建示例网站&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;我在自己博客建立了个子站，作为 R blogdown &lt;a href=&#34;http://dapengde.com/blogdown_demo_default/&#34;&gt;个人博客的示例&lt;/a&gt;。下面我们看看这个博客是如何创建的。&lt;/p&gt;
&lt;p&gt;首先，在你的电脑里新建一个文件夹，准备存放网站文件，假定是&lt;code&gt;c:\blogdown_default&lt;/code&gt;，那么创建网站只需在RStudio里运行两行代码：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;setwd(&amp;#39;c:\\blogdown_default&amp;#39;)
blogdown::new_site()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;示例网站搭建完毕。对，就这么简单！&lt;/p&gt;
&lt;p&gt;去&lt;code&gt;c:\blogdown_default&lt;/code&gt;看看吧，出现了好多新文件夹。别的不用管也不用动，只注意&lt;code&gt;content\&lt;/code&gt; 和&lt;code&gt;public\&lt;/code&gt; 这两个就行了。打开 &lt;code&gt;public\index.html&lt;/code&gt;，这就是网站的主页。随便点开上面的几个链接试试看。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;发布到网上&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;上面搭建的网站，目前只存在于本地电脑里，下面我们发布到网上。&lt;/p&gt;
&lt;p&gt;如果你像我一样，已经有了自己租用的服务器，上面有了WordPress博客，那最简单，在服务器的&lt;code&gt;public_html\&lt;/code&gt;文件夹下面创建一个新文件夹，例如叫做&lt;code&gt;test&lt;/code&gt;，那么只需将刚刚在本地新建的博客或科研网站的 &lt;code&gt;public&lt;/code&gt;文件夹里所有文件上传到服务器的&lt;code&gt;test&lt;/code&gt; 文件夹即可。访问&lt;code&gt;你的域名/test&lt;/code&gt;，就可以看到新网站了！&lt;/p&gt;
&lt;p&gt;如果你没有自己的服务器，那么最简单的是在 &lt;a href=&#34;https://www.netlify.com/&#34;&gt;netlify&lt;/a&gt; 免费注册个账号，然后按提示将你本地的 &lt;code&gt;public\&lt;/code&gt; 文件夹拖进去，会自动布署，等几分钟，就可以访问了。你可以免费申请个子域名，也可以买个自己的域名绑定上去。我已经申请了一个，打算作为&lt;a href=&#34;http://zhao.netlify.com/&#34;&gt;自己的科研主页&lt;/a&gt;。这是从blogdown 创建的科研网站示例（创建方法见下文）修改而来的，而且还没改完，里面的英文内容都是示例里别人的工作。&lt;/p&gt;
&lt;p&gt;那么，如何将自动生成的网站更新成自己的，并添加新内容呢？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;网站更新&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;前文提醒你注意，新建的网站文件夹里有个&lt;code&gt;content\&lt;/code&gt;文件夹。这里就是更新网站内容的地方。你只需用记事本或RStudio，打开其中的&lt;code&gt;.md&lt;/code&gt;或 &lt;code&gt;.Rmd&lt;/code&gt; 文件，修改成自己的内容后保存，然后运行建站函数：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;blogdown::build_site()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这样，&lt;code&gt;public\&lt;/code&gt; 就自动更新了，再发布到网上即可。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.md&lt;/code&gt;或 &lt;code&gt;.Rmd&lt;/code&gt; 文件使用 markdown语法，见我以前写的帖子：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://dapengde.com/archives/17033&#34;&gt;九分钟学会 Markdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dapengde.com/archives/17712&#34;&gt;精品网络应用：Markdown篇&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dapengde.com/archives/19141&#34;&gt;R bookdown 快速入门和语法速查&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果要发表新帖子，那么有两种方式最简单：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;方法一：将原有的&lt;code&gt;.md&lt;/code&gt;或 &lt;code&gt;.Rmd&lt;/code&gt;拷贝粘贴，改一下标题和内容即可；&lt;/li&gt;
&lt;li&gt;方法二：在RSudio代码窗口点击 Addins- New Post， 按提示填写即可。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;写完保存，运行建站函数，上传。完毕。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;自动同步&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;也许你嫌每次更新上传太麻烦。我们当然可以选择自动同步。&lt;/p&gt;
&lt;p&gt;如果网站搭建在Netlify，那么只需做三件事：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;下载并安装 GitHub 客户端，申请个免费账号，并创建一个项目，例如叫做myweb，将前面我们举例的&lt;code&gt;c:\blogdown_default&lt;/code&gt; 文件夹设为项目的文件夹，并同步到云端。&lt;/li&gt;
&lt;li&gt;在你的Netlify设置里，设为自动跟你的GitHub里的myweb项目同步，同步内容是 &lt;code&gt;public&lt;/code&gt;文件夹。&lt;/li&gt;
&lt;li&gt;以后每次更新并运行完建站函数后，在GitHub客户端同步一下即可。&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id=&#34;-r-blogdown-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;用 R blogdown 搭建科研网站&lt;/h2&gt;
&lt;p&gt;上文说到，我申请了一个Netlify免费账号，并且创建了&lt;a href=&#34;http://zhao.netlify.com/&#34;&gt;自己的科研主页&lt;/a&gt;，是从blogdown 创建的科研网站示例修改而来的。这个示例的本来面貌可以来我博客上看：&lt;a href=&#34;http://dapengde.com/blogdown_demo_academic/&#34;&gt;科研网站的示例&lt;/a&gt;。这个科研网站的构架比个人博客复杂，有简介、新闻、发表论文、科研项目等基本模块，还可以根据需要新增，非常适合作为科研小组的展示窗口。&lt;/p&gt;
&lt;p&gt;这个网站的搭建也很简单，跟个人博客类似。在你的电脑里新建文件夹，比如 &lt;code&gt;c:\blogdown_academic&lt;/code&gt;，在RStudio里运行两行代码：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;setwd(&amp;#39;c:\\blogdown_default&amp;#39;)
blogdown::new_site(theme=&amp;#39;gcushen/hugo-academic&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;去&lt;code&gt;c:\blogdown_academic&lt;/code&gt; 看看吧，科研网站搭建完毕！&lt;/p&gt;
&lt;p&gt;但是，如果你这时双击打开&lt;code&gt;c:\blogdown_academic\public\index.html&lt;/code&gt; 的话，会发现界面并不好看（css未载入），并且点击页面的那些链接也无效。别急，我们再做个小改动就行了。&lt;/p&gt;
&lt;p&gt;用记事本将&lt;code&gt;c:\blogdown_academic\config.toml&lt;/code&gt; 打开，删掉第一行，然后添加下面两行并保存文件。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;baseurl = &amp;quot;/&amp;quot;
relativeurls = true&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后在RStudio运行建站函数&lt;code&gt;build_site()&lt;/code&gt;：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;blogdown::build_site()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;好了，现在可以打开&lt;code&gt;c:\blogdown_academic\public\index.html&lt;/code&gt; 正常浏览了！&lt;/p&gt;
&lt;p&gt;解释一下：config.toml 文件里的默认设置不支持本地浏览，而且发布到网上时需要布署。这里改成相对路径&lt;code&gt;relativeurls = true&lt;/code&gt;，就可以直接在本地打开 index.html 浏览了。&lt;/p&gt;
&lt;p&gt;其他的发布、更新、同步，跟前文讲述的一致，这里不再赘述。需要特别指出的是，&lt;strong&gt;科研网站&lt;/strong&gt;示例的首页，个人信息需要在前面提到的&lt;code&gt;config.toml&lt;/code&gt;里的&lt;code&gt;[params]&lt;/code&gt; 修改。&lt;/p&gt;
&lt;p&gt;这里的科研网站示例，使用的是Hugo-academic主题。Hugo还有很多其他主题可以使用。我们相信，只要深入研究一下，一定可以搭建让人更合心意的网站。同时，blogdown也在进一步完善中，让我们期待她的盛装绽放吧！&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;Yihui Xie. blogdown: Create Blogs and Websites with R Markdown. R package version 0.0.24.&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
