<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>R on Peng Zhao</title>
    <link>/zh/tags/r/index.xml</link>
    <description>Recent content in R on Peng Zhao</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017 Peng Zhao</copyright>
    <atom:link href="/zh/tags/r/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Windows 的又一个坑：R writeLines() 函数的换行符</title>
      <link>/zh/post/r-writelines-line-break/</link>
      <pubDate>Thu, 18 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/r-writelines-line-break/</guid>
      <description>&lt;p&gt;昨天，又被 Windows 坑到了。&lt;/p&gt;
&lt;p&gt;事情的背景是，我的工作环境是 Windows 操作系统。由于一些众所周知的原因，有些事情在 Linux 下做起来比较顺当。于是，我就用 virtualbox 装了个虚拟的 Ubuntu。由于不熟，只用到其中很小一部分功能，所以，凡是能在 Windows 下做的事情，我绝不去 Ubuntu。&lt;/p&gt;
&lt;p&gt;昨天，我要写一批 bash 批处理文件，打算在 Ubuntu 里运行。这批 .sh 文件结构格式相同，只是内容略有不同。于是，我就动了点小心思，用 R 语言批量写好了文件内容，最后用 &lt;code&gt;writeLines()&lt;/code&gt; 函数生成了这批 .sh 文件。&lt;/p&gt;
&lt;p&gt;前面我提到了，这些操作都是在 windows 下完成了。保险起见，我特地指定了 &lt;code&gt;writeLines(useBytes = TRUE)&lt;/code&gt;，来保证这批 .sh 文件的编码 UTF-8，心想这下应该没问题了吧。&lt;/p&gt;
&lt;p&gt;但是，在 Ubuntu 里执行 这批 .sh 文件，居然出错！说什么文件找不到……&lt;/p&gt;
&lt;p&gt;为了简化问题，我把从这批运行失败的 .sh 文件里面随便拎出一个，里面删得只剩两条指令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ~
ls&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后另存为 test.sh 文件，用来测试。运行 test.sh，结果：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17_153445.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;这么两条命令，居然还有错？&lt;/p&gt;
&lt;p&gt;我记得在 Ubuntu 下直接写的 .sh 文件没这个问题啊。&lt;/p&gt;
&lt;p&gt;那好，我就在 ubuntu 的文本编辑器里写了一个一模一样的文件，取名 test2.sh，内容也是只有这两条指令。然后运行，居然好了！&lt;/p&gt;
&lt;p&gt;肉眼去看，两个文件都完全相同！我对比了一下两个文件的编码，都是 UTF-8。&lt;/p&gt;
&lt;p&gt;这是遇见孙悟空和六耳猕猴了？&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17_153646.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;我祭出两面照妖镜：一个是 Totalcommander 的文本比较工具，一个是 notepad++ 的文本比较插件。比较的结果是，两个文件完全相同！&lt;/p&gt;
&lt;p&gt;大惑不解。&lt;/p&gt;
&lt;p&gt;使出浑身解数，都没有进展。万般无奈之下，想起这批 .sh 文件是用 R 的 &lt;code&gt;writeLines()&lt;/code&gt;函数写的，那就去看看这个函数的帮助文件吧。&lt;/p&gt;
&lt;p&gt;这一看，不打紧，竟发现一条惊人的线索。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17-001.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Linux 的换行分隔符是&lt;code&gt;LF&lt;/code&gt;， Windows 是 &lt;code&gt;CRLF&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;好像是有这么个印象。于是，我在 notepad++ 里打开了“显示所有符号”。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://steemitimages.com/0x0/https://github.com/pzhaonet/keller/raw/master/figtemp/2018-01-17_153657.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;真相大白！&lt;/p&gt;
&lt;p&gt;原来，因为我用 windows 下 R 语言的 &lt;code&gt;writeLines()&lt;/code&gt;函数写的 .sh 文件，里面的换行符号是 &lt;code&gt;CRLF&lt;/code&gt;，在 Linux 里执行时不认可，所以出现了错误。&lt;/p&gt;
&lt;p&gt;F1 才是识别六耳猕猴的如来佛祖！&lt;/p&gt;
&lt;p&gt;不仅是 R 函数。Windows 下普通的文本编辑器里，按回车键得到的换行符都是 &lt;code&gt;CRLF&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;解决办法：同样的 R 代码，在 Linux 运行就可以了，生成的 .sh 文件没有任何问题。&lt;/p&gt;
&lt;p&gt;知识点：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;R &lt;code&gt;writeLines()&lt;/code&gt; 函数得到的文本文件，换行符取决于操作系统。&lt;/li&gt;
&lt;li&gt;Windows 下普通的文本文件编辑器，按回车键得到的换行符是 &lt;code&gt;CRLF&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;bash 批处理文件.sh 的换行符必须是 &lt;code&gt;LF&lt;/code&gt;。如果是 &lt;code&gt;CRLF&lt;/code&gt;，则无法执行，显示路径错误。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;谨以此文，纪念又一次被 windows 坑了一下。&lt;/p&gt;
&lt;p&gt;更新：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;yihui 指出，Linux 下编写的 bat 文件是可以在 Windows 下顺利运行的。&lt;/li&gt;
&lt;li&gt;rileyge 指出，Notepad++ 可以将换行符互相转换，方法是“编辑”–“档案格式转换”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;谢谢他们的帮助。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>一封 CRAN 的来信</title>
      <link>/zh/post/a-mail-from-cran/</link>
      <pubDate>Wed, 17 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/a-mail-from-cran/</guid>
      <description></description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (4)</title>
      <link>/zh/post/latex-and-me-4/</link>
      <pubDate>Wed, 17 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/latex-and-me-4/</guid>
      <description>&lt;p&gt;9&lt;/p&gt;
&lt;p&gt;bookdown 或者说 Pandoc 的伟大之处，就是把原先必须在 LaTeX 里做的事情，99.9% 都可以用 markdown 语法完成。剩下的 0.1%，例如公式、索引、控制换行、临时改变字体字号、强制分页等操作，所涉及的 LaTeX 命令都很简单（&lt;code&gt;$$&lt;/code&gt;, &lt;code&gt;\index{}&lt;/code&gt;、&lt;code&gt;\mbox{}&lt;/code&gt;、&lt;code&gt;\small&lt;/code&gt;、&lt;code&gt;\newpage&lt;/code&gt;），偶尔用一下无伤大雅。只需找个漂亮的编辑器，在 bookdown 下写作就有不错的体验，而生成的 pdf 文档处处透露着 LaTeX 的优雅。平时自用一下，美得不行，仿佛梅开二度，枯木逢春。我为 bookdown 量身制作了 bookdownplus，pinyin 和 mindr 几个扩展包，沉浸在美妙之中不可自拔。&lt;/p&gt;
&lt;p&gt;但是，直到这次真正给《学 R》排版，真正要送到印刷厂印个几千本的时候，光有 bookdown 的现成模板就不够用了。《学 R》是本中文书，LaTeX 对中文的支持先天不足，很多细小的问题，得自己一个一个抠。&lt;/p&gt;
&lt;p&gt;比如中文里夹杂的英文词的中断换行（hyphenation），总是在不该断的地方瞎断。找不到完美的解决方案，最后我手动添加了 &lt;code&gt;\mbox{}&lt;/code&gt; 凑合。&lt;/p&gt;
&lt;p&gt;比如段首空两格。我明明记得原先是自动空两格的，不知哪一次升级以后，这个设置就不见了。好在这个不难解决。&lt;/p&gt;
&lt;p&gt;比如脚注和上标。bookdown 里&lt;code&gt;^[]&lt;/code&gt;表示脚注，两个&lt;code&gt;^&lt;/code&gt;之间表示上标。问题是两个脚注连在一起怎么办？要是写成&lt;code&gt;杨过^[]和小龙女^[]&lt;/code&gt;，那两个&lt;code&gt;^&lt;/code&gt;之间的文字就变成了上标。我试来试去，最简单的就是在中间偷偷摸摸塞进去个空格，把上标结构破坏掉。想来英文不存在这个问题，到处都是空格。&lt;/p&gt;
&lt;p&gt;10&lt;/p&gt;
&lt;p&gt;所幸，我算是挺过来了。最后排出的文档，虽然不是尽善尽美，但已经达到了我能力的天花板。想要更多也没有了。&lt;/p&gt;
&lt;p&gt;只是年轻的时候我从没想过，将来自己会跟排版这件事纠缠。那些投进去的时间和精力，花在别处，会不会更好？无论本职工作，还是业余爱好，我都不是干排版的啊。&lt;/p&gt;
&lt;p&gt;可是，怪就怪在，排版里这些一个一个的坑，你不去亲自填，就没人给你填。就像自己的娃，打扮成啥样，全在爹妈。自己的书，正式的出版物，难看的排版，你能忍吗？诸葛亮是怎么死的？事无巨细事必躬亲累死的。可是难道诸葛亮自己想被累死吗？&lt;/p&gt;
&lt;p&gt;回头看看来时的路，我把青春的尾巴献给了 R，LaTeX，Linux。Linux 已然渐行渐远，LaTeX 曾经聚聚散散，只有 R 自始至终在我身边，成为了长久的陪伴。而这次，LaTeX 想甩也甩不掉了，她借着 bookdown 这匹木马，藏在了 R 的深处，彻底把我攻陷。&lt;/p&gt;
&lt;p&gt;用 LaTex 排出的《学 R》这本书，就当是青春的纪念。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (3)</title>
      <link>/zh/post/latex-and-me-3/</link>
      <pubDate>Sat, 23 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/latex-and-me-3/</guid>
      <description>&lt;p&gt;7&lt;/p&gt;
&lt;p&gt;LaTeX 做出来的文档，确实漂亮。这种漂亮不是那种一眼就能看出哪儿漂亮的漂亮，而是一种说不出来的气质。这种气质来自字体、间距、断字等等诸多细节的堆积和交互作用。只要是用过 LaTeX 的人，拿来个文档用鼻子一闻，就知道是 Word 做的还是 LaTeX 做的。就好像你遇到了你的另一半，让你神魂颠倒，可就是说不出她究竟好在哪里; 她走在人群里，你一眼就能找到她。因为你眼里没别人。&lt;/p&gt;
&lt;p&gt;然而，这种气质不是能轻易把握的。LaTeX 最为奇特的是，你为她投入了无数的时间，却竟然说不清楚到底是因为她太好还是她太糟。如果她太好，为何这么难用？如果她太糟，为何你甘心为她付出？&lt;/p&gt;
&lt;p&gt;之所以能用 LaTeX 写完博士论文，我想来想去，这个奇迹是以下四点一起促成的：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;组里的同事提供了现成的论文模板，&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;身边有同事可以随时问，&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;老板只看结果，对我实现的手段并不介意，&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;论文是英文写的，不需要跟中文排版死磕。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;想学 LaTeX 的注意了！以上四点，只要缺了一样，那么学 LaTeX 的阻力就会提高一个数量级。此坑慎入！&lt;/p&gt;
&lt;p&gt;如果有了这四个条件，那么基本上就不用额外操心，只管埋头写论文就是了。&lt;/p&gt;
&lt;p&gt;然而，LaTeX 下埋头写作的体验并不美好。那感觉根本就不是写论文，而是写代码。不编译出来，你根本不知道自己写了几页，每页是啥模样。一天下来，脑袋胀胀的，心里乱乱的。相比之下，用 Word 写论文，每敲一个字符都有一点成就感，敲完一页后，就像已经出版了一样心满意足。&lt;/p&gt;
&lt;p&gt;LaTeX 就像个绝世美人，不时让你为她的美貌倾倒。更大的诱惑是，你心里清楚，只要你努力，就能距离她的美貌更接近一点。于是，你就身不由己地投入大把大把的精力，把你的文档弄得越来越漂亮，虽然每次只是漂亮了那么一点点。&lt;/p&gt;
&lt;p&gt;不像 Word，你知道，无论再怎么使劲，做出来的论文顶多也就那样了，不可能更美，所以心态反而平静下来，老老实实过日子。&lt;/p&gt;
&lt;p&gt;一个像恋爱，一个像婚姻。&lt;/p&gt;
&lt;p&gt;8&lt;/p&gt;
&lt;p&gt;当完成博士论文的时候，我决定结束天天心惊胆战的 LaTeX 爱情长跑，回到 Word 的温柔乡。我把城墙修高加厚，厚得就像特洛伊城，把 LaTeX 拦住墙外，从此一刀两断。曾经在同一个战壕里的战友，变成了洪水猛兽。&lt;/p&gt;
&lt;p&gt;到了新工作单位，观察了一下，老板和同事全部是正常人，不是 X-men。我松了一口气。&lt;/p&gt;
&lt;p&gt;有一次，有个名叫 LyX 的使者来敲我的城门。从三个字母参差不齐的模样，我一眼就识破了他的伪装，知道是 LaTeX 派来的奸细，于是我轻轻吐出一个字：滚。&lt;/p&gt;
&lt;p&gt;我以为，从此就跟 LaTeX 形同陌路了。&lt;/p&gt;
&lt;p&gt;有一天，我在使用 R 语言的时候，神使鬼差地装上了一个名叫 bookdown 的扩展包。&lt;/p&gt;
&lt;p&gt;很久以后，再次回忆那一刻，仍然不由得感慨万千。命中注定的事，逃不掉的劫数。&lt;/p&gt;
&lt;p&gt;bookdown，就是攻陷特洛伊的木马; 里面藏着的，除了我的旧爱 LaTeX，还有 Pandoc 这个魔鬼。后者从名字上一看，就知道是潘多拉放出来的。&lt;/p&gt;
&lt;p&gt;安装 bookdown 的那一瞬间，我把木马轰隆隆地拉进了我的城，而我却浑然不知。&lt;/p&gt;
&lt;p&gt;特洛伊，就此沦陷。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>R bookdownplus 升级手记，以及北大论文模板</title>
      <link>/zh/post/-bookdownplus-update/</link>
      <pubDate>Sun, 26 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/-bookdownplus-update/</guid>
      <description>&lt;p&gt;bookdownplus 这个 R 语言程序包，自用起来感觉不错，当初发布的时候还小得意了一把。时过境迁，现在回头看起来是越来越不满意。CRAN 上，bookdownplus 的总下载量接近三千（与此相比，bookdown 的总下载量是七万），大约每小时就有一次下载。Google ‘bookdownplus’ 可以搜到 已经有中文用户在写使用体验了。越是这样，我越惶恐，因为我知道，这个包写得粗糙，可改进的地方数都数不过来。&lt;/p&gt;
&lt;p&gt;向我反馈问题的用户超出了预期，主要是兼容性的问题：在 macOS上如何，在 Linux 上如何，这些问题我都没有办法回答，因为我只在 Windows 7 上测试了，其他操作系统既无精力也无条件测试。开发个软件，自用是一回事，让别人能用完全是另外一回事，这两回事之间真是相差了一个筋斗云。&lt;/p&gt;
&lt;p&gt;所以我决定先把自己看不过去的问题解决一下，那就是代码的构架问题。&lt;/p&gt;
&lt;p&gt;bookdownplus v.1.3 以后的版本包含了 20 个模板。写这个包的时候，因为懒，我就把所有模板的 .tex 文件混到一个文件夹里，style 和 cls 文件混在另一文件夹里，到最后自己都搞不清楚哪个模板用哪个文件了。用户每次想运行 &lt;code&gt;bookdownplus()&lt;/code&gt; 生成一个新文档时，都把所有有用没用的文件一股脑考进来（反正也不大），连我自己都看不下去了。此外，我还指望着别人贡献一些新模板，可是目前乱糟糟的，谁愿意把好东西往垃圾堆里扔呢？&lt;/p&gt;
&lt;p&gt;于是这两天我花了一个上午，把这些文件重新整理归类，让他们各回各家各找各妈，每个 bookdown 模板都对应一个 zip 压缩文件，扔在 bookdownplus 的安装目录里。而且，如果再开发新 bookdown 模板，只需按照现有模板 zip 文件里的结构，将所需文件压缩并甩进 bookdownplus 安装目录，就可以用 &lt;code&gt;bookdownplus()&lt;/code&gt; 直接调用了，连升级都不用。&lt;/p&gt;
&lt;p&gt;虽然功能上没有多大增强，但架构上舒服多了，所以我把版本号从1.3.x 升到了 1.4.0。&lt;/p&gt;
&lt;p&gt;我还有一块心病，是北京大学学位论文的 &lt;a href=&#34;https://github.com/CasperVector/pkuthss&#34;&gt;LaTeX 模板&lt;/a&gt;，我迟迟没能转成 bookdown 模板。原因是这个 LaTeX 模板本身在我电脑上就编译不成功。这次不知怎么开了窍，突然被我搞定了，作为第 21 个模板，收进了 bookdownplus v.1.4.0 里。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_thesis_pku.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;此外，新增了一下几个模板：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;益辉制作了 &lt;a href=&#34;https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fyihui%2Fbookdown-crc%3A5wtgG3vpge_i9bq1JupLLfeTiOI&amp;amp;cuid=5083260&#34;&gt;Chapman &amp;amp; Hall 出版社的模板&lt;/a&gt;，现成的，我稍微改了一下。看上去是这样的：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_yihui_crc.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这提醒我，直接去 bookdown.org 找现成的嘛！于是找到了Eduardo García Portugués 写的 &lt;a href=&#34;https://bookdown.org/egarpor/nonpar-eafit/&#34;&gt;A short course on nonparametric curve estimation&lt;/a&gt;，是在 yihui_demo 模板基础上增加了一个自定义环境。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_nonpar.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;以前搜集过一个很有趣的 LaTeX 模板叫 dnd，这次虽然没有完全改为 bookdown 模板，但是我仍然收进来了，作为开发版，以后慢慢想办法吧。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdownplus/master/inst2/showcase/bookdownplus_dnd_dev.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;bookdownplus v.1.4.0 已经在 GitHub 发布，安装和使用方法是在 R 语言环境下运行：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/bookdownplus&amp;quot;)
require(bookdownplus)
bd()&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (2)</title>
      <link>/zh/post/latex-and-me-2/</link>
      <pubDate>Wed, 22 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/latex-and-me-2/</guid>
      <description>&lt;p&gt;5&lt;/p&gt;
&lt;p&gt;如果上一篇帖子让你以为我在为 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 做广告，呵呵，那你就上当了。为啥？&lt;/p&gt;
&lt;p&gt;因为我早就抛弃 LaTeX 了。&lt;/p&gt;
&lt;p&gt;几年前，把用 LaTeX 排版排得漂漂亮亮的博士论文提交的那一刻，我咬牙切齿地想：老子终于可以跟 LaTeX 这个怪物永别了。&lt;/p&gt;
&lt;p&gt;想不起来第一次是从哪里知道 LaTeX 的。好像是从 Linux 的学习里，得知 LaTeX 是科研圈常用的写作工具。作为一个混科研圈的工具控，我居然没听说过？而且身边全是搞科研的，居然没人用过？怪哉怪哉。&lt;/p&gt;
&lt;p&gt;于是，我就去问见多识广的朋友：“你用过 LaTeX 吗？”&lt;/p&gt;
&lt;p&gt;朋友正穿着白大褂，在中科院化学所的有机实验室忙活，一听我的问题，痛痛快快地回答：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;latex 啊？用过用过，我们经常从美国买。你要做什么？要多少克？&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我愣了，赶紧说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;不急不急。你先忙，我需要的时候找你买。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这就是我初学 LaTeX 时的生态。圈里没人懂，身边没人带，全凭好奇和兴趣。作为一个寻常百姓，学起来的难度可想而知。&lt;/p&gt;
&lt;p&gt;当时虽然已经奔三的年岁，但血气犹存;还没当爹，手头还有一点闲置光阴。于是，磕磕碰碰，我终于用 LaTeX 把工作总结做了个 beamer 幻灯片，准备在单位作报告时用。花了这么多时间，如果不好用，那还学个啥劲呢？所以，要不要继续学，在此一举。&lt;/p&gt;
&lt;p&gt;就在这关键时刻，单位领导一句话，把我仅有的热情抛进了万丈深渊。领导说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;工作总结的 ppt 你不是说你做完了？发给我来修改。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;6&lt;/p&gt;
&lt;p&gt;LaTeX 在我这里真正派上用武之地，是来德国读博士的时候。&lt;/p&gt;
&lt;p&gt;刚到这个研究组，我就大吃一惊：组里清一色的 Linux 操作系统，大家拿 LaTeX 写各种文档，用 R 语言处理数据。&lt;/p&gt;
&lt;p&gt;Linux，LaTeX，R，这是耗尽我青春尾巴的三大怪物。此外还有个 vim，但是跟这仨货比起来，属于小巫见大巫。&lt;/p&gt;
&lt;p&gt;Linux 和 R 的血泪史按下不表，今天只说 LaTeX。&lt;/p&gt;
&lt;p&gt;当时我无奈地想，嫁鸡随鸡嫁狗随狗，就跟着这帮 X-men 一起混吧。&lt;/p&gt;
&lt;p&gt;很快，我又大吃一惊：在这个变种人小组里，牵头的老板，居然是个正常人，用的是 Windows 系统，Word 写文档，Excel 处理数据。话说一个正常老板跟一群变种人下属之间是怎么交流的？&lt;/p&gt;
&lt;p&gt;没过多久，我就找到了答案：老板从来不直接修改文字。他总是把意见用批注添加到 X-men 发来的 pdf 上，让 X-men 自己去改。&lt;/p&gt;
&lt;p&gt;于是，在同事的诱骗和老板的纵容下，我踏上了 LaTeX 的邪路。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dcmnyjhirotcw.cloudfront.net/cdn/scdn/images/uploads/economy-powder-free-latex-gloves_56693.jpg&#34; /&gt;
图解：Latex 材质的手套，要不要来一双？&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;latex 是一种微粒聚合物混合的乳剂，成分包括蛋白质、生物碱、淀粉、糖类、植物油、单宁酸、树脂、树胶等等，详见&lt;a href=&#34;https://en.wikipedia.org/wiki/Latex&#34;&gt;维基百科&lt;/a&gt; 。&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>我把青春献给你：排版 (1)</title>
      <link>/zh/post/latex-and-me-1/</link>
      <pubDate>Tue, 21 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/latex-and-me-1/</guid>
      <description>&lt;p&gt;1&lt;/p&gt;
&lt;p&gt;2017 年快要过去了。如果剩下这四十天不出什么幺蛾子的话，我今年的最蠢事情排行榜，基本是板上钉钉。名列榜首的，就是过早给《学 R》一书大肆宣传。跟罗永浩当年头一回卖锤子手机一样一样的，还没量产，就先吹牛，结果吹破了，打了自己的脸。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://5b0988e595225.cdn.sohucs.com/images/20170715/d6a28e43a55b48128265e4029fb4e6c2.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;其实，这本书早在今年 6 月就写完了，7 月做了最后一次修改。当时书号已经批了，封面也有了模样，我以为马上就能印出来了，于是告诉了我能告诉的每一个朋友。朋友们都很讲义气，把白花花的银子拍在桌上，就等着付钱买了。当了教授的老同学说：放心，到时候我送给我的学生人手一本！&lt;/p&gt;
&lt;p&gt;谁知道，一晃四个多月过去了，书还没出来。我的前期宣传算是白费了。让人欣慰的是，直到现在，仍然有铁杆粉丝惦记着我，时不时发来鼓励的短信：“喂，你那书烂尾了吧？啊哈哈哈哈~~~~”&lt;/p&gt;
&lt;p&gt;谢谢。&lt;/p&gt;
&lt;p&gt;那么，四个月里，这书干嘛去了？&lt;/p&gt;
&lt;p&gt;在排版。&lt;/p&gt;
&lt;p&gt;《学 R》这本书，一直排不出理想的模样。&lt;/p&gt;
&lt;p&gt;四个月是在反反复复修改排版里度过的。一直拖到上周，我们仍然看不到任何排版成功的迹象。2017 年所剩无几的耐心消耗殆尽，一咬牙一跺脚，我们决定壮士断腕。合作作者 Y 从出版社讨来排版文件，并且自己花钱购买了专业软件，自己排；我同时用 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 排，齐头并进。谁先排好就用谁的。我们谁都不想再拖，再拖就真的要吐血了。&lt;/p&gt;
&lt;p&gt;当做出这个决定的第二天，Y 看到我用 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 做出的 pdf 书稿小样得到了印刷厂的认可，就放下了手里的专业软件，决定不干了：“&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 真厉害，有空我学一下……”&lt;/p&gt;
&lt;p&gt;我立马拦住：“最好别去学。这个坑太大。一入 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;，坑深似海。”&lt;/p&gt;
&lt;p&gt;2&lt;/p&gt;
&lt;p&gt;出版社负责录入和排版的工作，简称“录排”。&lt;/p&gt;
&lt;p&gt;这四个月来，录排可谓兢兢业业，全心全力为《学 R》排版。可惜，辛苦不一定有回报，排出的书稿，一直有层出不穷的问题。&lt;/p&gt;
&lt;p&gt;比如说，丢失公式和特殊字符。原稿里的诸如 &lt;em&gt;R&lt;/em&gt;&lt;sup&gt;2&lt;/sup&gt;， &lt;span class=&#34;math inline&#34;&gt;\(\pi\)&lt;/span&gt; 等都莫名其妙消失了。&lt;/p&gt;
&lt;p&gt;比如说，字体。原稿里的代码都是用等宽字体表示的，录排之后都成了跟正文一样的字体。&lt;/p&gt;
&lt;p&gt;比如说，标点符号。原稿里的所有标点符号，包括代码里的逗号、引号、括号、冒号，都变成了中文标点符号。加上非等宽字体，书里的代码惨不忍睹。&lt;/p&gt;
&lt;p&gt;最要命的是，原稿里的很多空格也都不翼而飞。比如录排稿：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/img/xuer1.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;是不是一头雾水？实际上原稿是：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/img/xuer2.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;每次从录排稿里挑问题，都恨不得把一双近视眼珠子抠出来，再拿着放大镜逐字逐句看。后来，索性放弃了很多想法。比如说，原先代码是彩色的，得知需要录排逐个字符手动修改，算了不要了；原先打算增加个小贴士目录，得知需要排完页码手动添加，算了不要了；原先打算给常用函数做个索引，方便读者从书里找示例，看样子也得手动做，算了不要了……&lt;/p&gt;
&lt;p&gt;即便如此，每次的排版仍然会出现奇奇怪怪的问题。如此往返三次，《学 R》这本书我已经读得想呕吐了。&lt;/p&gt;
&lt;p&gt;我百思不得其解：这到底是怎么回事？&lt;/p&gt;
&lt;p&gt;3&lt;/p&gt;
&lt;p&gt;来回折磨了四个月。终于， Y 试用了一下录排用的排版软件—— Adobe InDesign，俗称 ID，是国内出版业主流的专业排版软件。&lt;/p&gt;
&lt;p&gt;Y 立刻对我说：“我明白问题出在哪里了！”&lt;/p&gt;
&lt;p&gt;原来，录排是把我们提交的原稿，转成了 txt 文本文件；书里的插图，全部转成了 tif 图片。然后，把这些素材导入 ID，然后手动按照原稿 pdf 的样子做调整。&lt;/p&gt;
&lt;p&gt;这正是录排一贯的工作流程。&lt;/p&gt;
&lt;p&gt;这个流程，对文学类书籍没有问题。一篇小说，重要的是内容，不是格式；只要把文字分好段，就不会有大错。&lt;/p&gt;
&lt;p&gt;然而，这个流程用在《学 R》 这本书上，就是个灾难。因为这本书，内容和格式，都很重要。&lt;/p&gt;
&lt;p&gt;然而，这一点，录排不知道。&lt;/p&gt;
&lt;p&gt;然而，我们不知道录排不知道。&lt;/p&gt;
&lt;p&gt;然而，录排不知道我们不知道录排不知道。&lt;/p&gt;
&lt;p&gt;四个月的大好青春，就是这样搭进去的。&lt;/p&gt;
&lt;p&gt;对此我感到抱歉，让录排白白花了那么多时间和精力，我的吹毛求疵一定让录排很受折磨。同时我也感到遗憾，如果重来一次，这个坑恐怕仍然绕不开。&lt;/p&gt;
&lt;p&gt;4，&lt;/p&gt;
&lt;p&gt;好在我们及时止损了。&lt;/p&gt;
&lt;p&gt;上周，我们从头做起，不仅四个月来积攒的问题一扫而空，而且彩色代码的格式保住了，索引也作出来了。&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 在这里显示了无与伦比的强大力量。以致于 Y 饶有兴趣地说：“&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 真厉害，有空我学一下……”&lt;/p&gt;
&lt;p&gt;我立马拦住：“最好别去学。这个坑太大。一入 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;，坑深似海。”&lt;/p&gt;
&lt;p&gt;如果你以为本文是为 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 做广告，呵呵，那你就错了。为啥？下回再说。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>R bookdown 的小技巧</title>
      <link>/zh/post/bookdown-tips/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/bookdown-tips/</guid>
      <description>&lt;p&gt;本帖用来收集整理 R 语言 bookdown 扩展包的一些使用技巧。有些是在网上搜来的，有些是我在别处讨论得来的，有些是我尚未发布的，都写在这里备用。&lt;/p&gt;
&lt;div id=&#34;-markdown-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;输出 Markdown 文件&lt;/h2&gt;
&lt;p&gt;使用 bookdown 编译 Rmd 文件，可以得到的输出格式五花八门。对此，&lt;a href=&#34;https://bookdown.org/yihui/bookdown/output-formats.html&#34;&gt;bookdown 的官方文档&lt;/a&gt; 有详细介绍，包括 github， pdf，epub，word，html 单个文档等，偏偏没有提 markdown 格式。&lt;/p&gt;
&lt;p&gt;其实，markdown 文件是有的，在编译过程里作为过渡文档存在，编译结束后自动删除。编译顺利的时候，在文件夹里“刷”地闪一下就消失了。我以前的做法是“快手”，在它消失之前迅速用 notepad++ 打开，就存下来了。这显然不是办法，凑合着过日子而已。&lt;/p&gt;
&lt;p&gt;一般来说，如果仅仅是使用 rmarkdown，只需在 yaml 设置里声明一下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;output:
  md_document:
    variant: markdown_github&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后 knit 一下，就可以得到 markdown 文件了。想当然地，我把这段代码加到了 bookdown 的yaml 里，却得到警告，说 bookdown 不支持。&lt;/p&gt;
&lt;p&gt;这事儿被我搁置了很久，最后我终于在 bookdown 的项目主页找到了&lt;a href=&#34;https://github.com/rstudio/bookdown/issues/317#issuecomment-275262486&#34;&gt;答案&lt;/a&gt;：参数 &lt;code&gt;clean = FALSE&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bookdown::render_book(&#39;index.Rmd&#39;, clean = FALSE)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我很喜欢 markdown 格式。我用 bookdown 写论文，Rmd 的正文里插了不少诸如 &lt;code&gt;r pi&lt;/code&gt; 这样的调用。跟合作作者讨论时，看 Rmd 文件吧不直观，看 html 吧不方便修改，md 大概是最好的格式。&lt;/p&gt;
&lt;p&gt;bookdown 的编译，我习惯按快捷键 ctrl+alt+b，或者点击右上方面板的 Build 按钮编译的，输出格式取决于 yaml。这样就得不到 md 文件。要想得到 md 文件，看来以后得改成命令行编译了。&lt;/p&gt;
&lt;p&gt;我的 &lt;a href=&#34;https://github.com/pzhaonet/bookdownplus&#34;&gt;bookdownplus 最新版本 v1.3.1&lt;/a&gt; ，把 &lt;code&gt;clean&lt;/code&gt; 参数默认设置为 FALSE，并且在编译后把用不着的 .lol 文件删除。这样，新用户第一次用bookdown 时，就又多得到一种漂亮的输出结果。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;pdf-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;pdf 的参考文献引用格式&lt;/h2&gt;
&lt;p&gt;bookdown 里引用参考文献，在 bookdown 的官方文档里有说明。例如标识为’zhao2017’ 的 bib 条目，引用的方式和输出结果为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@zhao2017&lt;/code&gt;，得到 &lt;code&gt;Zhao (2017)&lt;/code&gt;， 相当于 LaTeX 里的 &lt;code&gt;\citet{zhao2017}&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[@zhao2017]&lt;/code&gt; ，得到 &lt;code&gt;(Zhao, 2017)&lt;/code&gt;， 相当于 LaTeX 里的 &lt;code&gt;\citep{zhao2017}&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;但是，如果有多篇参考文献连续引用（我经常需要），就出问题了。我想得到的是 &lt;code&gt;(Xie, 2016; Zhao, 2017)&lt;/code&gt;，但无论输入 &lt;code&gt;[@zhao2017][@xie2016]&lt;/code&gt;, 或是&lt;code&gt;[@zhao2017 @xie2016]&lt;/code&gt;，或是&lt;code&gt;(@zhao2017; @xie2016)&lt;/code&gt;，都不管用。&lt;/p&gt;
&lt;p&gt;管用的方法是使用 LaTeX 方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\citep{zhao2017,xie2016}&lt;/code&gt;，得到&lt;code&gt;(Xie, 2016; Zhao, 2017)&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;更新：经 Yihui 提示，应当用 &lt;code&gt;[@zhao2017; @xie2016]&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-pdf-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;往 pdf 里插入网络图片&lt;/h2&gt;
&lt;p&gt;假定往文档里插入下面这张网络图片：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;url &amp;lt;- &#39;https://bookdown.org/yihui/bookdown/images/cover.jpg&#39;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;一般有两种方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;knitr::include_graphics(url)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;![](https://bookdown.org/yihui/bookdown/images/cover.jpg)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;得到的网页输出格式里没有任何问题，但是 pdf 却不行。&lt;/p&gt;
&lt;p&gt;这是因为，生成 pdf 的 LaTeX 不支持插入网络图片。LaTeX 界的解决办法是，先用 &lt;code&gt;wget&lt;/code&gt; 把网络图片下载到本地，再插入到tex 文档里。那么，我在 bookdown 里也如法炮制：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;download.file(url,&amp;#39;cover.jpg&amp;#39;, mode = &amp;#39;wb&amp;#39;)
knitr::include_graphics(&amp;#39;cover.jpg&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这事儿其实已经解决了，但是不够完美。如果用 bookdown 同时输出网页格式和 pdf，那么网页格式的文档里插入的图片是本地图片；如果发布到 bookdown.org，那么插入的图片来自 bookdown.org。两者都不是该图片的原始地址。有点资源浪费。&lt;/p&gt;
&lt;p&gt;完美的解决方式来自&lt;a href=&#34;https://stackoverflow.com/questions/46331896/how-can-i-insert-an-image-from-internet-to-the-pdf-file-produced-by-r-bookdown-i&#34;&gt;Yihui 的回答&lt;/a&gt;，在 Rmd 里这么写：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if (!file.exists(cover_file &amp;lt;- &amp;#39;cover.jpg&amp;#39;))
  download.file(url, cover_file, mode = &amp;#39;wb&amp;#39;)
knitr::include_graphics(if (identical(knitr:::pandoc_to(), &amp;#39;html&amp;#39;)) url else cover_file)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这段代码自动判断，如果输出网页文档，就插入原始图片链接，否则就下载到本地再插入。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;主控文档和子文档&lt;/h2&gt;
&lt;p&gt;Word 有个很好的功能，叫做“主控文档”：如果文件太大，那么各章可以分别写在一个 word 文档（子文档）里，然后插入到另一个文档里合并。LaTeX 里也有同样的功能，用 include 指令就行了。&lt;/p&gt;
&lt;p&gt;bookdown 当然也可以。官方文档对此有&lt;a href=&#34;https://bookdown.org/yihui/bookdown/usage.html&#34;&gt;说明&lt;/a&gt;，只需在’_bookdown.yml’里声明即可：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rmd_files: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter2.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果希望在不同格式的输出文件里包含不同的章节，比如网页格式的书里包含 1 到 3 章，而 pdf 的只包含第 1 和第 3 章，那么：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rmd_files:
  html: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter2.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]
  latex: [&amp;quot;chapter1.Rmd&amp;quot;, &amp;quot;chapter3.Rmd&amp;quot;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;但是，这种方法只适合并列关系的章节，如果是总分关系的呢？比如，我想在 chapter1 里某段插入 ‘mytext.md’ 这个文本，在 chapter2 里再插入一次，该怎么办？&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://disqus.com/home/discussion/yihui/r_markdown_notebook_jupyter_ipython_notebook/#comment-3426121547&#34;&gt;这样办&lt;/a&gt;：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cat(readLines(&amp;quot;mytext.md&amp;quot;), sep = &amp;quot;\n&amp;quot;) # 结合代码段选项 results=&amp;quot;asis&amp;quot;, echo=FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果深入一步，考虑上一节“往 pdf 里插入网络图片”的方法，就可以玩出更多花样，例如书的网页格式里插入 mytext.md，而 pdf 里不插。&lt;/p&gt;
&lt;p&gt;如果再跟上面的 yaml 声明相结合，各个文本文件就成了乐高积木块，随心所欲组合了。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;bookdown.org-&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;bookdown.org 的多账号管理&lt;/h2&gt;
&lt;p&gt;在 bookdown.org 发布书稿，点击RStudio 左上面板的发布符号，会引导你用 google 账号登录。第一次登录会让你设置在 bookdown.org 的用户名，这个要重视，想个你喜欢的名字，以后就没法改了。&lt;/p&gt;
&lt;p&gt;用同一账号发布书稿，一点问题都没有。但是当我用多个账号发布书稿，遇见了一些小麻烦。&lt;/p&gt;
&lt;p&gt;首先，我用 &lt;code&gt;bookdown::publish_book()&lt;/code&gt; 的 &lt;code&gt;account&lt;/code&gt; 参数指定一个新账号，得到了错误信息:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error: Unknown account name &amp;#39;newaccount&amp;#39; (you can use the setAccountInfo function to add a new account)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;一查 setAccountInfo，不是 bookdown 包的函数，而是 rsconnect 包的函数：&lt;code&gt;rsconnect::setAccountInfo()&lt;/code&gt;。然后就不知道怎么办了。&lt;/p&gt;
&lt;p&gt;其实，添加账号应该点击 Rstudio 左上面板的发布按钮- Manage Account - Connect - RStudio
Connect - 输入 bookdown.org，然后往下照提示走就行了。&lt;/p&gt;
&lt;p&gt;添加账号后，照理说用 &lt;code&gt;bookdown::publish_book()&lt;/code&gt; 的 &lt;code&gt;account&lt;/code&gt;指定一下账号，就应该能发布了吧？不，还是失败了，说 &lt;code&gt;name&lt;/code&gt; 参数有问题。其实没问题。&lt;/p&gt;
&lt;p&gt;怎么办？我发现必须从 Mange Account 里删掉旧 bookdown 的账号，就可以用新的账号成功发布了。&lt;/p&gt;
&lt;p&gt;上面说了这么多，其实就是一句话：用不同账号往 bookdown.org 发布书稿，只需在 Manage Account 里添加并保留唯一一个账号即可。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>如何在 R markdown 里输出 r pi 并前后加上小撇`</title>
      <link>/zh/post/backticks-in-rmd/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/backticks-in-rmd/</guid>
      <description>&lt;p&gt;其实本文的标题应该是：如何在文章里显示 &lt;code&gt;`r pi`&lt;/code&gt; 这样的文字。但是我不知道怎么把这个格式弄到标题里。所以，就这样凑合过吧。&lt;/p&gt;
&lt;p&gt;这个问题的答案，要分几层意思来说。&lt;code&gt;`r pi`&lt;/code&gt; 是代码格式（本博客显示为粉底红字），并且包含的`符号同样是代码格式，并且 pi 并没有被编译成 3.1415927。别看它短，这三点每个都是个坑。&lt;/p&gt;
&lt;p&gt;这个问题在编写 R markdown 教程时常见。其实，等你明白这个问题的答案后，会发现答案并不难，难的是如何描述这个问题。我费了好大劲，都想不出一个准确描述的办法，并且在那些支持 markdown 的论坛上，我连这个小撇都输不出来，这叫人怎么问？最后我只能这么提问：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请问在输出文档里怎么显示’撇 r pi 撇’并且别让它编译出来 3.1415927？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;-1--&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 1 层意思，那个小撇 `，它到底叫什么？总不能总叫“小撇”吧？&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/KB_Germany.svg/550px-KB_Germany.svg.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;我用的是德语键盘，挪，就是上图第一行右起第二个键的上面那个小可爱。&lt;/p&gt;
&lt;p&gt;查&lt;a href=&#34;https://en.wikipedia.org/wiki/Grave_accent&#34;&gt;维基百科&lt;/a&gt;才知道，` 的学名叫 &lt;em&gt;Grave accent&lt;/em&gt; ，中文叫“重音符”。在程序猿的世界里，它又被称作 &lt;em&gt;backquote&lt;/em&gt; 或 &lt;em&gt;backtick&lt;/em&gt;，中文叫反引号。所以，跟这个有关的问题可以这么问：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://meta.stackexchange.com/questions/82718/how-do-i-escape-a-backtick-in-markdown&#34;&gt;How do I escape a backtick ` in Markdown?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/20409172/how-to-display-verbatim-inline-r-code-with-backticks-using-rmarkdown&#34;&gt;How to display verbatim/literal inline r code with backticks using Rmarkdown?&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-2-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 2 层意思：怎么把反引号显示出来？&lt;/h3&gt;
&lt;p&gt;如果仅仅输入个反引号 &lt;code&gt;，在同一段里后面没有了还好办，万一又出现一个反引号&lt;/code&gt;，就会把他俩自动配对儿，两者之间的文字当成了代码。瞧，就是上句话这个德性。&lt;/p&gt;
&lt;p&gt;为了棒打鸳鸯不让他俩自动配对儿，那就用转义符\。输入\`，就避免反引号自动配对变代码了。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-3--r-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 3 层意思，是怎么把 r 语言的输出结果显示到代码环境里。&lt;/h3&gt;
&lt;p&gt;这个就开始有点绕了。&lt;/p&gt;
&lt;p&gt;比如，我想在Rmd 源文件里输入 pi，而输出的文档里显示 &lt;code&gt;3.1415927&lt;/code&gt;。注意，光是输出 3.1415927 这容易，输入&lt;code&gt;`r pi`&lt;/code&gt; 就行了，但是怎么显示成代码格式（这里是粉底红字）？在 &lt;code&gt;`r pi`&lt;/code&gt; 外边加一层反引号是不行的。&lt;/p&gt;
&lt;p&gt;正确的方法是: &lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;一个反引号&lt;/code&gt; + &lt;code&gt;r&lt;/code&gt; + &lt;code&gt;pi&lt;/code&gt; + &lt;code&gt;一个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;两个反引号&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;也就是说，&lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; 相当于更外一层的反引号。 R markdown 先看到内层的反引号，进行编译，得到 3.1415927：然后，看到外层的反引号，于是把内层的编译结果表示成代码格式。&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-4--3.1415927-r-pi-r-pi&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 4 层意思，怎么让上面那个 3.1415927 在输出文档里显示源码’r pi’，并且都在代码环境（粉底红色）里，即 &lt;code&gt;r pi&lt;/code&gt;？&lt;/h3&gt;
&lt;p&gt;方法有两种。第一种是用&lt;a href=&#34;https://yihui.name/knitr/faq/&#34;&gt;knitr&lt;/a&gt; 的 &lt;code&gt;inline_expr()&lt;/code&gt; 函数：&lt;code&gt;`r knitr::inline_expr(&#39;pi&#39;)`&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;第二种是用第 3 层意思里说的方法，即 &lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; &lt;code&gt;r&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;pi&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; + &lt;code&gt;两个反引号&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;牢记&lt;strong&gt;&lt;code&gt;两个反引号&lt;/code&gt; + &lt;code&gt;一个空格&lt;/code&gt; = &lt;code&gt;更外一层的反引号&lt;/code&gt;&lt;/strong&gt;，就稍微容易理解一点。&lt;/p&gt;
&lt;p&gt;写到这个地方，我已经要晕车了，但是还没完。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-5--4-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第 5 层意思，怎么在第 4 层意思的基础上再加两个反引号，并显示成粉底红字，即&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;`r pi`&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我现在用的方法是：`&lt;code&gt;``  ``&lt;/code&gt;r ‘60r pi60’` `` `` ``&lt;/p&gt;
&lt;p&gt;这个 &lt;code&gt;\x60&lt;/code&gt; 就是反引号。相当于把反引号弄到字符串里处理。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;-6-&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;完了吗？还没完，还有第 6 层意思。&lt;/h3&gt;
&lt;p&gt;反引号就像个俄罗斯套娃；上文你看到的结果都是渲染出来的，而实际书写的源文档，总会比你看见的外面再多一层。&lt;/p&gt;
&lt;p&gt;写到这里，我不行了，容我扶墙出去呼吸两颗新鲜空气。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>bookdownplus 的两个魔法</title>
      <link>/zh/post/bookdownplus-magic/</link>
      <pubDate>Tue, 27 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/bookdownplus-magic/</guid>
      <description>&lt;p&gt;bookdown 是个好东西，只是入手有点难，酒香巷深。&lt;/p&gt;
&lt;p&gt;对于 R 初学者来说，如果身边没有人指导，使用者可能需要花大量精力应付 LaTeX，YAML，Pandoc，而很多初学者可能从来没听说过这些，站在 bookdown 的门口往里张望了一下，说不定就被吓跑了，从而错过了门里的精彩世界。&lt;/p&gt;
&lt;p&gt;bookdownplus 扩展包，可以让新手对 bookdown 快速上手。从此，bookdown 这坛好酒就不必去深巷苦寻，它就放在你手边。&lt;/p&gt;
&lt;p&gt;从 v1.2.0 开始，bookdownplus 增加了两个魔法，更是让新手对 bookdown 一见钟情。如果你对 bookdown 感兴趣却苦于入门的烦恼，那么可以试试这两个魔法。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;准备工作&lt;/h2&gt;
&lt;p&gt;首先，安装好必需的软件，包括 R, RStudio, &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;等。详见 &lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;bookdown 官方手册&lt;/a&gt;。然后，安装开发版的bookdownplus：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/bookdownplus&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;再用 &lt;code&gt;setwd()&lt;/code&gt; 将R的工作目录设置到一个空文件夹里。&lt;/p&gt;
&lt;p&gt;一切准备就绪后，接下来就是见证奇迹的时刻。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;第一个魔法&lt;/h2&gt;
&lt;p&gt;在 R 里运行下面的代码，然后去喝个茶：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;for (i in template()[1:19])
  bookdownplus(template = i, 
               more_output = more_output()[1:3])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;回来以后，你会在工作目录里看到很多文件和文件夹。打开那个叫做 &lt;code&gt;_book/&lt;/code&gt;的文件夹，Duang！19个示例文档，每个都以 pdf、Word、网页和电子书格式乖乖地等在那里，等你打开了。其中，电子书 epub 格式可以在手机上阅读，也可以在台式机用免费的Calibre软件打开阅读。&lt;/p&gt;
&lt;p&gt;这些示例文档，从学术论文到诗歌乐谱，从中文到英文，展示了 bookdown 能胜任的工作。是不是动心了？&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;第二个魔法&lt;/h2&gt;
&lt;p&gt;运行下面的代码，然后看两眼窗外的风景，bookdownplus 就把事情做完了：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;for (mf in mail_font()) {
  for (ms in mail_style()) {
    for (mt in mail_theme()) {
      outputname &amp;lt;- paste(&amp;#39;mail&amp;#39;, ms, mf, mt, sep = &amp;#39;_&amp;#39;)
      bookdownplus(template = &amp;#39;mail&amp;#39;, 
                   mail_style = ms, 
                   mail_font = mf, 
                   mail_theme = mt, 
                   output_name = outputname)
    }
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;仍然打开那个叫做 &lt;code&gt;_book/&lt;/code&gt;的文件夹，Duang！ 不同字体、不同主题、不同布局的信件示例文档就全部在那里了。&lt;/p&gt;
&lt;p&gt;如果看了这个你还没动心，那么只能说明跟 bookdown 没缘分，趁早放手吧！&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>征求意见: &lt;学R&gt;一书的封面</title>
      <link>/archives/19396</link>
      <pubDate>Mon, 26 Jun 2017 12:56:04 +0000</pubDate>
      
      <guid>/archives/19396</guid>
      <description>&lt;p&gt;我正在出版的&lt;a href=&#34;http://xuer.pzhao.org/&#34; target=&#34;_blank&#34;&gt;&amp;lt;学R&amp;gt;一书&lt;/a&gt;, 美编为封面设计提供了三个方案, 大家看看最喜欢哪一个?&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_1.jpg&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_1.jpg&#34; alt=&#34;&#34; width=&#34;800&#34; height=&#34;375&#34; class=&#34;alignnone size-full wp-image-19397&#34; srcset=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_1.jpg 800w, http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_1-300x141.jpg 300w, http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_1-768x360.jpg 768w&#34; sizes=&#34;(max-width: 800px) 100vw, 800px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_2.jpg&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_2.jpg&#34; alt=&#34;&#34; width=&#34;800&#34; height=&#34;375&#34; class=&#34;alignnone size-full wp-image-19398&#34; srcset=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_2.jpg 800w, http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_2-300x141.jpg 300w, http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_2-768x360.jpg 768w&#34; sizes=&#34;(max-width: 800px) 100vw, 800px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_3.jpg&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_3.jpg&#34; alt=&#34;&#34; width=&#34;800&#34; height=&#34;375&#34; class=&#34;alignnone size-full wp-image-19399&#34; srcset=&#34;http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_3.jpg 800w, http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_3-300x141.jpg 300w, http://pzhao.org/wp-content/uploads/2017/06/ir语言1－3_Page_3-768x360.jpg 768w&#34; sizes=&#34;(max-width: 800px) 100vw, 800px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://dapengde.com/archives/19396&#34; target=&#34;_blank&#34;&gt;原文链接&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>发布了 4 个 R 语言包：bookdownplus, pinyin, mindr, beginr</title>
      <link>/archives/19377</link>
      <pubDate>Fri, 23 Jun 2017 18:29:38 +0000</pubDate>
      
      <guid>/archives/19377</guid>
      <description>&lt;p&gt;最近，一口气往 CRAN 提交了四个 R 扩展包，所幸都被发布了，这里简单介绍一下。详细情况请来&lt;a href=&#34;http://pzhao.org&#34; target=&#34;_blank&#34;&gt;我的新网站&lt;/a&gt;围观。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;bookdownplus&lt;/strong&gt; &lt;span class=&#34;citation&#34;&gt;(Zhao 2017b)&lt;/span&gt;。 ![CRAN downloads][2]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这个包是对 bookdown 包 &lt;span class=&#34;citation&#34;&gt;(Xie 2016)&lt;/span&gt; 的增强和简化。bookdown 就好比 Microsoft Word 或 LaTeX，可以用来写文档，而 bookdownplus 提供了很多有用的模板，可以很方便地在 bookdown 平台写期刊论文、学位论文、学术海报、化学分子式、信件、日记、日历、诗集、吉他谱等各种常用文档和书籍。这是功能上的增强（+）。bookdownplus 使用时只需指定一个模板，给定作者和书名，就可以一键生成模板文件，用户在模板文件里照猫画虎写自己的文字就可以了，不必再花力气上网找模板、设置 YAML 和 LaTeX。这是操作上的简化（-）。详见&lt;a href=&#34;http://www.pzhao.org/zh/post/bookdownplus-released/&#34; target=&#34;_blank&#34;&gt;相关帖子&lt;/a&gt;。安装方法：&lt;/p&gt;

&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 稳定版：
install.packages(&#39;bookdownplus&#39;)
# 开发版：
devtools::install_github(&#34;pzhaonet/bookdownplus&#34;)&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;mindr&lt;/strong&gt; &lt;span class=&#34;citation&#34;&gt;(Zhao 2017c)&lt;/span&gt;。 ![CRAN downloads][4]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;用来从 markdown 或 R markdown 格式的书稿中提取纲要，并且生成思维导图。也可以将思维导图转换成 markdown 文件。详见&lt;a href=&#34;http://www.pzhao.org/zh/post/mindr/&#34; target=&#34;_blank&#34;&gt;相关帖子&lt;/a&gt;。安装方法：&lt;/p&gt;

&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 稳定版：
install.packages(&#39;mindr&#39;)
# 开发版：
devtools::install_github(&#34;pzhaonet/mindr&#34;)&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;pinyin&lt;/strong&gt; &lt;span class=&#34;citation&#34;&gt;(Zhao 2017d)&lt;/span&gt;。 ![CRAN downloads][6]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;用来把汉字转换成拼音，格式可选。可以转换给定汉字，也可以批量转换文本文件。这个包里有个特别的函数，专门为 bookdown 书稿的章节标题自动生成&lt;a href=&#34;https://bookdown.org/yihui/bookdown/cross-references.html&#34; target=&#34;_blank&#34;&gt;‘{#ID}’&lt;/a&gt;，原标题里的拉丁字母自动改为小写，汉字自动转换成拼音，而其他字符替换为&lt;code&gt;_&lt;/code&gt;。详见&lt;a href=&#34;http://www.pzhao.org/zh/post/pinyin/&#34; target=&#34;_blank&#34;&gt;相关帖子&lt;/a&gt;。安装方法：&lt;/p&gt;

&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 稳定版：
install.packages(&#39;pinyin&#39;)
# 开发版：
devtools::install_github(&#34;pzhaonet/pinyin&#34;)&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;beginr&lt;/strong&gt; &lt;span class=&#34;citation&#34;&gt;(Zhao 2017a)&lt;/span&gt;。 ![CRAN downloads][9]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;是为 R 语言初学者写的工具包，可能对中级用户也有帮助，包含了一些简化操作的函数和备忘录。其实这个包的文档我的写得不够详细，之所以匆匆发布，是想先把 ‘beginr’ 这个名字给占住。毕竟，我中意的名字如 learnr, startr都被别人用过了。详见&lt;a href=&#34;http://www.pzhao.org/zh/post/beginr-released/&#34; target=&#34;_blank&#34;&gt;相关帖子&lt;/a&gt;。安装方法：&lt;/p&gt;

&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 稳定版：
install.packages(&#39;beginr&#39;)
# 开发版：
devtools::install_github(&#34;pzhaonet/beginr&#34;)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;参考文献&lt;/strong&gt;&lt;/p&gt;

&lt;div id=&#34;refs&#34; class=&#34;references&#34;&gt;
  &lt;div id=&#34;ref-R-bookdown&#34;&gt;
    &lt;p&gt;
      Xie, Yihui. 2016. &lt;em&gt;Bookdown: Authoring Books and Technical Documents with R Markdown&lt;/em&gt;. Boca Raton, Florida: Chapman; Hall/CRC. &lt;a href=&#34;https://github.com/rstudio/bookdown&#34; class=&#34;uri&#34;&gt;https://github.com/rstudio/bookdown&lt;/a&gt;.
    &lt;/p&gt;
  &lt;/div&gt;
  

&lt;p&gt;&lt;div id=&#34;ref-R-beginr&#34;&gt;
    &lt;p&gt;
      Zhao, Peng. 2017a. &lt;em&gt;Beginr: Functions for R Beginners&lt;/em&gt;. &lt;a href=&#34;https://github.com/pzhaonet/beginr&#34; class=&#34;uri&#34;&gt;&lt;a href=&#34;https://github.com/pzhaonet/beginr&#34; target=&#34;_blank&#34;&gt;https://github.com/pzhaonet/beginr&lt;/a&gt;&lt;/a&gt;.
    &lt;/p&gt;
  &lt;/div&gt;&lt;/p&gt;

&lt;p&gt;&lt;div id=&#34;ref-R-bookdownplus&#34;&gt;
    &lt;p&gt;
      ———. 2017b. &lt;em&gt;Bookdownplus: Generate Varied Books and Documents with R ’Bookdown’ Package&lt;/em&gt;. &lt;a href=&#34;https://CRAN.R-project.org/package=bookdownplus&#34; class=&#34;uri&#34;&gt;&lt;a href=&#34;https://CRAN.R-project.org/package=bookdownplus&#34; target=&#34;_blank&#34;&gt;https://CRAN.R-project.org/package=bookdownplus&lt;/a&gt;&lt;/a&gt;.
    &lt;/p&gt;
  &lt;/div&gt;&lt;/p&gt;

&lt;p&gt;&lt;div id=&#34;ref-R-mindr&#34;&gt;
    &lt;p&gt;
      ———. 2017c. &lt;em&gt;Mindr: Convert Files Between Markdown or Rmarkdown Files and Mindmaps&lt;/em&gt;. &lt;a href=&#34;https://github.com/pzhaonet/mindr&#34; class=&#34;uri&#34;&gt;&lt;a href=&#34;https://github.com/pzhaonet/mindr&#34; target=&#34;_blank&#34;&gt;https://github.com/pzhaonet/mindr&lt;/a&gt;&lt;/a&gt;.
    &lt;/p&gt;
  &lt;/div&gt;&lt;/p&gt;

&lt;p&gt;&lt;div id=&#34;ref-R-pinyin&#34;&gt;
    &lt;p&gt;
      ———. 2017d. &lt;em&gt;Pinyin: Convert Chinese Characters into Pinyin&lt;/em&gt;. &lt;a href=&#34;https://github.com/pzhaonet/pinyin&#34; class=&#34;uri&#34;&gt;&lt;a href=&#34;https://github.com/pzhaonet/pinyin&#34; target=&#34;_blank&#34;&gt;https://github.com/pzhaonet/pinyin&lt;/a&gt;&lt;/a&gt;.
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;/p&gt;

&lt;p&gt;[2]: data:image/svg+xml; charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMjAiPgogIDxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDI9IjAiIHkyPSIxMDAlIj4KICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8bWFzayBpZD0iYSI+CiAgICA8cmVjdCB3aWR0aD0iMTA4IiBoZWlnaHQ9IjIwIiByeD0iMyIgZmlsbD0iI2ZmZiIvPgogIDwvbWFzaz4KICA8ZyBtYXNrPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjNTU1IiBkPSJNMCAwaDcwdjIwSDB6Ii8+CiAgICA8cGF0aCBmaWxsPSIjMDA3ZWM2IiBkPSJNNzAgMGgzOHYyMEg3MHoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoMTA4djIwSDB6Ii8+CiAgPC9nPgogIDxnIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiCiAgICAgZm9udC1mYW1pbHk9IkRlamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPgogICAgPHRleHQgeD0iMzYiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj4KICAgICAgZG93bmxvYWRzCiAgICA8L3RleHQ+CiAgICA8dGV4dCB4PSIzNiIgeT0iMTQiPgogICAgICBkb3dubG9hZHMKICAgIDwvdGV4dD4KICAgIDx0ZXh0IHg9Ijg4IiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+CiAgICAgIDIyNgogICAgPC90ZXh0PgogICAgPHRleHQgeD0iODgiIHk9IjE0Ij4KICAgICAgMjI2CiAgICA8L3RleHQ+CiAgPC9nPgo8L3N2Zz4=&lt;/p&gt;

&lt;p&gt;[4]: data:image/svg+xml; charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMjAiPgogIDxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDI9IjAiIHkyPSIxMDAlIj4KICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8bWFzayBpZD0iYSI+CiAgICA8cmVjdCB3aWR0aD0iMTA4IiBoZWlnaHQ9IjIwIiByeD0iMyIgZmlsbD0iI2ZmZiIvPgogIDwvbWFzaz4KICA8ZyBtYXNrPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjNTU1IiBkPSJNMCAwaDcwdjIwSDB6Ii8+CiAgICA8cGF0aCBmaWxsPSIjMDA3ZWM2IiBkPSJNNzAgMGgzOHYyMEg3MHoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoMTA4djIwSDB6Ii8+CiAgPC9nPgogIDxnIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiCiAgICAgZm9udC1mYW1pbHk9IkRlamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPgogICAgPHRleHQgeD0iMzYiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj4KICAgICAgZG93bmxvYWRzCiAgICA8L3RleHQ+CiAgICA8dGV4dCB4PSIzNiIgeT0iMTQiPgogICAgICBkb3dubG9hZHMKICAgIDwvdGV4dD4KICAgIDx0ZXh0IHg9Ijg4IiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+CiAgICAgIDE5OQogICAgPC90ZXh0PgogICAgPHRleHQgeD0iODgiIHk9IjE0Ij4KICAgICAgMTk5CiAgICA8L3RleHQ+CiAgPC9nPgo8L3N2Zz4=&lt;/p&gt;

&lt;p&gt;[6]: data:image/svg+xml; charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMjAiPgogIDxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDI9IjAiIHkyPSIxMDAlIj4KICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8bWFzayBpZD0iYSI+CiAgICA8cmVjdCB3aWR0aD0iMTA4IiBoZWlnaHQ9IjIwIiByeD0iMyIgZmlsbD0iI2ZmZiIvPgogIDwvbWFzaz4KICA8ZyBtYXNrPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjNTU1IiBkPSJNMCAwaDcwdjIwSDB6Ii8+CiAgICA8cGF0aCBmaWxsPSIjMDA3ZWM2IiBkPSJNNzAgMGgzOHYyMEg3MHoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoMTA4djIwSDB6Ii8+CiAgPC9nPgogIDxnIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiCiAgICAgZm9udC1mYW1pbHk9IkRlamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPgogICAgPHRleHQgeD0iMzYiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj4KICAgICAgZG93bmxvYWRzCiAgICA8L3RleHQ+CiAgICA8dGV4dCB4PSIzNiIgeT0iMTQiPgogICAgICBkb3dubG9hZHMKICAgIDwvdGV4dD4KICAgIDx0ZXh0IHg9Ijg4IiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+CiAgICAgIDEzNAogICAgPC90ZXh0PgogICAgPHRleHQgeD0iODgiIHk9IjE0Ij4KICAgICAgMTM0CiAgICA8L3RleHQ+CiAgPC9nPgo8L3N2Zz4=&lt;/p&gt;

&lt;p&gt;[9]: data:image/svg+xml; charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMjAiPgogIDxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDI9IjAiIHkyPSIxMDAlIj4KICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8bWFzayBpZD0iYSI+CiAgICA8cmVjdCB3aWR0aD0iMTA4IiBoZWlnaHQ9IjIwIiByeD0iMyIgZmlsbD0iI2ZmZiIvPgogIDwvbWFzaz4KICA8ZyBtYXNrPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjNTU1IiBkPSJNMCAwaDcwdjIwSDB6Ii8+CiAgICA8cGF0aCBmaWxsPSIjMDA3ZWM2IiBkPSJNNzAgMGgzOHYyMEg3MHoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoMTA4djIwSDB6Ii8+CiAgPC9nPgogIDxnIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiCiAgICAgZm9udC1mYW1pbHk9IkRlamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPgogICAgPHRleHQgeD0iMzYiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj4KICAgICAgZG93bmxvYWRzCiAgICA8L3RleHQ+CiAgICA8dGV4dCB4PSIzNiIgeT0iMTQiPgogICAgICBkb3dubG9hZHMKICAgIDwvdGV4dD4KICAgIDx0ZXh0IHg9Ijg4IiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+CiAgICAgIDQ3MAogICAgPC90ZXh0PgogICAgPHRleHQgeD0iODgiIHk9IjE0Ij4KICAgICAgNDcwCiAgICA8L3RleHQ+CiAgPC9nPgo8L3N2Zz4=&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://dapengde.com/archives/19377&#34; target=&#34;_blank&#34;&gt;原文链接&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>R 初学者包 beginr 在 CRAN 正式发布</title>
      <link>/zh/post/beginr-released/</link>
      <pubDate>Fri, 23 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/beginr-released/</guid>
      <description>&lt;p&gt;又一次高兴地宣布, 我的 R 语言扩展包 ‘beginr’ &lt;span class=&#34;citation&#34;&gt;(Zhao 2017a)&lt;/span&gt; 在 CRAN &lt;a href=&#34;https://cran.r-project.org/web/packages/beginr/&#34;&gt;正式发布&lt;/a&gt;了.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cranlogs.r-pkg.org/badges/grand-total/beginr&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;简介&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;beginr&lt;/code&gt;是我为 R 语言初学者和自己写的工具包, 是我这些年来收集和自己编写的一些简化操作的函数和备忘录, 可能对中级用户也有帮助. 其实这个包的文档我写得不够详细, 有些函数还没来及整理进去, 之所以匆匆发布, 是想先把 ‘beginr’ 这个名字给占住. 毕竟, 我中意的名字如 ‘learnr’, ’startr’都被别人用过了.&lt;/p&gt;
&lt;p&gt;安装方法：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 稳定版：
install.packages(&amp;#39;beginr&amp;#39;)
# 开发版：
devtools::install_github(&amp;quot;pzhaonet/beginr&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下面分类介绍一下其中的函数.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;备忘函数&lt;/h1&gt;
&lt;p&gt;我初学 R 的时候用 &lt;code&gt;plot()&lt;/code&gt; 作图时, 常常忘记不同形状数据点(&lt;code&gt;pch&lt;/code&gt;)对应的编号, 实线虚线(&lt;code&gt;lty&lt;/code&gt;)的编号, 散点图类型(&lt;code&gt;type&lt;/code&gt;)的代码, 以及最难选择的颜色代码. 每次忘了都要上网搜一下. 现在, beginr 里提供了 &lt;code&gt;plotpch()&lt;/code&gt;, &lt;code&gt;plotlty()&lt;/code&gt;, &lt;code&gt;plottype()&lt;/code&gt;, &lt;code&gt;plotcolors()&lt;/code&gt;, &lt;code&gt;plotcolorbar()&lt;/code&gt;等函数, 想不起来的时候运行一下就行了.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::plotpch()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::plotlty()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-1-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::plottype()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-1-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::plotcolors()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-1-4.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::plotcolorbar()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-1-5.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;快速作图函数&lt;/h1&gt;
&lt;p&gt;我常常需要做线性拟合, 每次又是作图又是添加拟合方程, 繁琐. 现在, beginr 里的一个 &lt;code&gt;plotlm()&lt;/code&gt;函数就搞定.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- 1:10
y &amp;lt;- 1:10 + rnorm(10)
beginr::plotlm(x, y)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;## [[1]]
##              Estimate Std. Error  t value     Pr(&amp;gt;|t|)
## (Intercept) 1.1122649 0.57896933 1.921112 9.095942e-02
## x           0.7491103 0.09330936 8.028244 4.257399e-05
## 
## [[2]]
## [1] 0.8895831&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;经常需要了解一组数据的分布, 看看是不是正态分布. beginr 里的 &lt;code&gt;plothist()&lt;/code&gt; 函数不仅做出直方图和平滑曲线, 并且标出中值, 中位数, 四分位数, 标准偏差, 样本数, 以及用来判断是否正态分布的 skewness 值.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- rnorm(10000)
beginr::plothist(x)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;我很喜欢系统自带的成对儿散点图函数&lt;code&gt;pairs()&lt;/code&gt;, 只是功能再强大一点就好了. beginr 里的 &lt;code&gt;plotpairs()&lt;/code&gt; 和 &lt;code&gt;plotpairs2()&lt;/code&gt; 可以实现.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df &amp;lt;- data.frame(a = 1:10, b = 1:10 + rnorm(10), c = 1:10 + rnorm(10))
beginr::plotpairs(df)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::plotpairs2(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;p&amp;lt;0.01&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;p&amp;lt;0.01&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;p&amp;lt;0.01&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-4-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;我经常需要将一组自变量 (x) 和多组因变量 (y&lt;sub&gt;1&lt;/sub&gt;, y&lt;sub&gt;2&lt;/sub&gt;, …, y&lt;sub&gt;n&lt;/sub&gt;) 作在同一个坐标系, 或者一组因变量 (y) 对多组自变量 ((x&lt;sub&gt;1&lt;/sub&gt;, x&lt;sub&gt;2&lt;/sub&gt;, …, x&lt;sub&gt;n&lt;/sub&gt;)), 并且画上各自的误差线. beginr 里一条 &lt;code&gt;dfplot()&lt;/code&gt; 或 &lt;code&gt;dfplot2()&lt;/code&gt; 函数就能完成.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- seq(0, 2 * pi, length.out = 100)
y &amp;lt;- data.frame(sin(x), cos(x))
yerror &amp;lt;- data.frame(abs(rnorm(100, sd = 0.3)), abs(rnorm(100, sd = 0.1)))
beginr::dfplot(x, y, yerror = yerror)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::dfplot2(y, x, xerror = yerror)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-5-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;如果只是想简单添加误差线, 那就用 &lt;code&gt;errorbar()&lt;/code&gt; 函数.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- seq(0, 2 * pi, length.out = 100)
y &amp;lt;- sin(x)
plot(x, y, type = &amp;quot;l&amp;quot;)
beginr::errorbar(x, y, yupper = 0.1, ylower = 0.1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;数据框操作&lt;/h1&gt;
&lt;p&gt;beginr 提供了一些对数据框计算的函数, 例如计算多列数据两两的相关性和线性拟合结果, 可以用 &lt;code&gt;lmdf()&lt;/code&gt; 函数.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df &amp;lt;- data.frame(a = 1:10, b = 1:10 + rnorm(10), c = 1:10 + rnorm(10))
beginr::lmdf(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   x y r.squared adj.r.squared    intercept     slope Std.Error.intercept
## 1 a b 0.9504570     0.9442641 -0.008669419 0.9549422           0.4782856
## 2 a c 0.8916960     0.8781580 -0.295677576 1.0165898           0.7772218
## 3 b a 0.9504570     0.9442641  0.281115101 0.9953032           0.4780765
## 4 b c 0.7705537     0.7418730  0.236733958 0.9647793           1.1076032
## 5 c a 0.8916960     0.8781580  0.855024005 0.8771443           0.6627661
## 6 c b 0.7705537     0.7418730  1.014028718 0.7986840           0.9449076
##   Std.Error.slope t.intercept   t.slope Pr.intercept     Pr.slope
## 1      0.07708270 -0.01812603 12.388541    0.9859822 1.681047e-06
## 2      0.12526064 -0.38042880  8.115796    0.7135294 3.937098e-05
## 3      0.08034063  0.58801275 12.388541    0.5727444 1.681047e-06
## 4      0.18613241  0.21373536  5.183296    0.8361002 8.393632e-04
## 5      0.10807866  1.29008400  8.115796    0.2330604 3.937098e-05
## 6      0.15408806  1.07315114  5.183296    0.3145043 8.393632e-04&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;还有两个函数对&lt;code&gt;tapply()&lt;/code&gt;进行了改善, 用来进行因子计算.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::tapplydf()
beginr::tapplydfv()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;文件读写函数&lt;/h1&gt;
&lt;p&gt;经常需要同时对多个数据文件进行处理, 逐个读入 R 里太麻烦. beginr 提供了个 &lt;code&gt;readdir()&lt;/code&gt; 函数, 可以一次性把指定文件夹里所有数据读入, 保存在一个列表 (list) 里.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::readdir()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;R 自带的 write 系列文件保存函数, 一不小心就把原有同名文件给覆盖了. beginr 提供了个安全的函数 &lt;code&gt;writefile()&lt;/code&gt;, 避免一失足成千古恨.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::writefile()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;list2ascii()&lt;/code&gt; 函数可以把一个列表原样保存成文本文件.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;alist &amp;lt;- list(a = 1:10, b = letters)
beginr::list2ascii(alist)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;扩展包函数&lt;/h1&gt;
&lt;p&gt;很多人引用了别人的工作却往往不列出参考文献. 不仅初学者常常如此, 很多学术论文里有些插图一眼就能看出是 R 的某个扩展包作出来的, 但参考文献里却没有列出来, 这往小了说是不尊重别人的工作,往大了说是缺乏学术道德. 对开源社区的生态圈是不利的. beginr 为初学者提供了 &lt;code&gt;bib()&lt;/code&gt; 函数, 可以为指定的 R 扩展包生成文献引用信息, 既可以打印出结果, 也可以直接保存为 ‘.bib’文件方便为’&lt;a href=&#34;http://www.pzhao.org/zh/post/bookdownplus-released/&#34;&gt;bookdownplus&lt;/a&gt;‘&lt;span class=&#34;citation&#34;&gt;(Zhao 2017b)&lt;/span&gt; 或’&lt;a href=&#34;http://www.pzhao.org/zh/post/r-blogdown/&#34;&gt;blogdown&lt;/a&gt;’ &lt;span class=&#34;citation&#34;&gt;(Xie 2017)&lt;/span&gt; 调用.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::bib(pkg = c(&amp;quot;mindr&amp;quot;, &amp;quot;bookdownplus&amp;quot;, &amp;quot;pinyin&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## @Manual{R-bookdownplus,
##   title = {bookdownplus: Generate Assorted Books and Documents with R &amp;#39;bookdown&amp;#39; Package},
##   author = {Peng Zhao},
##   year = {2018},
##   note = {R package version 1.4.3},
##   url = {https://github.com/pzhaonet/bookdownplus},
## }
## @Manual{R-mindr,
##   title = {mindr: Convert Files Between Markdown or Rmarkdown Files and Mindmaps},
##   author = {Peng Zhao},
##   year = {2018},
##   note = {R package version 1.1.1},
##   url = {https://github.com/pzhaonet/mindr},
## }
## @Manual{R-pinyin,
##   title = {pinyin: Convert Chinese Characters into Pinyin},
##   author = {Peng Zhao},
##   year = {2018},
##   note = {R package version 1.1.1},
##   url = {https://github.com/pzhaonet/pinyin},
## }&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;plotpkg()&lt;/code&gt;函数可以做出一张图，来展示指定扩展包在CRAN上被用户下载的次数：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::plotpkg(&amp;quot;beginr&amp;quot;, &amp;quot;2017-06-23&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-23-beginr_released_files/figure-html/unnamed-chunk-13-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;新手可以用&lt;code&gt;rpkg()&lt;/code&gt;函数快速创建自己的扩展包.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::rpkg()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;好啦, 以后我还会把更多有用的工具添加到 beginr 包里. 欢迎关注 beginr的&lt;a href=&#34;https://github.com/pzhaonet/beginr&#34;&gt;项目主页&lt;/a&gt;. 另外, 使用beginr的地方请记得列出参考文献哦.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;beginr::bib(pkg = c(&amp;quot;beginr&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## @Manual{R-beginr,
##   title = {beginr: Functions for R Beginners},
##   author = {Peng Zhao},
##   year = {2017},
##   note = {R package version 0.1.2},
##   url = {https://github.com/pzhaonet/beginr},
## }&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;section level2 unnumbered&#34;&gt;
&lt;h2&gt;参考文献&lt;/h2&gt;
&lt;div id=&#34;refs&#34; class=&#34;references&#34;&gt;
&lt;div id=&#34;ref-R-blogdown&#34;&gt;
&lt;p&gt;Xie, Yihui. 2017. &lt;em&gt;Blogdown: Create Blogs and Websites with R Markdown&lt;/em&gt;. &lt;a href=&#34;https://github.com/rstudio/blogdown&#34; class=&#34;uri&#34;&gt;https://github.com/rstudio/blogdown&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-beginr&#34;&gt;
&lt;p&gt;Zhao, Peng. 2017a. &lt;em&gt;Beginr: Functions for R Beginners&lt;/em&gt;. &lt;a href=&#34;https://CRAN.R-project.org/package=beginr&#34; class=&#34;uri&#34;&gt;https://CRAN.R-project.org/package=beginr&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-bookdownplus&#34;&gt;
&lt;p&gt;———. 2017b. &lt;em&gt;Bookdownplus: Generate Varied Types of Books and Documents with R ’Bookdown’ Package&lt;/em&gt;. &lt;a href=&#34;https://CRAN.R-project.org/package=bookdownplus&#34; class=&#34;uri&#34;&gt;https://CRAN.R-project.org/package=bookdownplus&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R 包 bookdownplus 正式发布</title>
      <link>/zh/post/bookdownplus-released/</link>
      <pubDate>Thu, 22 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/bookdownplus-released/</guid>
      <description>&lt;p&gt;很高兴地宣布，我的 R 语言扩展包 ‘bookdownplus v1.0.2’ &lt;span class=&#34;citation&#34;&gt;(Zhao 2017a)&lt;/span&gt; 在 CRAN &lt;a href=&#34;https://cran.r-project.org/web/packages/bookdownplus/&#34;&gt;正式发布&lt;/a&gt;了。本文是对’bookdownplus v1.0.2’的简要描述. 由于最近更新频繁, 最新版的’bookdownplus’更加强大和易用, 例如 ‘bookdownplus v1.2.0’ 可以一条指令生成19个模板文档的 pdf, word, html 和 epub 四种格式. 建议移步位于 GitHub 的 &lt;a href=&#34;http://github.com/pzhaonet/bookdownplus&#34;&gt;bookdownplus 项目主页&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cranlogs.r-pkg.org/badges/grand-total/bookdownplus&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-06-22-bookdownplus_released_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;简介&lt;/h1&gt;
&lt;p&gt;bookdownplus 是对 bookdown 包 &lt;span class=&#34;citation&#34;&gt;(Xie 2016)&lt;/span&gt; 的增强和简化, 是快速使用 bookdown 的最简洁方法。bookdown 就好比 Microsoft Word 或 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;，可以用来写文档，而 bookdownplus 提供了很多有用的模板，可以很方便地在 bookdown 平台写期刊论文、学位论文、学术海报、化学分子式、信件、日记、日历、诗集、吉他谱等各种常用文档和书籍。这是功能上的增强（+）。&lt;/p&gt;
&lt;p&gt;bookdownplus 使用时只需指定一个模板，给定作者和书名，就可以一键生成模板文件，用户在模板文件里照猫画虎写自己的文字就可以了，不必再花力气上网找模板、设置 YAML 和 LaTeX。这是操作上的简化（-）。&lt;/p&gt;
&lt;p&gt;bookdownplus 各个模板的使用方法详见 &lt;a href=&#34;https://bookdown.org/baydap/bookdownplus&#34;&gt;R bookdownplus Textbook&lt;/a&gt;。这本电子书本身就是用 bookdownplus 生成的，尤其是它的 &lt;a href=&#34;https://bookdown.org/baydap/bookdownplus/bookdownplus.pdf&#34;&gt;pdf 版本&lt;/a&gt;很美观。此书的源码开放，可以作为使用 bookdownplus写书的示例。&lt;/p&gt;
&lt;p&gt;下面是 bookdownplus 的简介和快速使用方法。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level1&#34;&gt;
&lt;h1&gt;快速入门&lt;/h1&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;准备&lt;/h2&gt;
&lt;p&gt;在开始前，需要安装 R, RStudio, bookdown，和其他依赖的软件和包(例如 &lt;code&gt;Pandoc&lt;/code&gt;, &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt;, &lt;code&gt;rmarkdown&lt;/code&gt;, &lt;code&gt;rticle&lt;/code&gt;, &lt;code&gt;knitr&lt;/code&gt;等)，作为准备。详见 &lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;bookdown 官方手册&lt;/a&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;p&gt;准备完毕后，就可以安装 bookdownplus 了。可以安装稳定版：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;bookdownplus&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;或开发版：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/bookdownplus&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;生成模板文件&lt;/h2&gt;
&lt;p&gt;接着，在 R 中运行下面的代码：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdownplus::bookdownplus()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这时，在你的工作目录（&lt;code&gt;getwd()&lt;/code&gt;），会得到一些模板文件（如 &lt;code&gt;index.Rmd&lt;/code&gt;，&lt;code&gt;body.Rmd&lt;/code&gt;， &lt;code&gt;bookdownplus.Rproj&lt;/code&gt;） 和文件夹。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;编译成书&lt;/h2&gt;
&lt;p&gt;用 RStudio 打开 &lt;code&gt;bookdownplus.Rproj&lt;/code&gt;文件，然后按 &lt;code&gt;ctrl+shift+b&lt;/code&gt;，Duang！你就得到模板书 &lt;code&gt;*.pdf&lt;/code&gt;了！保存在 &lt;code&gt;_book/&lt;/code&gt; 文件夹里。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;你的文字&lt;/h2&gt;
&lt;p&gt;在 &lt;code&gt;index.Rmd&lt;/code&gt; 和 &lt;code&gt;body.Rmd&lt;/code&gt; 里写你自己的文字，享受写书的快乐吧！自古皆死，不朽者文。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更多输出格式&lt;/h2&gt;
&lt;p&gt;模板默认生成的书是pdf格式。‘bookdownplus’ 从 1.0.3 开始，可以很方便地输出更多格式，包括国内最常见的 ’word’格式，网页’html’格式和电子书’epub’格式，只需运行：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdownplus::bookdownplus(template = &amp;#39;article&amp;#39;, more_output = c(&amp;#39;html&amp;#39;, &amp;#39;word&amp;#39;, &amp;#39;epub&amp;#39;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;就可以在 &lt;code&gt;_book/&lt;/code&gt; 文件夹里看到这些文件了。&lt;/p&gt;
&lt;p&gt;网页格式可以极其方便地免费发布到 &lt;a href=&#34;https://bookdown.org&#34;&gt;bookdown.org&lt;/a&gt;，只需运行：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdown::publish_book()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里是 bookdown 书籍的大本营。截至 2017 年 6 月，我有三本书被放置在这个网站的首页。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更多建议&lt;/h2&gt;
&lt;p&gt;我开发的另外两个 R 包可以配合 ‘bookdown’ 使用：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;mindr &lt;span class=&#34;citation&#34;&gt;(Zhao 2017b)&lt;/span&gt;，可以从 markdown 或 R markdown 格式的书稿中提取纲要，并且生成思维导图。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;pinyin &lt;span class=&#34;citation&#34;&gt;(Zhao 2017c)&lt;/span&gt;，可以为书稿的章节标题自动生成&lt;a href=&#34;https://bookdown.org/yihui/bookdown/cross-references.html&#34;&gt;‘{#ID}’&lt;/a&gt;。如果标题里含有汉字，就会自动转换成拼音。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体用法见他们的帮助信息。这两个包已经在 CRAN正式发布，安装命令是：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;#39;mindr&amp;#39;)
install.packages(&amp;#39;pinyin&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更改模板&lt;/h2&gt;
&lt;p&gt;上述快速入门得到的模板文档是默认的论文文档。只需在上述步骤里为 &lt;code&gt;bookdownplus()&lt;/code&gt; 函数指定模板名称，就可以用类似的操作得到其他模板的示范文档，如：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bookdownplus::bookdownplus(template = &amp;#39;poem&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下面展示一些模板。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;article&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;article_mdpi1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article_mdpi.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;article_zh&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+article_zh.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;calendar&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+calendar.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;chemistry&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+chemistry.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;guitar&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+guitar.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;journal&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+journal.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mail&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+mail.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+mail2.png&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;poem&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poem.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;thesis_classic&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_classic.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;thesis_ubt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_ubt.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;thesis_zju&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+thesis_zju.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;yihui_demo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_demo.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;yihui_mini&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_mini.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;yihui_zh&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+yihui_zh.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;poster&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poster_ocean.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/bookdown-plus/master/showcase/bookdown+poster_eco.jpg&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;更新记录&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;2017-06-21. &lt;a href=&#34;https://cran.r-project.org/web/packages/bookdownplus/index.html&#34;&gt;Released on CRAN&lt;/a&gt;!&lt;/li&gt;
&lt;li&gt;2017-06-21. &lt;strong&gt;Version 1.0.2.&lt;/strong&gt; Resubmitted to CRAN!&lt;/li&gt;
&lt;li&gt;2017-06-21. &lt;strong&gt;Version 1.0.2.&lt;/strong&gt; Resubmitted to CRAN!&lt;/li&gt;
&lt;li&gt;2017-06-21. &lt;strong&gt;Version 1.0.1.&lt;/strong&gt; Submitted to CRAN!&lt;/li&gt;
&lt;li&gt;2017-06-14. &lt;strong&gt;Version 0.0.1.&lt;/strong&gt; A bug fixed.&lt;/li&gt;
&lt;li&gt;2017-05-15. &lt;strong&gt;Version 0.0.0.&lt;/strong&gt; A very preliminary version.&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;refs&#34; class=&#34;references&#34;&gt;
&lt;div id=&#34;ref-R-bookdown&#34;&gt;
&lt;p&gt;Xie, Yihui. 2016. &lt;em&gt;Bookdown: Authoring Books and Technical Documents with R Markdown&lt;/em&gt;. Boca Raton, Florida: Chapman; Hall/CRC. &lt;a href=&#34;https://github.com/rstudio/bookdown&#34; class=&#34;uri&#34;&gt;https://github.com/rstudio/bookdown&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-bookdownplus&#34;&gt;
&lt;p&gt;Zhao, Peng. 2017a. &lt;em&gt;Bookdownplus: Generate Varied Books and Documents with R ’Bookdown’ Package&lt;/em&gt;. &lt;a href=&#34;https://CRAN.R-project.org/package=bookdownplus&#34; class=&#34;uri&#34;&gt;https://CRAN.R-project.org/package=bookdownplus&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-mindr&#34;&gt;
&lt;p&gt;———. 2017b. &lt;em&gt;Mindr: Convert Files Between Markdown or Rmarkdown Files and Mindmaps&lt;/em&gt;. &lt;a href=&#34;https://github.com/pzhaonet/mindr&#34; class=&#34;uri&#34;&gt;https://github.com/pzhaonet/mindr&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-R-pinyin&#34;&gt;
&lt;p&gt;———. 2017c. &lt;em&gt;Pinyin: Convert Chinese Characters into Pinyin&lt;/em&gt;. &lt;a href=&#34;https://github.com/pzhaonet/pinyin&#34; class=&#34;uri&#34;&gt;https://github.com/pzhaonet/pinyin&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R包发布记</title>
      <link>/zh/post/publish-r-packages/</link>
      <pubDate>Mon, 19 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>/zh/post/publish-r-packages/</guid>
      <description>&lt;p&gt;最近，我把&lt;a href=&#34;http://www.pzhao.org/zh/post/mindr/&#34;&gt;mindr&lt;/a&gt;，&lt;a href=&#34;http://www.pzhao.org/zh/post/pinyin/&#34;&gt;pinyin&lt;/a&gt; 和 &lt;a href=&#34;http://www.pzhao.org/zh/post/bookdown-plus/&#34;&gt;bookdownplus&lt;/a&gt; 三个包都提交到了 CRAN。这三个包都很简单，我就是想体验一下发布R包的流程，免得将来&lt;a href=&#34;http://xuer.pzhao.org/&#34;&gt;学R&lt;/a&gt;那本书出版了被问起来，答不上来就丢人了，另外也算是承接&lt;a href=&#34;http://www.pzhao.org/zh/post/rmickey/&#34;&gt;菜鸟致简速成&lt;/a&gt;那篇帖子，里面只谈了野包的发布分享，而只有提交到了 CRAN，野包才算转正。&lt;/p&gt;
&lt;p&gt;很快，这三个包都成功转正，可以正常安装了：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;#39;mindr&amp;#39;)
install.packages(&amp;#39;pinyin&amp;#39;)
install.packages(&amp;#39;bookdownplus&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里说说发布的过程和我遇到的一些问题。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;自查&lt;/h2&gt;
&lt;p&gt;包发布之前，先自查有没有错误。只需用RStudio打开待发布的R包的&lt;code&gt;.Rproj&lt;/code&gt;文件，然后点击右上方面板的 Build - Check 按钮，就可以看到自查结果。&lt;/p&gt;
&lt;p&gt;这里要注意：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;结果里尽量不要包含任何 Notes 和 Warnings。如果有，就去找到问题修改，不然在提交的时候会被退回。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;关于&lt;code&gt;author &amp;lt;author&#39;s email&amp;gt;&lt;/code&gt;的那一条 Note 是可以忽略的，只是提醒你再次看看作者信息有没有填错。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我最初的自查结果有些 Notes 我原以为可以无视。比如，&lt;code&gt;DESCRIPTION&lt;/code&gt; 文件里 &lt;code&gt;Title&lt;/code&gt; 字段有些词要求首字母大写，我心想，这也算错误？就没理。再比如，告诉我 “no example. no test. no vignette.” 我心想，好像很多包都没有这几样，不也都发布了么？所以我同样无视。结果就是……&lt;/p&gt;
&lt;p&gt;下面接着讲。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;提交&lt;/h2&gt;
&lt;p&gt;把包的压缩文件在 &lt;a href=&#34;https://cran.r-project.org/submit.html&#34;&gt;CRAN 的网页&lt;/a&gt;上传即可。成功上传后会收到 email 通知，需要点击里面的链接进行确认。&lt;/p&gt;
&lt;p&gt;我两个宝贝儿 mindr 和 pinyin 的1.0.0版是六一那天上传并确认的，之后我就等，一直等到6月16号，我才想起来这事儿，就发信给 CRAN &lt;a href=&#34;mailto:cran@r-project.org&#34;&gt;cran@r-project.org&lt;/a&gt; 催了一下，当天就得到了 Dr. Uwe Ligges 的回复，说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;你那两个包在提交当天就被系统自动拒收了，因为系统自动检查时发现了两个 Notes。系统自动发信通知你了，如果没收到，请翻翻垃圾邮件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我一翻邮箱的 spam，果然，拒信早就在里面了。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;修改&lt;/h2&gt;
&lt;p&gt;乖乖地修改大小写，添加 vignette 和 examples，把版本号修改成 1.0.1 后再次上传。这回通过系统自检了，但是先后收到好几封 Uwe Ligges 和 Kurt Hornik 发来的修改意见，要求修改&lt;code&gt;DESCRIPTION&lt;/code&gt;文件，主要有：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;删除不必要的文字，比如我对包的描述是“An R package for converting Chinese characters into Pinyin”， 要求我把“An R package for”几个字删掉。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用单引号把文件扩展名引起来。比如我说 &lt;code&gt;.md files&lt;/code&gt;，要求改成&lt;code&gt;&#39;.md&#39; files&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;软件名称也要用单引号引起来，并且给出链接。比如我说思维导图可以用 FreeMind打开，要改成&lt;code&gt;&#39;FreeMind&#39;(&amp;lt;http://freemind.sourceforge.net/wiki/index.php/Main_Page&amp;gt;)&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;对特殊的概念要简要解释。pinyin 包得解释一下什么是“pinyin”，mindr 包要求解释一下什么是“common mindmap software”。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;没用的字段要删掉。比如&lt;code&gt;VignetteBuilder: knitr&lt;/code&gt;字段，我有个包并没有写 vignette，这个字段就不要出现在 DESCRIPTION 里，虽然没出错。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;标题和描述里不要用 grave accent (`) 号，要改成单引号。我也觉得自己有滥用代码格式标记的趋势，是个专有名词就想用。这个毛病不好，要改。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这两位挺有耐心的，来来回回给了我好几次意见，我就先拿 mindr 开刀，改一点就提交个新版本，最后 mindr 的提交版本是1.0.4，算是没什么问题了，我才大体知道是个什么路子，回头修改 pinyin 包 和 bookdownplus 包，提交的版本都是1.0.2。&lt;/p&gt;
&lt;p&gt;最后的最后，收到 Kurt Hornik 发来的邮件：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Thanks, on CRAN now.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;不难&lt;/h2&gt;
&lt;p&gt;我觉得提交R包并不像Hadley Wickham 在 &lt;a href=&#34;http://r-pkgs.had.co.nz/release.html&#34;&gt;R packages&lt;/a&gt;一书里写得那么可怕：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;失败令人沮丧，你得到的反馈可能简单粗暴，你可能觉得遭到了羞辱。与其跟 CRAN 的维护者争辩而可能浪费双方的时间，倒不如：&lt;/p&gt;
&lt;p&gt;深呼吸。R包被拒并非世界末日。谁都会遇见。甚至连 R 核心成员都得走同样的流程，享受同等待遇。我被CRAN拒绝的包多了去了。我曾被禁止两周提交东西到CRAN，因为我已有的包里有太多的小问题。&lt;/p&gt;
&lt;p&gt;如果你得到的回复让你恼火不堪，那就歇几天，冷静下来再回复。忽略任何人身攻击，努力只做技术上的答复。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;说得挺吓人。我这次的体验挺轻松愉快的，两位维护者的答复带领我这个新手学会了下回怎么正确地写 R 包。虽然有些意见我觉得有些吹毛求疵，但是跟向学术期刊投稿比起来算个啥呀。&lt;/p&gt;
&lt;p&gt;而且，R包发布之后，立刻就在Github上得到了pull request，我一看，人家的修改意见提得真好，这是提高 R 水平的好办法。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
