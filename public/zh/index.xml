<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Peng Zhao on Peng Zhao</title>
    <link>http://www.pzhao.org/zh/index.xml</link>
    <description>Recent content in Peng Zhao on Peng Zhao</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017 Peng Zhao</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="/zh/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>LaTeX 公式转换成 Word 公式</title>
      <link>http://www.pzhao.org/zh/post/latex-equations-to-word/</link>
      <pubDate>Tue, 20 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/latex-equations-to-word/</guid>
      <description>&lt;!-- BLOGDOWN-HEAD --&gt;
&lt;!-- /BLOGDOWN-HEAD --&gt;

&lt;!-- BLOGDOWN-BODY-BEFORE --&gt;
&lt;!-- /BLOGDOWN-BODY-BEFORE --&gt;
&lt;p&gt;最近写了篇论文，投往一家学术期刊。投稿时，Word 格式和 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 格式可以任选，我选了 Word，是因为合作作者用 Word。可是，文稿里的公式是我输入的，而那些公式在我的博士论文里是用 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 写的。为了图省事，我就用了 Word 的插件&lt;a href=&#34;http://www.appinn.com/aurora/&#34;&gt;Aurora&lt;/a&gt;，这样，只需把公式的 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 代码往 Word 文档的 Aurora 域里拷贝粘贴，bingo！公式就渲染好了，比 Word 的自带公式漂亮一些。&lt;/p&gt;
&lt;p&gt;这篇论文很顺利，很快被接收了。到了最后一步的时候，编辑部要我把文档里的公式修改成可编辑的格式。——本来就是可编辑的呀。嗯，大概是编辑部不使用Aurora，那么他们的 Word 打开我的文档里看到的公式自然就是没法编辑的了。我懒得解释，最后决定把公式全部转换成 Word 公式。&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 公式转成 Word 公式并不难，只需三步：&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; –&amp;gt; MathML –&amp;gt; 修改 –&amp;gt; Word.&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 公式转成 MathML公式。这可以在 &lt;a href=&#34;http://www.pzhao.org/zh/post/r-blogdown/&#34;&gt;blogdown&lt;/a&gt; 里操作，只需把 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 公式代码扔进一个帖子里，运行建站函数，在生成的&lt;a href=&#34;http://www.pzhao.org/zh/post/equations/&#34;&gt;网页&lt;/a&gt;里获取公式的 MathML 代码即可（在公式上点右键 - Show Math As - MathML Code）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改 MathML 代码。将上一步得到的 MathML 代码拷贝粘贴到文本编辑器，然后在开头添上一行：&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;将修改的 MathML 代码全部选中，拷贝粘贴到 Word 里，就自动变成公式了。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;当然，上面第一步也可以用&lt;a href=&#34;https://www.latex4technics.com/&#34;&gt;别的软件&lt;/a&gt;来完成，下图是个示例。&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://www.pzhao.org/img/latex-equations-to-word.gif&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;以后在合作里再也不用Aurora这种把 Word 和 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 混在一起的工具了。不是不好，而是太小众。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Parameterization of Evapotranspiration Estimation for Two Typical East Asian Crops</title>
      <link>http://www.pzhao.org/zh/publication/zhao2017/</link>
      <pubDate>Tue, 20 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/publication/zhao2017/</guid>
      <description></description>
    </item>
    
    <item>
      <title>R包发布记</title>
      <link>http://www.pzhao.org/zh/post/publish-r-packages/</link>
      <pubDate>Mon, 19 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/publish-r-packages/</guid>
      <description>&lt;!-- BLOGDOWN-HEAD --&gt;
&lt;!-- /BLOGDOWN-HEAD --&gt;

&lt;!-- BLOGDOWN-BODY-BEFORE --&gt;
&lt;!-- /BLOGDOWN-BODY-BEFORE --&gt;
&lt;p&gt;最近，我把&lt;a href=&#34;http://www.pzhao.org/zh/post/mindr/&#34;&gt;mindr&lt;/a&gt;和&lt;a href=&#34;http://www.pzhao.org/zh/post/pinyin/&#34;&gt;pinyin&lt;/a&gt;两个包提交到了 CRAN。这两个包都很简单，我就是想体验一下发布R包的流程，免得将来&lt;a href=&#34;http://xuer.pzhao.org/&#34;&gt;学R&lt;/a&gt;那本书出版了被问起来，答不上来就丢人了，另外也算是承接&lt;a href=&#34;http://www.pzhao.org/zh/post/rmickey/&#34;&gt;菜鸟致简速成&lt;/a&gt;那篇帖子，里面只谈了野包的发布分享，而只有提交到了 CRAN，野包才算转正。&lt;/p&gt;
&lt;p&gt;昨天，这两个包都成功转正，可以正常安装了：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;#39;mindr&amp;#39;)
install.packages(&amp;#39;pinyin&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里说说发布的过程和我遇到的一些问题。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;自查&lt;/h2&gt;
&lt;p&gt;包发布之前，先自查有没有错误。只需用RStudio打开待发布的R包的&lt;code&gt;.Rproj&lt;/code&gt;文件，然后点击右上方面板的 Build - Check 按钮，就可以看到自查结果。&lt;/p&gt;
&lt;p&gt;这里要注意：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;结果里尽量不要包含任何 Notes 和 Warnings。如果有，就去找到问题修改，不然在提交的时候会被退回。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;关于&lt;code&gt;author &amp;lt;author&#39;s email&amp;gt;&lt;/code&gt;的那一条 Note 是可以忽略的，只是提醒你再次看看作者信息有没有填错。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我最初的自查结果有些 Notes 我原以为可以无视。比如，&lt;code&gt;DESCRIPTION&lt;/code&gt; 文件里 &lt;code&gt;Title&lt;/code&gt; 字段有些词要求首字母大写，我心想，这也算错误？就没理。再比如，告诉我 “no example. no test. no vignette.” 我心想，好像很多包都没有这几样，不也都发布了么？所以我同样无视。结果就是……&lt;/p&gt;
&lt;p&gt;下面接着讲。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;提交&lt;/h2&gt;
&lt;p&gt;把包的压缩文件在 &lt;a href=&#34;https://cran.r-project.org/submit.html&#34;&gt;CRAN 的网页&lt;/a&gt;上传即可。成功上传后会收到 email 通知，需要点击里面的链接进行确认。&lt;/p&gt;
&lt;p&gt;我这两个宝贝儿的1.0.0版是六一那天上传并确认的，之后我就等，一直等到6月16号，我才想起来这事儿，就发信给 CRAN &lt;a href=&#34;mailto:cran@r-project.org&#34;&gt;cran@r-project.org&lt;/a&gt; 催了一下，当天就得到了 Dr. Uwe Ligges 的回复，说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;你那两个包在提交当天就被系统自动拒收了，因为系统自动检查时发现了两个 Notes。系统自动发信通知你了，如果没收到，请翻翻垃圾邮件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我一翻邮箱的 spam，果然，拒信早就在里面了。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;修改&lt;/h2&gt;
&lt;p&gt;乖乖地修改大小写，添加 vignette 和 examples，把版本号修改成 1.0.1 后再次上传。这回通过系统自检了，但是先后收到好几封 Uwe Ligges 和 Kurt Hornik 发来的修改意见，要求修改&lt;code&gt;DESCRIPTION&lt;/code&gt;文件，主要有：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;删除不必要的文字，比如我对包的描述是“An R package for converting Chinese characters into Pinyin”， 要求我把“An R package for”几个字删掉。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用单引号把文件扩展名引起来。比如我说 &lt;code&gt;.md files&lt;/code&gt;，要求改成&lt;code&gt;&#39;.md&#39; files&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;软件名称也要用单引号引起来，并且给出链接。比如我说思维导图可以用 FreeMind打开，要改成&lt;code&gt;&#39;FreeMind&#39;(&amp;lt;http://freemind.sourceforge.net/wiki/index.php/Main_Page&amp;gt;)&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;对特殊的概念要简要解释。pinyin 包得解释一下什么是“pinyin”，mindr 包要求解释一下什么是“common mindmap software”。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这两位挺有耐心的，来来回回给了我好几次意见，我就先拿 mindr 开刀，改一点就提交个新版本，最后 mindr 的提交版本是1.0.4，算是没什么问题了，我才大体知道是个什么路子，回头修改 pinyin 包，提交的版本是1.0.2。&lt;/p&gt;
&lt;p&gt;最后的最后，收到 Kurt Hornik 发来的邮件：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Thanks, on CRAN now.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;不难&lt;/h2&gt;
&lt;p&gt;我觉得提交R包并不像Hadley Wickham 在 &lt;a href=&#34;http://r-pkgs.had.co.nz/release.html&#34;&gt;R packages&lt;/a&gt;一书里写得那么可怕：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;失败令人沮丧，你得到的反馈可能简单粗暴，你可能觉得遭到了羞辱。与其跟 CRAN 的维护者争辩而可能浪费双方的时间，倒不如：&lt;/p&gt;
&lt;p&gt;深呼吸。R包被拒并非世界末日。谁都会遇见。甚至连 R 核心成员都得走同样的流程，享受同等待遇。我被CRAN拒绝的包多了去了。我曾被禁止两周提交东西到CRAN，因为我已有的包里有太多的小问题。&lt;/p&gt;
&lt;p&gt;如果你得到的回复让你恼火不堪，那就歇几天，冷静下来再回复。忽略任何人身攻击，努力只做技术上的答复。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;说得挺吓人。我这次的体验挺轻松愉快的，两位维护者的答复带领我这个新手学会了下回怎么正确地写 R 包。虽然有些意见我觉得有些吹毛求疵，但是跟向学术期刊投稿比起来算个啥呀。&lt;/p&gt;
&lt;p&gt;而且，R包发布之后，立刻就在Github上得到了pull request，我一看，人家的修改意见提得真好，这是提高 R 水平的好办法。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>《学R》序（朱彤）</title>
      <link>http://www.pzhao.org/zh/post/preface_zhu/</link>
      <pubDate>Wed, 14 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/preface_zhu/</guid>
      <description>&lt;p&gt;我读硕士研究生时的导师是朱彤教授。在朱老师科研小组 ZTGroup 学习的三年如沐春风，我从中得到的收获受益终生。正值北京大学环境大楼落成不久，又逢毕业季，作为环境科学与工程学院的院长，朱老师在极其繁忙的工作中抽出时间来为本书欣然作序，实属不易，仅凭“感激”二字岂能表达我们的谢意？&lt;/p&gt;

&lt;p&gt;下面是朱老师为本书写的序言。&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
&lt;p&gt;受作者邀请为此书写序，感到惶恐和高兴。两名作者分别是我以前的硕士和博士生，多年来我们小组很多同学都在学习和使用R语言，作为老师的我却从来没有用过，要为一本关于R语言的书写序，自然感到很惶恐。而当我打开这本书，没有看到晦涩难懂的概念、公式，在风趣易懂的语言、引人入胜的描述下，很快阅读完了前几章，不仅迅速跨越了零基础的障碍，更为两名作者为广大的数据统计分析和R语言学习人员提供这样一本独特、有趣的入门书而感到高兴。&lt;/p&gt;

&lt;p&gt;随着科技的高速发展，对大量数据的处理和分析已成为科研甚至日常生活的必需，掌握一门强大的数据分析工具非常必要。作为一种开源、免费且不断更新的语言，R不仅拥有数据分析、统计、作图等强大功能，其应用范围还在不断扩大：赵鹏博士可以用它来撰写学术论文、做备忘录、制作幻灯片、整理读书笔记、整理照片、写书、记录吉他谱、写博客、做网站等。R语言拥有越来越多的使用者和爱好者，也使得其功能越来越广泛、强大。&lt;/p&gt;

&lt;p&gt;与其它介绍R语言的书籍不同，这本书以两名作者自身学习的经验娓娓道来，没有多少枯燥的术语和公式，是一本非常适合自学R语言和统计学的入门书，尤其适合零基础和不懂统计学的读者。这本书可作为大学本科生和研究生自学用，也可作为高校教师教案。相信这读者们不仅会发现这本书很有用，更会发现关于R语言和统计学的书可以写的很有趣。&lt;/p&gt;

&lt;p&gt;&amp;mdash; 朱彤，2017年6月13日&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>pinyin: 把汉字转换成拼音的R包</title>
      <link>http://www.pzhao.org/zh/post/pinyin/</link>
      <pubDate>Fri, 26 May 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/pinyin/</guid>
      <description>&lt;!-- BLOGDOWN-HEAD --&gt;
&lt;!-- /BLOGDOWN-HEAD --&gt;

&lt;!-- BLOGDOWN-BODY-BEFORE --&gt;
&lt;!-- /BLOGDOWN-BODY-BEFORE --&gt;
&lt;p&gt;今天新写了个R包，粗暴地取名为 &lt;a href=&#34;https://github.com/pzhaonet/pinyin/&#34;&gt;pinyin&lt;/a&gt;，作用是把汉字转换成拼音。&lt;/p&gt;
&lt;p&gt;安装方法：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/pinyin&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;安装时可能会出现一些关于 locale 的警告，净吓唬人，无视。&lt;/p&gt;
&lt;p&gt;使用方法：&lt;/p&gt;
&lt;p&gt;pinyin 0.0.0版包含3个函数.&lt;code&gt;pinyin()&lt;/code&gt;是主函数，可以把一个带汉字的字符串转换成拼音。可以选择:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;转换成标准的全拼 (默认 &lt;code&gt;method = &#39;quanpin&#39;&lt;/code&gt;)，或&lt;/li&gt;
&lt;li&gt;以数字表示声调 (&lt;code&gt;method = &#39;tone&#39;&lt;/code&gt;) , 或&lt;/li&gt;
&lt;li&gt;不含声调(&lt;code&gt;method = &#39;toneless&#39;&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;也可以选择仅保留每个字的首字母(&lt;code&gt;only_first_letter = TRUE&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;可以自定义相邻两字拼音的分隔符号(&lt;code&gt;sep = &#39;_&#39;&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;如果汉字字符串里边包含非汉字字符，可以选择将这些字符保留原样(&lt;code&gt;nonezh_replace = NULL&lt;/code&gt;)还是转换成指定字符(如&lt;code&gt;nonezh_replace = &#39;-&#39;&lt;/code&gt;)。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;举例如下：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;#39;pinyin&amp;#39;)
pinyin(&amp;#39;羌笛何须怨杨柳春风不度玉门关&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;qiānɡ_dí_hé_xū_yuàn_yánɡ_liǔ_chūn_fēnɡ_bú_dù_yù_mén_ɡuān&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pinyin(&amp;#39;羌笛何须怨杨柳春风不度玉门关&amp;#39;, sep = &amp;#39; &amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;qiānɡ dí hé xū yuàn yánɡ liǔ chūn fēnɡ bú dù yù mén ɡuān&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pinyin(&amp;#39;羌笛何须怨杨柳春风不度玉门关&amp;#39;, sep = &amp;#39; &amp;#39;, method = &amp;#39;tone&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;qiang1 di2 he2 xu1 yuan4 yang2 liu3 chun1 feng1 bu2 du4 yu4 men2 guan1&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pinyin(&amp;#39;羌笛何须怨杨柳春风不度玉门关&amp;#39;, sep = &amp;#39; &amp;#39;, method = &amp;#39;toneless&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;qiang di he xu yuan yang liu chun feng bu du yu men guan&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pinyin(&amp;#39;羌笛何须怨杨柳春风不度玉门关&amp;#39;, sep = &amp;#39;&amp;#39;, only_first_letter = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;qdhxyylcfbdymɡ&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pinyin(&amp;#39;羌笛何须怨?杨柳春风,不度玉门关.&amp;#39;, sep = &amp;#39;&amp;#39;, nonezh_replace = &amp;#39;-&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;qiānɡdíhéxūyuàn-yánɡliǔchūnfēnɡ-búdùyùménɡuān-&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果自变量是多个字符串的向量，那么只会转换第一个字符串：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pinyin(c(&amp;#39;羌笛何须怨杨柳&amp;#39;, &amp;#39;春风不度玉门关&amp;#39;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;qiānɡ_dí_hé_xū_yuàn_yánɡ_liǔ&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这怎么行？哎，用 &lt;code&gt;sapply()&lt;/code&gt; 嘛：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sapply(c(&amp;#39;羌笛何须怨杨柳&amp;#39;, &amp;#39;春风不度玉门关&amp;#39;), pinyin)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##                 羌笛何须怨杨柳                 春风不度玉门关 
## &amp;quot;qiānɡ_dí_hé_xū_yuàn_yánɡ_liǔ&amp;quot;  &amp;quot;chūn_fēnɡ_bú_dù_yù_mén_ɡuān&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其他两个函数，其实是 &lt;code&gt;pinyin()&lt;/code&gt; 的延伸和示例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;file.rename2py()&lt;/code&gt;用来将文件名里的汉字转换成拼音。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bookdown2py()&lt;/code&gt;是专门为 bookdown 包服务的，作用是为章节的中文标题自动添加个对应的拼音ID &lt;code&gt;{#biaotipinyin}&lt;/code&gt;，避免在生成网页文件时文件名里出现一大堆乱码，并且解决&lt;a href=&#34;https://disqus.com/home/discussion/yihui/_yihui_xie_679/#comment-3175332429&#34;&gt;标题里中英文混合的问题&lt;/a&gt;。这事儿已经让我惦记三个月了。— 当然这事儿手动完全可以处理，只是手动处理的过程毫无乐趣可言罢了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;拼音库我试了好几个，最后选定了&lt;a href=&#34;http://bbs.unispim.com/forum.php?mod=viewthread&amp;amp;tid=31644&#34;&gt;wangyanhan整理制作的42856字拼音表&lt;/a&gt;，直接处理文本文件，简单粗暴，转换起来可能有点慢，会顿一下，但已经够我自用了。&lt;/p&gt;
&lt;p&gt;我写这个包的环境是 windows 7 下区域设置为中国，别的环境没测试，估计会有不少坑。我这里就有一些，比如不知道哪里设置有问题，包的函数里居然不能出现中文字符，弄得我自变量的默认值和example部分只好空着。再比如多音字的问题，目前完全没处理。所以，转换&lt;code&gt;春眠不觉晓&lt;/code&gt;的结果会让人愣一下，再转换&lt;code&gt;处处闻啼鸟&lt;/code&gt;……&lt;/p&gt;
&lt;p&gt;结果好尴尬。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>微气象学常用的 LaTeX 公式</title>
      <link>http://www.pzhao.org/zh/post/equations/</link>
      <pubDate>Tue, 23 May 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/equations/</guid>
      <description>&lt;!-- BLOGDOWN-HEAD --&gt;
&lt;!-- /BLOGDOWN-HEAD --&gt;

&lt;!-- BLOGDOWN-BODY-BEFORE --&gt;
&lt;!-- /BLOGDOWN-BODY-BEFORE --&gt;
&lt;p&gt;这些年，论文发得不多，公式却攒了不少，大部分都是自己亲手敲的 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 代码。我把他们整理在一个 eq.tex 文档里，配合一个编译好的 eq.pdf 文件。每次需要的时候，在 eq.pdf 里找到需要的公式，然后去 eq.tex 找公式代码，拷到目标文档里完事儿。稍微有点小麻烦，但总比重新敲一遍代码要省事、准确。&lt;/p&gt;
&lt;p&gt;然而，现在有了 blogdown 和 Hugo-academic 主题，一切都变得不一样了。我把 eq.tex 里的文本全部拷贝粘贴到一个 .Rmd 文件，扔进网站里，就得到了现在这个帖子。鼠标放在公式上点右键- Show Math As - &lt;span class=&#34;math inline&#34;&gt;\(\TeX\)&lt;/span&gt; Commands，就得到了公式的 &lt;span class=&#34;math inline&#34;&gt;\(\LaTeX\)&lt;/span&gt; 代码。直接拷贝就行了，再也不用在两个文档里切换以及找来找去。&lt;/p&gt;
&lt;p&gt;我觉得，我再也回不去了。&lt;/p&gt;
&lt;div id=&#34;meteorology&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Meteorology&lt;/h2&gt;
&lt;div id=&#34;atmpspheric-pressure&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Atmpspheric pressure&lt;/h3&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
P=101.325 \cdot (\frac{293-0.0065z}{293}) ^ {5.26} = 86.838\,\text{kPa}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(z\)&lt;/span&gt;: elevation above sea level in m.&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
-\text{d} p =\rho g \text{d}z
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\ln \frac{p_2}{p_1} = - \int_{z_1}^{z_2} \frac{g}{RT}\text{d}z
\end{equation}\]&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&#34;psychrometric-constant&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Psychrometric constant&lt;/h3&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\gamma =\frac{c_p P}{\varepsilon \lambda} = 0.665 \times 10 ^ {-3} P
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\lambda = -0.0000614342 T^3 + 0.00158927 T^2 - 2.36418T + 2500.79
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(P\)&lt;/span&gt;: atmospheric pressure.&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\lambda\)&lt;/span&gt;: latent heat of vaporization (2.46 MJ kg&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(c_p\)&lt;/span&gt;: specific heat of the air (at constant pressure &lt;span class=&#34;math inline&#34;&gt;\(1.013 \times 10 ^{-3}\)&lt;/span&gt; MJ kg&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;K&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;humidity&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Humidity&lt;/h3&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    e_{\text s}=6.112\exp\frac {17.62t}{243.12+t}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(e_s\)&lt;/span&gt;: saturated vapor pressure over water at &lt;span class=&#34;math inline&#34;&gt;\(-45\)&lt;/span&gt; to 60 &lt;span class=&#34;math inline&#34;&gt;\(^{\circ}\)&lt;/span&gt;C (sonntag1990)&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    s_{\text c}=\frac {4284e_{\text s}}{(243.12+t)^2}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(s_c\)&lt;/span&gt;: slope of the saturation vapor pressure temperature relationship.&lt;/p&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    e_{\text s} = 0.6108\exp\frac {17.27T}{237.3 + T}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    s_{\text c}=\frac {4098 \cdot 0.6108\exp\frac {17.27T}{237.3 + T}}{(237.3 + T)^2}
\end{equation}\]&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;carbon&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Carbon&lt;/h2&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    \text {GPP} = \frac{\alpha R_{\mathrm g}\beta }{\alpha R_{\mathrm g}+\beta }
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    \frac{\text {GPP}}{\text {LAI}_\text{act}}\ = \frac{\alpha&amp;#39; R_{\mathrm g}\beta&amp;#39; }{\alpha&amp;#39; R_{\mathrm g}+\beta&amp;#39; }
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{eGPPLRg}
    \text{GPP} = \text{LAI}_\text{act}\frac{\alpha&amp;#39; R_{\mathrm g}\beta&amp;#39; }{\alpha&amp;#39; R_{\mathrm g}+\beta&amp;#39; }, 
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{eGPPL}
    \text {GPP} = a_\text {LAI}\text{LAI}_\text {act}.
\end{equation}\]&lt;/span&gt;
&lt;p&gt;Chamber flux calculation:&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    F_c = \frac{10 V P_0 (1 - \frac{W_0}{1000})}{RS  (T_0 + 273.15)} \frac{\partial  C&amp;#39;}{\partial t}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;flux in μmol m s, p in kpa, volume in cm, w0 in 0.001, t in °C, t in s, c in ppm.&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    C&amp;#39; = C&amp;#39;_x + (C&amp;#39;_0 - C&amp;#39;_x) e ^ {-a(t-t_0)}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\partial C&amp;#39;}{\partial t} | _{t = t_0} = a(C&amp;#39;_x - C&amp;#39;_0)
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    C&amp;#39; = (C&amp;#39;_x + kt) + (C&amp;#39;_0 - C&amp;#39;_x) e ^ {-a(t-t_0)}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
    \frac{\partial C&amp;#39;}{\partial t} | _{t = t_0} = a(C&amp;#39;_x - C&amp;#39;_0) + k
\end{equation}\]&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&#34;energy&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Energy&lt;/h2&gt;
&lt;div id=&#34;evaporation-from-water-by-energy-balance&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Evaporation from water by energy balance&lt;/h3&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
E_r = \frac{R_n}{l_v \rho_w} \times 1000 \times 86400
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
l_v = 2.501 \times 10^6 - 2370T
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(E_r\)&lt;/span&gt; in mm d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(R_n\)&lt;/span&gt;: net radiation (hourly mean - WRCC).&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(l_v\)&lt;/span&gt;: latent heat of vaporization (J/kg).&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\rho_w\)&lt;/span&gt;: mean water density at constant pressure (999.8 kg m&lt;span class=&#34;math inline&#34;&gt;\(^{-3}\)&lt;/span&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;penman-monteith-equation-for-latent-heat-flux&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Penman Monteith equation for latent heat flux&lt;/h3&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
Q ^\text {PM}_{\text E}=\frac {s_{\text c} \frac{-R_{\text n}-Q_{\text G}}{86400\text{s}} + \frac{\rho_a c_{\text p}  (e_{\text s} - e_{\text a})}{r_{\text a}}}{s_{\text c} + \gamma (1 + \frac{r_{\text s}}{r_{\text a}})}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(Q ^\text {PM}_{\text E}\)&lt;/span&gt;: latent heat flux representing ET fraction (day 4.55 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;, night 4.43 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(R_n\)&lt;/span&gt;: (0.957 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(G_{hrday}\)&lt;/span&gt;: 0.0957 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(G_{hrnight}\)&lt;/span&gt;: 0.4789 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(e_s-e_a\)&lt;/span&gt;: vapor pressure deficit of the air (1.9484 kPa - 0.439 kPa = 1.509 kPa)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\rho_a\)&lt;/span&gt;: mean air density at constant pressure (1.040 kg m&lt;span class=&#34;math inline&#34;&gt;\(^{-3}\)&lt;/span&gt;)&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\rho_{adry} = \frac{p}{RT} = 1.229 \text { kg m}^{-3}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\rho_{ahumid} = \frac{p_d}{R_d T} + \frac{p_v}{R_v T}= 1.040 \text { kg m}^{-3}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
p_v = RH \times p_{sat} = 1.142 \text{kPa}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
p_{sat} = 6.1078 \cdot 10 ^{\frac{7.5T-2048.625}{T-35.85}} \cdot 100 = 1.84 \text { kPa}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
p_d = p_{abs} - p_v = 85.696 \text{ kPa}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(c_p\)&lt;/span&gt;: specific heat of the air (at constant pressure &lt;span class=&#34;math inline&#34;&gt;\(1.013 \times 10 ^{-3}\)&lt;/span&gt; MJ kg&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;K&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(s_c\)&lt;/span&gt;: slope of the saturation vapor pressure remperature relationship (0.117 kPa K&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\gamma\)&lt;/span&gt;: psychrometric constant (0.0577 kPa K&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(r_s\)&lt;/span&gt;: bulk surface resistance (20.83 s m&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
r_\text s=\frac{r_\text {si}}{\text {LAI}_\text {active}},
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(r_\text {si}\)&lt;/span&gt;: bulk stomatal resistance well illuminated leaf (100 s m&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;LAI&lt;span class=&#34;math inline&#34;&gt;\(_{active}\)&lt;/span&gt;: active sulit leaf area index. It differs widely for crops but 3 – 5 common for most mature crops. Changes through season and normally reaches max before flowering. Depends on plant density and crop variety. Generally 0.5LAI, i.e. only top half of dense clipped grass is active in surface heat and vapor transfer. For clipped grass LAI&lt;span class=&#34;math inline&#34;&gt;\(=24h\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(r_a\)&lt;/span&gt;: aerodynamic resistence (155.33 s m&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
r_{\text a}= \frac{\ln \frac{z-d}{z_{\textrm{om}}} \ln \frac {z-d}{z_{\textrm{oh}}}}{\kappa ^2 u_z} = \frac{124.264}{u_z}=155.33\text { s m}^{-1}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(z_m\)&lt;/span&gt;: height of wind measurements (2 m)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(z_h\)&lt;/span&gt;: height of humidity measurements (2 m)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(h\)&lt;/span&gt;: constant vegetation height (0.4 m)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(d\)&lt;/span&gt;: zero plane desplacement height (&lt;span class=&#34;math inline&#34;&gt;\(\frac{2}{3}h\)&lt;/span&gt;, 0.27 m)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(z_{om}\)&lt;/span&gt;: roughness length governing momentum transfer (&lt;span class=&#34;math inline&#34;&gt;\(0.123h\)&lt;/span&gt;, 0.0492 m)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(z_{oh}\)&lt;/span&gt;: roughness length governing transfer of heat and vapor (&lt;span class=&#34;math inline&#34;&gt;\(0.1z_{om}\)&lt;/span&gt;, 0.00492 m)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(u_z\)&lt;/span&gt;: wind speed at 2 m height (mean 0.8 m s&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;fao-penman-monteith-equation-for-et-rate-from-reference-surface-et_0&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;FAO Penman Monteith equation for ET rate from reference surface (ET&lt;span class=&#34;math inline&#34;&gt;\(_0\)&lt;/span&gt;)&lt;/h3&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
ET_0 = \frac {0.408 s_{\text c} \frac{-R_{\text n}-Q_{\text G}}{86400\text{s}} + \frac{\gamma 900 u_z (e_{\text s} - e_{\text a})}{T+273}}{s_{\text c} + \gamma (1 + 0.34u_z)}
\end{equation}\]&lt;/span&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(ET_0\)&lt;/span&gt;: reference evapotraspiration (day 1.109 mm day&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;, night 1.064 mm day&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(ET_0\)&lt;/span&gt;: reference evapotraspiration (day 2.72 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;, night 2.61 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(R_n\)&lt;/span&gt;: net radiation (0.445 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(G_{hrday}\)&lt;/span&gt;: 0.0445 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(G_{hrnight}\)&lt;/span&gt;: 0.2227 MJ m&lt;span class=&#34;math inline&#34;&gt;\(^{-2}\)&lt;/span&gt;d&lt;span class=&#34;math inline&#34;&gt;\(^{-1}\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(e_s-e_a\)&lt;/span&gt;: vapor pressure deficit of the air (1.9484 kPa - 0.439 kPa = 1.509 kPa)&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(T\)&lt;/span&gt;: mean daily air temperature at 2 m height (16.2&lt;span class=&#34;math inline&#34;&gt;\(^\circ\)&lt;/span&gt;C)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;equations-in-gafir-documentation&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Equations in GaFiR documentation&lt;/h3&gt;
&lt;span class=&#34;math display&#34; id=&#34;eq:eNEE&#34;&gt;\[\begin{equation}
\text{NEE = GPP} + R_\text{eco}
\tag{1}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{ePM}
Q ^\text {PM}_{\text E}=\frac {s_{\text c} (-R_{\text n}-Q_{\text G}) + \frac{\rho c_{\text p}  (e_{\text s} - e_{\text a})}{r_{\text a}}}{s_{\text c} + \gamma (1 + \frac{r_{\text s}}{r_{\text a}})},
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{era}
r_{\text a}= \frac{\ln \frac{z-d}{z_{\textrm{om}}} \ln \frac {z-d}{z_{\textrm{oh}}}}{\kappa ^2 u},
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{eRl}
%r^{\text {LAI}}_\text s=\frac{r_\text {si}}{0.5\text {LAI}},
r_\text s=\frac{r_\text {si}}{\text {LAI}_\text {active}},
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{eKP}
%\frac{r^{\text {KP}}_\text s}{r_\text a} = a \frac{r^*}{r_\text a} + b,
\frac{r_\text s}{r_\text a} = a \frac{r^*}{r_\text a} + b,
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
r^*=\frac{(s_\text c + \gamma)\rho c_\text p (e_{\text s} - e_{\text a})}{s_\text c \gamma (-R_{\text n}-Q_{\text G})},
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{eRs}
r_{\text s}= \frac {r_{\text a}s_{\text c} (-R_{\text n}-Q_{\text G}) + \rho c_{\text p}  (e_{\text s} - e_{\text a}) - r_{\text a}Q_{\text E}(s_{\text c} + \gamma)}
{\gamma Q_{\text E}}.
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}\label{ePT}
E=\alpha_{\text {PT}} \frac {s_{\text c}}{s_{\text c} + \gamma}(-Q_{\text A})
\end{equation}\]&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;model-evaluation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Model evaluation&lt;/h2&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
 \text{ME}=\frac{1}{N}\sum_{i=1}^{N}|P_i-O_i|
 \end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
 \text{MAE}=\frac{1}{N}\sum_{i=1}^{N}(P_i-O_i)
 \end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{MSE}=\frac{1}{N}\sum_{i=1}^{N}(P_i-O_i)^2
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{RMSE}=\sqrt{\frac{1}{N}\sum_{i=1}^{N}(P_i-O_i)^2}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{NRMSE}=100\frac{\text{RMSE}}{O_\text{max} - O_\text{min}}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{PBIAS} =100\frac{\sum_{i=1}^{n}(P_i-O_i)}{\sum_{i=1}^{n}O_i}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{RSR} =\frac{\text{RMSE}}{\sigma_O}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{rSD} =\frac{\sigma_P}{\sigma_O}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{NSE} =1-\frac{\sum_{i=1}^{n}(O_i-P_i)^2}{\sum_{i=1}^{n}(O_i - \overline{O})^2}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{mNSE} =1-\frac{\sum_{i=1}^{n}|O_i-P_i||^j}{\sum_{i=1}^{n}|O_i - \overline{O}|^j}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{rNSE} =1-\frac{\sum_{i=1}^{n}(\frac{O_i-P_i}{\overline{O}})^2}{\sum_{i=1}^{n}(\frac{O_i - \overline{O}}{\overline{O}})^2}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
d =1-\frac{\sum_{i=1}^{n}(P_i-O_i)^2}{\sum_{i=1}^{n}(|P_i-O_i|+|P_i+O_i|)^2}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
md =1 - \frac{\sum_{i=1}^{n}(P_i-O_i)^j}{\sum_{i=1}^{n}(|P_i-O_i|+|P_i+O_i|)^j}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
rd =1-\frac{\sum_{i=1}^{n}(\frac{P_i-O_i}{\overline{O}})^2}{\sum_{i=1}^{n}(\frac{|P_i-O_i|+|P_i+O_i|}{\overline{O}})^2}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{cp} =1-\frac{\sum_{i=2}^{n}(O_i-P_i)^2}{\sum_{i=1}^{n-1}(O_{i+1} - O_i)^2}
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
R =\frac{\sum_{i=1}^{n}(O_i-\overline{O})(P_i-\overline{P})}{\sqrt{\sum_{i=1}^{n}(O_i-\overline{O})^2}\sqrt{\sum_{i=1}^{n}(P_i-\overline{P})^2}) }
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
R^2 =(\frac{\sum_{i=1}^{n}(O_i-\overline{O})(P_i-\overline{P})}{\sqrt{\sum_{i=1}^{n}(O_i-\overline{O})^2}\sqrt{\sum_{i=1}^{n}(P_i-\overline{P})^2}) })^2
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} 
\text{bR2} =bR^2
\end{equation}\]&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&#34;mathematics&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Mathematics&lt;/h2&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\text {d} x^\mu}{\text {d} x} = \mu x ^{\mu - 1}\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\text {d} e^x}{\text {d} x} = e^x\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\text {d} a^x}{\text {d} x} = a^x \ln a \\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\text {d} \ln x}{\text {d} x} = \frac{1}{x}\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\text {d} \log _a x}{\text {d} x} = \frac{1}{x\ln a}\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\text {d} \sin x}{\text {d} x} = \cos x\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\frac{\text {d} \cos x}{\text {d} x} = - \sin x\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int k \text {d} x = kx + C
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int x ^ \mu \text {d} x = \frac{x^{\mu + 1}}{\mu + 1} + C\ (\mu \neq -1)
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \frac{1}{x}\text {d} x = \ln \left | x \right | + C
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \text {e} ^x \text {d} x = \text {e} ^x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int a ^x \text {d} x = \frac{a^x}{\ln a}+ C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \frac{1}{1+x^2}\text {d} x = \arctan x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \frac{1}{1-x^2}\text {d} x = \arcsin x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \cos x \text {d} x = \sin x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \sin x \text {d} x = -\cos x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \frac{1}{\cos^2 x} \text {d} x = \tan x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \frac{1}{\sin^2 x} \text {d} x = -\cot x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \sec x \tan x \text {d} x = \sec x + C\\
\end{equation}\]&lt;/span&gt;
&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\int \csc x \cot x \text {d} x = -\csc x + C\\
\end{equation}\]&lt;/span&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R mindr: 把 Markdown 转成思维导图</title>
      <link>http://www.pzhao.org/zh/post/mindr/</link>
      <pubDate>Fri, 19 May 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.pzhao.org/zh/post/mindr/</guid>
      <description>&lt;!-- BLOGDOWN-HEAD --&gt;
&lt;!-- /BLOGDOWN-HEAD --&gt;

&lt;!-- BLOGDOWN-BODY-BEFORE --&gt;
&lt;!-- /BLOGDOWN-BODY-BEFORE --&gt;
&lt;p&gt;将 markdown (.md, .Rmd) 文件转换成思维导图的 R 扩展包 &lt;a href=&#34;https://github.com/pzhaonet/mindr&#34;&gt;mindr&lt;/a&gt; 是我写的第五个 R 包，安装方法如下：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;pzhaonet/mindr&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用方法：&lt;/p&gt;
&lt;p&gt;在R的工作目录创建个名叫 &lt;code&gt;mm/&lt;/code&gt; 的文件夹，丢进去一堆 markdown 文件 (.md, .Rmd)，然后运行：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mindr::md2mm()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;就得到个 &lt;code&gt;mm.mm&lt;/code&gt; 的思维导图文件，用免费的思维导图软件 &lt;a href=&#34;http://freemind.sourceforge.net/wiki/index.php/Download&#34;&gt;freemind&lt;/a&gt; 可以直接打开。界面比较简陋。或者用漂亮的免费软件 &lt;a href=&#34;http://www.xmind.net/download/win/&#34;&gt;Xmind&lt;/a&gt;，需要选择&lt;code&gt;导入 freemind 导图&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;mindr包还有另外两个函数：&lt;code&gt;mm2md()&lt;/code&gt;是反向操作，将思维导图转换成markdown;&lt;code&gt;outline()&lt;/code&gt;是从markdown文件里提取出各级标题生成大纲。&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;我的书稿《学R》最初是先用思维导图拟定框架，然后在 Word 里写，后来转到 bookdown 里完成的。今天下午，我在书稿的旧思维导图里照着新稿修改，想把两者统一了。改着改着，觉得不对劲儿呀，R markdown 的哲学是维护一份文档，导出多个格式，我怎么又开始维护两份内容相同只是格式不同的文档了？&lt;/p&gt;
&lt;p&gt;这肯定不是什么新问题，肯定有办法直接把 markdown 转成思维导图。于是我搜。我搜搜搜，竟然没搜到！&lt;/p&gt;
&lt;p&gt;这就怪了。从常识上判断，我认为这个工具肯定有，说不定藏在某个 R 包里，只是太隐蔽了。&lt;/p&gt;
&lt;p&gt;是应该继续搜呢，还是自己动手？有时候真是难以权衡。我掂量了一下轻重，选择了后者。&lt;/p&gt;
&lt;p&gt;晚上，写好了。&lt;/p&gt;
&lt;p&gt;先拿 &lt;a href=&#34;https://github.com/rstudio/bookdown/tree/master/inst/examples&#34;&gt;bookdown 书稿&lt;/a&gt;当小白鼠练手，用 freemind 直接打开：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/mindr/master/showcase/mindr_bookdown.jpeg&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;freemind 确实简陋。再拿 &lt;a href=&#34;https://github.com/rstudio/blogdown/tree/master/docs&#34;&gt;blogdown 书稿&lt;/a&gt; 试试，导入 Xmind 看看：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/mindr/master/showcase/mindr_blogdown.jpg&#34; /&gt;

&lt;/div&gt;
&lt;p&gt;还不错。好了，实验成熟了，放心地用在自己的书稿上，并且挑个最漂亮的款式：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/pzhaonet/mindr/master/showcase/mindr_xuer.jpg&#34; /&gt;

&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
